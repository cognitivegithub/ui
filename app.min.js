(function(){function a(a,b){return function(){var c=[this];0<arguments.length&&c.push.apply(c,arguments);return a[b].apply(a,c)}}if(Ext)if(Ext.util.JSON||(Ext.util.JSON=Ext.JSON),Ext.Function&&!Function.prototype.defer&&(Function.prototype.createDelegate=a(Ext.Function,"bind"),Function.prototype.defer=a(Ext.Function,"defer")),!String.format&&Ext.String&&(String.format=Ext.String.format),!Date.prototype.format&&Ext.Date&&(Date.prototype.format=a(Ext.Date,"format")),Ext.TaskManager||(Ext.TaskManager=
Ext.TaskMgr),Ext.versions&&Ext.versions.core&&4<=Ext.versions.core.major)Ext.reg=Ext.emptyFn,Ext.data.Store.superclass.recordType=function(a){return a};else{var b={"Ext.form.Panel":"Ext.form.FormPanel","Ext.grid.Panel":"Ext.grid.GridPanel","Ext.tree.Panel":"Ext.tree.TreePanel","Ext.panel.Panel":"Ext.Panel","Ext.tab.Panel":"Ext.TabPanel"},c=[],d=function(a,b){for(var c=a.split("."),d=window,h=0;h<c.length-1;h++){if(!d[c[h]]){if(!b)return null;d[c[h]]={}}d=d[c[h]]}return b?{parent:d,child:c[h]}:d[c[h]]};
Ext.define=function(a,f){var g=f.extend,k;b[g]&&(g=b[g]);f.editable&&"Ext.grid.GridPanel"==g&&(g="Ext.grid.EditorGridPanel");if(k=d(g))for(g=d(a,!0),f.layout&&f.layout.type&&(f.layoutConfig=f.layout,f.layout=f.layout.type),g.parent[g.child]=Ext.extend(k,f),k=0;k<c.length;k++)c[k].depends===a&&(g=c[k],c.splice(k,1),Ext.define(g.name,g.cfg),k--);else{for(k=0;k<c.length;k++)if(c[k].name==a)return!1;c.push({name:a,depends:g,cfg:f});return!1}return!0};Ext.reg("pagingtoolbar",Ext.PagingToolbar)}})();Ext.override(Ext.Panel,{beforeDestroy:function(){Ext.Panel.superclass.beforeDestroy.call(this);this.header&&this.header.removeAllListeners&&this.header.removeAllListeners();if(this.tools)for(var a in this.tools)Ext.destroy(this.tools[a]);this.toolbars&&0<this.toolbars.length&&Ext.each(this.toolbars,function(a){a.un("afterlayout",this.syncHeight,this);a.un("remove",this.syncHeight,this)},this);if(Ext.isArray(this.buttons))for(;this.buttons.length;)Ext.destroy(this.buttons[0]);this.rendered?(Ext.destroy(this.ft,
this.header,this.footer,this.toolbars,this.tbar,this.bbar,this.body,this.mc,this.bwrap),this.fbar&&Ext.destroy(this.fbar,this.fbar.el)):Ext.destroy(this.topToolbar,this.bottomToolbar)}});Ext.override(Ext.form.DateField,{altFormats:"c|m/d/Y|n/j/Y|n/j/y|m/j/y|n/d/y|m/j/Y|n/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d|n-j|n/j"});
Ext.data.JsonStore=Ext.extend(Ext.data.Store,{constructor:function(a){Ext.data.JsonStore.superclass.constructor.call(this,Ext.apply(a,{reader:new Ext.data.JsonReader(a,a.recordType||a.fields)}))}});Ext.reg("jsonstore",Ext.data.JsonStore);Ext.reg("tooltip",Ext.ToolTip);Ext.override(Ext.grid.GridView,{cellTpl:new Ext.Template('<td class="x-grid3-col x-grid3-cell x-grid3-td-{id} {css}" style="{style}" tabIndex="0" {cellAttr}>','<div class="x-grid3-cell-inner x-grid3-col-{id}" {attr}>{value}</div>',"</td>")});
Ext.override(Ext.util.Cookies.clear,function(a){Ext.util.Cookies.get(a)&&(document.cookie=a+"=; expires=Sat, 01-Jan-2000 00:00:01 GMT")});
Ext.override(Ext.dd.DragTracker,{onMouseMove:function(a,b){if(this.active&&Ext.isIE&&!Ext.isIE9&&!a.browserEvent.button)a.preventDefault(),this.onMouseUp(a);else{a.preventDefault();var c=a.getXY(),d=this.startXY;this.lastXY=c;if(!this.active)if(Math.abs(d[0]-c[0])>this.tolerance||Math.abs(d[1]-c[1])>this.tolerance)this.triggerStart(a);else return;this.fireEvent("mousemove",this,a);this.onDrag(a);this.fireEvent("drag",this,a)}}});
Ext.util.TaskRunner=function(a){a=a||10;var b=[],c=[],d=0,e=!1,f=function(a){c.push(a);a.onStop&&a.onStop.apply(a.scope||a)},g=function(){var a=c.length,g=(new Date).getTime();if(0<a){for(var l=0;l<a;l++)b.remove(c[l]);c=[];if(1>b.length){e=!1;clearInterval(d);d=0;return}}for(var l=0,q,s=b.length;l<s;++l)if(a=b[l],q=g-a.taskRunTime,0>q)a.taskRunTime=g;else{if(a.interval<=q&&(q=a.run.apply(a.scope||a,a.args||[++a.taskRunCount]),a.taskRunTime=g,!1===q||a.taskRunCount===a.repeat)){f(a);break}a.duration&&
a.duration<=g-a.taskStartTime&&f(a)}};this.start=function(c){b.push(c);c.taskStartTime=(new Date).getTime();c.taskRunTime=0;c.taskRunCount=0;e||(e=!0,d=setInterval(g,a));return c};this.stop=function(a){f(a);return a};this.stopAll=function(){e=!1;clearInterval(d);for(var a=d=0,f=b.length;a<f;a++)if(b[a].onStop)b[a].onStop();b=[];c=[]}};Ext.TaskMgr.stopAll();delete Ext.TaskMgr;delete Ext.TaskManager;Ext.TaskMgr=new Ext.util.TaskRunner(100);Ext.TaskManager=Ext.TaskMgr;Ext.util.JSON.encodeDate=function(a){return a.format('"c"')};var Application=Ext.extend(Ext.util.Observable,{isReady:!1,autoRun:!1,constructor:function(a){Ext.apply(this,a);this.addEvents({ready:!0,beforeunload:!0,beforeinit:!0,rolechanged:!0,rpcerror:!0});Ext.onReady(this.initApp,this)},initApp:function(){Ext.QuickTips.init();this.init();Ext.EventManager.on(window,"beforeunload",this.onUnload,this);this.isReady=!0;this.fireEvent("ready",this)},init:function(){Ext.BLANK_IMAGE_URL="/css/images/default/s.gif";var a=window.location.href.split(/\/+/g);this.baseUrl=
a[0]+"//"+a[1];this.stateDomain=a[1];this.appUrl=window.location.href;this.fireEvent("beforeinit",this);this.initAjax();this.initViewport();this.initControllers();this.initModels();this.initComponents();this.initRouter();this.initDispatcher();this.initHistory();this.initAcl();this.initIdentity();this.autoRun&&this.run()},initControllers:function(){Ext.isArray(this.controllers)||(this.controllers={});for(var a in Application.controllers)if(a&&"Abstract"!=a)for(var b in Application.controllers[a])if(b&&
"Abstract"!=b){var c=b.match(/(\w+)Controller/),c=c[1].toLowerCase();this.addController(new Application.controllers[a][b]({app:this}),c,a)}},initModels:function(){Ext.isArray(this.models)||(this.models={});for(var a in Application.models)Ext.apply(Application.models[a],{createStore:function(a){return Ext.apply({xtype:"jsonstore",recordType:this,root:null,idProperty:"id"},a||{})}.createDelegate(Application.models[a],[],!0),createOne:function(a){a={success:!0,data:[a]};var c=this.dataReader||new Ext.data.JsonReader({idProperty:"id",
root:"data",successProperty:"success"},this),d=null;this.dataReader||(this.dataReader=c);c.buildExtractors();d=c.readRecords(a);return d.success?d.records[0]:!1}.createDelegate(Application.models[a],[],!0)})},initComponents:function(){Ext.isArray(this.components)||(this.components={});for(var a in Application.components)Ext.reg("Application.components."+a,Application.components[a]),Ext.ClassManager&&Ext.ClassManager.setAlias("Application.components."+a,"widget.Application.components."+a)},addController:function(a,
b,c){b||(b=a.getName());c||(c="defaultModule");this.controllers[c]||(this.controllers[c]={});this.controllers[c][b]=a},initRouter:function(){this.router=new Application.Router({app:this});this.route=this.router.route.createDelegate(this.router,[],!0)},initDispatcher:function(){this.dispatcher=new Application.Dispatcher({app:this})},initHistory:function(){window.HistoryManager?(this.historyManager=HistoryManager,this.historyManager.addEvent("change",this.dispatcher.dispatch.createDelegate(this.dispatcher))):
(Ext.getBody().createChild({tag:"form",action:"#",cls:"x-hidden",id:Ext.id(),children:[{tag:"div",children:[{tag:"input",id:Ext.History.fieldId,type:"hidden"},{tag:"iframe",id:Ext.History.iframeId}]}]}),Ext.History.init(),this.historyManager=Ext.History,this.historyManager.on("change",this.dispatcher.dispatch,this.dispatcher))},initAcl:function(){this.acl=new Application.Acl},initIdentity:function(){var a;a=window.ssw?new Ext.ux.state.SSWProvider:Ext.ux.state.WebStorageProvider&&Ext.ux.state.WebStorageProvider.isSupported()?
new Ext.ux.state.WebStorageProvider:new Ext.state.CookieProvider({expires:new Date((new Date).getTime()+6048E5),domain:this.stateDomain});Ext.state.Manager.setProvider(a);this.sessionManager=Ext.state.Manager;this.auth=new Application.Identity({sessionManager:this.sessionManager})},initAjax:function(){this.serverUrl="";Ext.Ajax.on("requestcomplete",function(a,b,c){try{b.responseJSON=Ext.util.JSON.decode(b.responseText)}catch(d){b.responseJSON=!1}})},request:function(a,b,c,d){Ext.Ajax.request({url:d||
this.serverUrl,params:a,disableCaching:!0,method:"POST",scope:c||this,success:function(a){var d=!0;a.responseJSON&&!a.responseJSON.success&&(d=!1);b.call(c||this,d,a.responseJSON)},failure:b.createDelegate(c||this,[!1,{success:!1,errors:[]}])})},log:function(){Ext.isDefined(window.console)&&Ext.isDefined(window.console.firebug)&&Ext.isFunction(window.loadFirebugConsole)&&Ext.isFunction(console.log)&&console.log.apply(console,arguments)},initViewport:function(){this.viewport||(this.viewport=new Ext.Panel({app:this,
unstyled:!0,renderTo:this.renderTo,autoHeight:!0}))},onReady:function(a,b){if(this.isReady)a.call(b,this);else this.on("ready",a,b)},onUnload:function(a){!1===this.fireEvent("beforeunload",this)&&a.stopEvent()},getViewport:function(){this.viewport||this.initViewport();return this.viewport},redirect:function(a){this.historyManager.add(a)},forward:function(a){this.dispatcher.dispatch(a)},run:function(){if(this.isReady)Application.Locale.setLang("en"),this.forward(this.historyManager.getToken());else this.onReady(this.run,
this)},getCurrentLocation:function(){return this.historyManager.getToken()}});Application.controllers={};Application.models={};Application.components={};Application.Acl=Ext.extend(Object,{constructor:function(){Ext.apply(this,{roles:[],resources:[]});this.rulesStore=new Ext.data.JsonStore({fields:["resource","role","action"]});this.redirectsStore=new Ext.data.JsonStore({fields:["resource","role",{name:"params",type:"auto"},"router"]});for(var a in this.controllers)for(var b in this.controllers[a]){var c=null;Ext.isFunction(App.controllers[a][b])&&(c=/(\w+)Action/.exec(b))&&this.add(new Application.Acl.Resource(String.format("{0}/{1}",a,c[1]),{isAction:!0,
controller:a,action:c[1]}))}},add:function(a){this.resources.push(a)},addRole:function(a){this.roles.push(a)},findRole:function(a){return Application.Utils.arraySearch(this.roles,function(b){return b.name==a},this)},findResource:function(a){return Application.Utils.arraySearch(this.resources,function(b){return b.name==a},this)},setErrorRedirect:function(a,b,c,d){var e=this.redirectsStore.findBy(function(c){return c.data.resource==(b?b:"")&&c.data.role==(a?a:"")});0<=e?(e=this.redirectsStore.getAt(e),
e.set("params",c?c:{}),e.set("route",d?d:"default")):this.redirectsStore.add(new this.redirectsStore.recordType({resource:b?b:"",role:a?a:"",params:c?c:{},route:d?d:"default"}))},getErrorRedirect:function(a,b,c){var d=this.findRole(a),d=d?d.baseRole:null,e=function(a,b){a||(a="");b||(b="");var c=this.redirectsStore.findBy(function(c){return c.get("resource")==b&&c.get("role")==a});return-1!=c?this.redirectsStore.getAt(c):!1}.createDelegate(this,[],!0),f=function(a){c||(c=Main.app);return c.route(a.get("params"),
a.get("router"))},g=null,g=e(a,b);!g&&d&&(g=e(d,b));if(g)return f(g);g=e(a);!g&&d&&(g=e(d));return g?f(g):(g=e())?f(g):""},hasAccess:function(a,b){var c=this.findRole(a),c=c?c.baseRole:null,d=function(a,b){a||(a="");b||(b="");var c=this.rulesStore.findBy(function(c){return c.get("resource")==b&&c.get("role")==a});return-1!=c?this.rulesStore.getAt(c):!1}.createDelegate(this,[],!0),e=null,e=d(a,b);!e&&c&&(e=d(c,b));if(e)return"allow"==e.get("action");e=d(a);!e&&c&&(e=d(c));return e?"allow"==e.get("action"):
(e=d())?"allow"==e.get("action"):!0},allow:function(a,b){this.rulesStore.add(new this.rulesStore.recordType({resource:b?b:"",role:a?a:"",action:"allow"}))},deny:function(a,b){this.rulesStore.add(new this.rulesStore.recordType({resource:b?b:"",role:a?a:"",action:"deny"}))}});Application.Acl.Resource=Ext.extend(Object,{constructor:function(a,b){this.name=a;b&&Ext.apply(this,b)}});Application.Acl.Role=Ext.extend(Object,{constructor:function(a,b){this.name=a;this.baseRole=b}});Application.Dispatcher=Ext.extend(Ext.util.Observable,{constructor:function(a){Ext.apply(this,a);Application.Dispatcher.superclass.constructor.call(this,a)},dispatch:function(a){a=this.app.router.parse(a);var b="defaultModule";a.module&&(b=a.module+"Module");this.app.controllers[b]||(b="defaultModule",a.action=a.controller,a.controller=a.module,a.module="default");if(a&&""!=b&&a.controller&&a.action&&this.app.controllers[b][a.controller]){var c=this.app.auth.data.role,d=String.format("{0}/{1}",a.controller,
a.action);"defaultModule"!=b&&(d=String.format("{0}/{1}/{2}",a.module,a.controller,a.action));this.app.acl.hasAccess(c,d)?(Ext.each(Main.ajaxPull,function(a){Ext.Ajax.abort(a)}),Main.ajaxPull=[],this.app.controllers[b][a.controller].dispatch(a.action,a,this.lastResource===d),this.lastResource=d):this.app.forward(this.app.acl.getErrorRedirect(c,d,this.app))}}});Application.Identity=Ext.extend(Ext.util.Observable,{loggedIn:!1,data:{role:"guest",login:null},constructor:function(a){Ext.apply(this,a);Application.Identity.superclass.constructor.call(this,a);this.sm=this.sessionManager;this.setData({role:this.sm.get("role","guest"),login:this.sm.get("login","guest")});this.loggedIn="guest"!=this.data.role;this.updateMenu()},setData:function(a){Ext.apply(this.data,a);for(var b in this.data)this.sm.set(b,this.data[b])},login:function(a){this.clearSsw();this.setData(Ext.apply(a,
{role:"user"}));this.loggedIn=!0;this.updateMenu()},logout:function(){this.clearSsw();this.setData({role:"guest",login:"guest"});this.loggedIn=!1;this.updateMenu()},getLogged:function(){return this.loggedIn},setLogged:function(a){this.loggedIn=a},getRole:function(){return this.data.role},updateMenu:function(){Main.layout.root.fireEvent("rolechanged",this.data,Application)},clearSsw:function(){if("undefined"!==typeof localStorage.ssw){var a=JSON.parse(localStorage.ssw),b;for(b in a)"login_username"!==
b&&this.sm.getProvider().set(b,"")}}});Application.Locale={lang:"ru",localizableProps:"qtip text html title header fieldLabel".split(" "),localeData:{en:{}},setLang:function(a){this.lang=a},translate:function(a,b){return this.localeData[this.lang]&&this.localeData[this.lang][b]&&-1!=this.localizableProps.indexOf(a)?this.localeData[this.lang][b]:b}};window.__=function(a){return Application.Locale.translate("text",a)};Application.Router=Ext.extend(Ext.util.Observable,{routes:{},constructor:function(a){Ext.apply(this,a);Application.Router.superclass.constructor.call(this,a);this.initRoutes()},initRoutes:function(){this.addRoute(new Application.Router.Route("default",":controller/:action/*",{module:"default",controller:"\\w*",action:"\\w*"},"low"));this.addRoute(new Application.Router.Route("index","",{module:"default",controller:"front",action:"index"},"low"));this.addRoute(new Application.Router.Route("default-nocontroller",
":action/*",{module:"default",controller:"front",action:"\\w*"},"low"))},addRoute:function(a){this.routes[a.getName()]=a},parse:function(a){var b=!1,c=function(c){for(var e in this.routes)if(this.routes[e].priority==c&&(b=this.routes[e].parse(a)),b)break}.createDelegate(this,[],!0);c("high");b||c("low");return b},route:function(a,b){b||(b="default");return this.routes[b]?this.routes[b].route(a):""}});Application.Router.Route=Ext.extend(Object,{constructor:function(a,b,c,d){this.name=a;this.path=b;this.params=c;this.priority=d||"high"},getName:function(){return this.name},parse:function(a){var b={},c=this.path,d,e={},f=0,g=null,g=null;for(d in this.params)-1!=this.path.indexOf(":"+d)&&(f++,e[d]=f,c=c.replace(":"+d,String.format("({0})",this.params[d])));c="^"+c.replace("/*","(.*)")+"$";if(g=RegExp(c).exec(a)){Ext.apply(b,this.params);for(d in e)b[d]=g[e[d]];if(g[f+1]&&(g=g[f+1].replace(/^\//,"").replace(/\/$/,
"").split("/")))for(f=c=0,c=Math.floor(g.length/2);f<c;f++)b[g[2*f]]=g[2*f+1];if(!Application.controllers[b.module+"Module"])return this.parse("default/"+a);b.controller&&"null"!=b.controller||(b.controller="front");b.action&&"null"!=b.action||(b.action="index");return b}return!1},route:function(a){var b=this.path,c=[],d;for(d in this.params)a[d]&&(b=b.replace(":"+d,a[d]));for(d in a)this.params[d]||c.push(d+"/"+a[d]);return b=b.replace("/*",0==c.length?"":"/"+c.join("/"))}});Application.Utils={arraySearch:function(a,b,c){var d=null;Ext.each(a,function(a,c,g){b.createDelegate(this,[a,c,g]).call()&&(d=a)},c);return d}};Application.controllers.Abstract=Ext.extend(Ext.util.Observable,{constructor:function(a){this.addEvents("postdispatch");this.addEvents("afteraction");Ext.apply(this,a);Application.controllers.Abstract.superclass.constructor.call(this,a)},dispatch:function(a,b,c){if(Ext.isFunction(this[a+"Action"])){var d=this.app,e=this.app.getViewport(),f=!1;if(c){var g=e.getComponent(0);g&&g.sameResourceActivationBypass&&(f=!0)}f||e.removeAll();this.fireEvent("postdispatch",a,b);f?g.fireEvent("paramschanged",b):
this[a+"Action"].call(this,b,d,e);this.fireEvent("afteraction",a);f||e.doLayout()}},getName:function(){for(var a in Application.controllers)if(Application.controllers[a]===this.constructor)return a.match(/(\w+)Controller/)[1].toLowerCase();return!1},listeners:{afteraction:function(a){var b=[],c=this.app.getViewport();this.title&&b.push(this.isFunction(this.title)?this.title(a):this.title);(a=c.getComponent(0))&&a.title&&b.push(a.title);a&&a.detailedTitle&&b.push(a.detailedTitle);(a=Ext.getCmp("layout_title_panel"))&&
(0==b.length?a.setTitle("&nbsp;"):a.setTitle(b.join(" :: ")));Main.siteTitle&&b.push(Main.siteTitle);document.title=b.join(" :: ")}},isFunction:function(a){var b={};return a&&"[object Function]"===b.toString.call(a)}});Ext.ns("Ext.ux.grid");
Ext.ux.grid.GridRow=Ext.extend(Ext.util.Observable,{expandOnEnter:!0,expandOnDblClick:!0,header:"",width:20,sortable:!1,fixed:!0,menuDisabled:!0,dataIndex:"",id:"gridrow",lazyRender:!0,enableCaching:!0,actAsTree:!1,treeLeafProperty:"is_leaf",appendRowClass:!0,constructor:function(a){a.id||(a.id=Ext.id());Ext.apply(this,a);Ext.util.CSS.createStyleSheet(".x-"+this.id+"-grid3-row-collapsed .x-grid3-row-expander { background-position:0 0; }.x-"+this.id+"-grid3-row-expanded .x-grid3-row-expander { background-position:-25px 0; }.x-"+this.id+
"-grid3-row-collapsed .x-grid3-row-body { display:none !important; }.x-"+this.id+"-grid3-row-expanded .x-grid3-row-body { display:block !important; }.x-grid-expander-leaf .x-grid3-row-expander { background: none; }",Ext.id());this.expanderClass="x-grid3-row-expander";this.rowExpandedClass="x-"+this.id+"-grid3-row-expanded";this.rowCollapsedClass="x-"+this.id+"-grid3-row-collapsed";this.leafClass="x-grid-expander-leaf";this.addEvents({beforeexpand:!0,expand:!0,beforecollapse:!0,collapse:!0});Ext.ux.grid.GridRow.superclass.constructor.call(this);
this.tpl&&("string"==typeof this.tpl&&(this.tpl=new Ext.Template(this.tpl)),this.tpl.compile());this.state={};this.bodyContent={}},getRowClass:function(a,b,c,d){c.cols-=1;(d=this.bodyContent[a.id])||this.lazyRender||(d=this.getBodyContent(a,b));d&&(c.body=d);b=this.state[a.id]?this.rowExpandedClass:this.rowCollapsedClass;this.actAsTree&&a.get(this.treeLeafProperty)&&(b=this.leafClass);return b},init:function(a){this.grid=a;var b=a.getView();b.getRowClass=this.getRowClass.createDelegate(this);b.enableRowBody=
!0;a.on("render",this.onRender,this);a.on("destroy",this.onDestroy,this);b.on("beforerefresh",this.onBeforeRefresh,this);b.on("refresh",this.onRefresh,this)},onRender:function(){var a=this.grid,b=a.getView().mainBody;b&&b.on("mousedown",this.onMouseDown,this,{delegate:"."+this.expanderClass});this.expandOnEnter&&(this.keyNav=new Ext.KeyNav(this.grid.getGridEl(),{enter:this.onEnter,scope:this}));if(this.expandOnDblClick)a.on("rowdblclick",this.onRowDblClick,this);this.actAsTree&&a.getEl().swallowEvent(["mouseover",
"mouseout","mousedown","click","dblclick"])},onBeforeRefresh:function(){this.grid.getEl().select("."+this.rowExpandedClass).each(function(a){this.collapseRow(a.dom)},this)},onRefresh:function(){this.grid.getEl().select("."+this.rowExpandedClass).each(function(a){Ext.fly(a).replaceClass(this.rowExpandedClass,this.rowCollapsedClass)},this)},onDestroy:function(){this.keyNav.disable();delete this.keyNav;var a=this.grid.getView().mainBody;a&&a.un("mousedown",this.onMouseDown,this)},onRowDblClick:function(a,
b,c){this.toggleRow(b)},onEnter:function(a){a=this.grid;for(var b=a.getSelectionModel().getSelections(),c=0,d=b.length;c<d;c++){var e=a.getStore().indexOf(b[c]);this.toggleRow(e)}},getBodyContent:function(a,b){if(!this.enableCaching)return this.tpl.apply(a.data);var c=this.bodyContent[a.id];c||(c=this.tpl.apply(a.data),this.bodyContent[a.id]=c);return c},onMouseDown:function(a,b){a.stopEvent();var c=a.getTarget(".x-grid3-row");this.toggleRow(c)},renderer:function(a,b,c){b.cellAttr='rowspan="2"';return'<div class="'+
this.expanderClass+'">&#160;</div>'},beforeExpand:function(a,b,c){return!1!==this.fireEvent("beforeexpand",this,a,b,c)?(this.tpl&&this.lazyRender&&(b.innerHTML=this.getBodyContent(a,c)),!0):!1},toggleRow:function(a){"number"==typeof a&&(a=this.grid.view.getRow(a));if(!Ext.fly(a).hasClass(this.leafClass))this[Ext.fly(a).hasClass(this.rowCollapsedClass)?"expandRow":"collapseRow"](a)},expandRow:function(a){"number"==typeof a&&(a=this.grid.view.getRow(a));if(!Ext.fly(a).hasClass(this.leafClass)){var b=
this.grid.store.getAt(a.rowIndex),c=Ext.DomQuery.selectNode("tr:nth(2) div.x-grid3-row-body",a);this.beforeExpand(b,c,a.rowIndex)&&(this.state[b.id]=!0,Ext.fly(a).replaceClass(this.rowCollapsedClass,this.rowExpandedClass),this.fireEvent("expand",this,b,c,a.rowIndex))}},destroyNestedGrids:function(a){if(a&&((childGridEl=a.child(".x-grid-panel"))&&this.destroyNestedGrids(childGridEl),(a=Ext.getCmp(a.id))&&a!=this.grid)){if(a instanceof Ext.grid.EditorGridPanel){for(var b=a.getColumnModel(),c=0,d=b.getColumnCount();c<
d;c++)for(var e=0,f=a.getStore().getCount();e<f;e++)(editor=b.getCellEditor(c,e))&&editor.destroy();b.destroy()}a.destroy()}},collapseRow:function(a){"number"==typeof a&&(a=this.grid.view.getRow(a));if(!Ext.fly(a).hasClass(this.leafClass)){var b=this.grid.store.getAt(a.rowIndex),c=Ext.fly(a).child("tr:nth(1) div.x-grid3-row-body",!0);!1!==this.fireEvent("beforecollapse",this,b,c,a.rowIndex)&&(this.destroyNestedGrids(Ext.get(a).child(".x-grid-panel")),b&&(this.state[b.id]=!1),Ext.fly(a).replaceClass(this.rowExpandedClass,
this.rowCollapsedClass),this.fireEvent("collapse",this,b,c,a.rowIndex))}}});Ext.preg("gridrow",Ext.ux.grid.GridRow);Ext.ns("Ext.ux.grid");
Ext.ux.grid.GroupSummary=Ext.extend(Ext.util.Observable,{constructor:function(a){Ext.apply(this,a);Ext.ux.grid.GroupSummary.superclass.constructor.call(this)},init:function(a){this.grid=a;a=this.view=a.getView();a.doGroupEnd=this.doGroupEnd.createDelegate(this);a.afterMethod("onColumnWidthUpdated",this.doWidth,this);a.afterMethod("onAllColumnWidthsUpdated",this.doAllWidths,this);a.afterMethod("onColumnHiddenUpdated",this.doHidden,this);a.afterMethod("onUpdate",this.doUpdate,this);a.afterMethod("onRemove",
this.doRemove,this);this.rowTpl||(this.rowTpl=new Ext.Template('<div class="x-grid3-summary-row" style="{tstyle}">','<table class="x-grid3-summary-table" border="0" cellspacing="0" cellpadding="0" style="{tstyle}">',"<tbody><tr>{cells}</tr></tbody>","</table></div>"),this.rowTpl.disableFormats=!0);this.rowTpl.compile();this.cellTpl||(this.cellTpl=new Ext.Template('<td class="x-grid3-col x-grid3-cell x-grid3-td-{id} {css}" style="{style}">','<div class="x-grid3-cell-inner x-grid3-col-{id}" unselectable="on">{value}</div>',
"</td>"),this.cellTpl.disableFormats=!0);this.cellTpl.compile()},toggleSummaries:function(a){var b=this.grid.getGridEl();b&&(void 0===a&&(a=b.hasClass("x-grid-hide-summary")),b[a?"removeClass":"addClass"]("x-grid-hide-summary"))},renderSummary:function(a,b){b=b||this.view.getColumnData();for(var c=this.grid.getColumnModel().config,d=[],e,f={},g,k=b.length-1,h=0,l=b.length;h<l;h++){e=b[h];g=c[h];f.id=e.id;f.style=e.style;f.css=0==h?"x-grid3-cell-first ":h==k?"x-grid3-cell-last ":"";f.value=g.summaryType||
g.summaryRenderer?(g.summaryRenderer||e.renderer)(a.data[e.name],f,a):"";if(void 0==f.value||""===f.value)f.value="&#160;";d[d.length]=this.cellTpl.apply(f)}return this.rowTpl.apply({tstyle:"width:"+this.view.getTotalWidth()+";",cells:d.join("")})},calculate:function(a,b){for(var c={},d,e,f=this.grid.getColumnModel().config,g,k=0,h=a.length;k<h;k++){d=a[k];for(var l=0,q=b.length;l<q;l++)e=b[l],g=f[l],g.summaryType&&(c[e.name]=Ext.ux.grid.GroupSummary.Calculations[g.summaryType](c[e.name]||0,d,e.name,
c))}return c},doGroupEnd:function(a,b,c,d,e){b=this.calculate(b.rs,c);a.push("</div>",this.renderSummary({data:b},c),"</div>")},doWidth:function(a,b,c){if(this.isGrouped())for(var d=this.view.getGroups(),e=d.length,f=0,g;f<e;++f)g=d[f].childNodes[2],g.style.width=c,g.firstChild.style.width=c,g.firstChild.rows[0].childNodes[a].style.width=b},doAllWidths:function(a,b){if(this.isGrouped())for(var c=this.view.getGroups(),d=c.length,e=0,f,g,k=a.length;e<d;e++)for(f=c[e].childNodes[2],f.style.width=b,f.firstChild.style.width=
b,g=f.firstChild.rows[0].childNodes,f=0;f<k;f++)g[f].style.width=a[f]},doHidden:function(a,b,c){if(this.isGrouped())for(var d=this.view.getGroups(),e=d.length,f=0,g=b?"none":"";f<e;f++)b=d[f].childNodes[2],b.style.width=c,b.firstChild.style.width=c,b.firstChild.rows[0].childNodes[a].style.display=g},isGrouped:function(){return!Ext.isEmpty(this.grid.getStore().groupField)},refreshSummary:function(a){return this.refreshSummaryById(this.view.getGroupId(a))},getSummaryNode:function(a){return(a=Ext.fly(a,
"_gsummary"))?a.down(".x-grid3-summary-row",!0):null},refreshSummaryById:function(a){var b=Ext.getDom(a);if(!b)return!1;var c=[];this.grid.getStore().each(function(b){b._groupId==a&&(c[c.length]=b)});var d=this.view.getColumnData(),e=this.calculate(c,d),d=this.renderSummary({data:e},d);(e=this.getSummaryNode(a))&&b.removeChild(e);Ext.DomHelper.append(b,d);return!0},doUpdate:function(a,b){this.refreshSummaryById(b._groupId)},doRemove:function(a,b,c,d){d||this.refreshSummaryById(b._groupId)},showSummaryMsg:function(a,
b){var c=this.view.getGroupId(a);if(c=this.getSummaryNode(c))c.innerHTML='<div class="x-grid3-summary-msg">'+b+"</div>"}});Ext.grid.GroupSummary=Ext.ux.grid.GroupSummary;
Ext.ux.grid.GroupSummary.Calculations={sum:function(a,b,c){return a+(b.data[c]||0)},count:function(a,b,c,d){return d[c+"count"]?++d[c+"count"]:d[c+"count"]=1},max:function(a,b,c,d){a=b.data[c];b=void 0===d[c+"max"]?d[c+"max"]=a:d[c+"max"];return a>b?d[c+"max"]=a:b},min:function(a,b,c,d){a=b.data[c];b=void 0===d[c+"min"]?d[c+"min"]=a:d[c+"min"];return a<b?d[c+"min"]=a:b},average:function(a,b,c,d){a=d[c+"count"]?++d[c+"count"]:d[c+"count"]=1;b=d[c+"total"]=(d[c+"total"]||0)+(b.data[c]||0);return 0===
b?0:b/a}};Ext.grid.GroupSummary.Calculations=Ext.ux.grid.GroupSummary.Calculations;
Ext.ux.grid.HybridSummary=Ext.extend(Ext.ux.grid.GroupSummary,{calculate:function(a,b){var c=this.view.getGroupField();return this.getSummaryData(a[0].data[c])||Ext.ux.grid.HybridSummary.superclass.calculate.call(this,a,b)},updateSummaryData:function(a,b,c){var d=this.grid.getStore().reader.jsonData;d.summaryData||(d.summaryData={});d.summaryData[a]=b;c||this.refreshSummary(a)},getSummaryData:function(a){var b=this.grid.getStore().reader,c=b.jsonData,d=b.recordType.prototype.fields;return c&&c.summaryData&&
(a=c.summaryData[a])?b.extractValues(a,d.items,d.length):null}});Ext.grid.HybridSummary=Ext.ux.grid.HybridSummary;Ext.ns("Ext.ux.grid");Ext.ux.grid.RowExpander=function(a){Ext.apply(this,a);this.state={};this.addEvents({beforeexpand:!0,expand:!0,beforecollapse:!0,collapse:!0});Ext.ux.grid.RowExpander.superclass.constructor.call(this)};
Ext.extend(Ext.ux.grid.RowExpander,Ext.util.Observable,{header:"",width:20,sortable:!1,fixed:!0,dataIndex:"",id:"expander",lazyRender:!0,enableCaching:!0,menuDisabled:!0,getRowClass:function(a,b,c,d){c.cols-=1;var e=this.state[a.id]?"x-grid3-row-expanded":"x-grid3-row-collapsed";this.oldGetRowClass&&(e+=" "+this.oldGetRowClass(a,b,c,d));return e},init:function(a){this.grid=a;var b=a.getView();b.getRowClass&&(this.oldGetRowClass=b.getRowClass);b.getRowClass=this.getRowClass.createDelegate(this);b.enableRowBody=
!0;if(!this.ignoreRowUpdates)b.on("rowupdated",function(a,b,e){a=a.getRow(b);Ext.fly(a).hasClass("x-grid3-row-expanded")&&this.expandRow(b)},this);b.on("refresh",function(a){a=this.grid.getView().getRows();for(var b=0;b<a.length;b++)Ext.fly(a[b]).hasClass("x-grid3-row-expanded")&&this.expandRow(a[b].rowIndex)},this);a.on("render",function(){b.mainBody.on("mousedown",this.onMouseDown,this)},this);this.store=this.store?this.store:this.grid.store},onMouseDown:function(a,b){if("x-grid3-row-expander"==
b.className){a.stopEvent();var c=a.getTarget(".x-grid3-row");this.toggleRow(c)}},renderer:function(a,b,c){b.cellAttr+='rowspan="2" unselectable="on" ';b.css+="x-unselectable ";a=!1;this.hideExpander&&(a=this.hideExpander(c));return a?"":'<div class="x-grid3-row-expander">&#160;</div>'},beforeExpand:function(a,b,c){var d=!0;!1!==this.fireEvent("beforeexpand",this.grid,a,c)?""!=b.innerHTML&&this.enableCaching||this.createExpandingRowPanel(a,b,c):d=!1;return d},toggleRow:function(a){"number"==typeof a&&
(a=this.grid.view.getRow(a));this[Ext.fly(a).hasClass("x-grid3-row-collapsed")?"expandRow":"collapseRow"](a)},expandRow:function(a){"number"==typeof a&&(a=this.grid.view.getRow(a));var b=this.store.getAt(a.rowIndex),c=Ext.DomQuery.selectNode("tr:nth(2) div.x-grid3-row-body",a);this.beforeExpand(b,c,a.rowIndex)&&(this.state[b.id]=!0,Ext.fly(a).replaceClass("x-grid3-row-collapsed","x-grid3-row-expanded"),this.fireEvent("expand",this.grid,b,a.rowIndex))},collapseRow:function(a){"number"==typeof a&&(a=
this.grid.view.getRow(a));var b=this.store.getAt(a.rowIndex),c=Ext.fly(a).child("tr:nth(1) div.x-grid3-row-body",!0);!1!==this.fireEvent("beforecollapse",this,b,c,a.rowIndex)&&(this.state[b.id]=!1,Ext.fly(a).replaceClass("x-grid3-row-expanded","x-grid3-row-collapsed"),this.fireEvent("collapse",this,b,c,a.rowIndex))},expandAll:function(){for(var a=this.grid.getView().getRows(),b=0;b<a.length;b++)this.expandRow(a[b])},collapseAll:function(){for(var a=this.grid.getView().getRows(),b=0;b<a.length;b++)this.collapseRow(a[b])},
createExpandingRowPanel:function(a,b,c){var d=a.id;this.expandingRowPanel||(this.expandingRowPanel=[],this.expandingRowPanelItems=[]);this.expandingRowPanel[d]&&(Ext.get(this.expandingRowPanel[d].id)?Ext.destroy(this.expandingRowPanel[d]):delete this.expandingRowPanel[d]);this.expandingRowPanelItems[d]&&this.enableCaching||(this.expandingRowPanelItems[d]=this.createExpandingRowPanelItems(this.grid,this.store,a,c));this.expandingRowPanel[d]=new Ext.Panel({layout:"anchor",border:!1,bodyBorder:!1,hideBorders:!0,
frame:!1,width:"auto",cls:"cleanbackground",bodyCssClass:"cleanbackground",renderTo:b,deferredRender:!0,defaults:{anchor:"100%"},items:this.expandingRowPanelItems[d]})}});Ext.reg("rowexpander",Ext.ux.grid.RowExpander);Ext.ns("Ext.ux.plugins");
Ext.ux.plugins.Clipboard={init:function(a){var b=this.getBackend();b&&b.init&&b.init(a,function(){var c=a.clipboardText;b&&b.copy&&b.copy.call(a,c,arguments)});a.addEvents("copiedtoclipboard");a.on("copiedtoclipboard",this.onCopied)},onCopied:function(){this.setIconClass&&this.setIconClass("icon-silk-tick")},getBackend:function(){for(var a=0;a<this.backends.length;a++)if(this.backends[a]&&this.backends[a].isSupported&&this.backends[a].isSupported())return this.backends[a];return null},backends:[{isSupported:function(){return window.clipboardData&&
clipboardData.setData},init:function(a,b){a.on("click",b,a)},copy:function(a){clipboardData.setData("Text",a)&&this.fireEvent("copiedtoclipboard",this);return!0}},{isSupported:function(){return window.ZeroClipboard},init:function(a,b){a.disable();a.on("render",function(){function c(b,c){a.fireEvent("copiedtoclipboard",a,c.text)}function d(){b(f);a.enable()}if(window.ZeroClipboard&&this.getEl()){var e=this.getEl();if(e&&e.dom){var f=new ZeroClipboard(e.dom,{moviePath:"/resources/ZeroClipboard.swf",
useNoCache:!1,hoverClass:"x-btn-over",activeClass:"x-btn-click"});f.on("complete",c);a.on("destroy",function(){f.off("complete",c)});if(f.ready())d();else f.on("load",d)}}},a,{single:!0})},copy:function(a,b){b[0].setText(a)}},{isSupported:function(){return window.netscape&&window.Components&&Components.classes&&Components.classes["@mozilla.org/widget/clipboard;[[[[1]]]]"]},init:function(a,b){a.on("click",b,a)},copy:function(a){try{var b=Components.classes["@mozilla.org/widget/clipboard;[[[[1]]]]"].createInstance(Components.interfaces.nsIClipboard);
if(!b)return!1;var c=Components.classes["@mozilla.org/widget/transferable;[[[[1]]]]"].createInstance(Components.interfaces.nsITransferable);if(!c)return!1;c.addDataFlavor("text/unicode");var d={},d=Components.classes["@mozilla.org/supports-string;[[[[1]]]]"].createInstance(Components.interfaces.nsISupportsString);d.data=a;c.setTransferData("text/unicode",d,2*a.length);if(!b)return!1;b.setData(c,null,Components.interfaces.nsIClipboard.kGlobalClipboard);this.fireEvent("copiedtoclipboard",this);return!0}catch(e){}return!1}},
{isSupported:function(){return!0},init:function(a){a.disable()},copy:Ext.emptyFn}]};Ext.ns("Ext.ux.plugins");
Ext.ux.plugins.ToolTip={init:function(a){var b=function(a,b){var c=b||{};c.autoHeight=!0;c.target=a;c.enabled=!0;c.applyTipTo||(c.applyTipTo="field");"label"==c.applyTipTo&&(c.anchor="right");return c},c=function(){var a=null,b=null;(a=this.getEl().up("div.x-form-element"))&&(b=a.child("label"));if(b)return b;(a=this.getEl().up("div.x-form-item"))&&(b=a.child("label"));return b?b:null},d=function(a){var d=c.call(a);d&&(d=d.createChild({tag:"img",src:"/ico/help.png",style:"margin-bottom: 0px; margin-left: 5px; padding: 0px;",width:14}),
new Ext.ToolTip(b(d,a.qtipConfig)))};a.on("afterrender",function(){if(this.qtipConfig)switch(this.qtipConfig.applyTipTo){case "field":new Ext.ToolTip(b(this.getEl(),this.qtipConfig));break;case "label":d(this);break;default:new Ext.ToolTip(b(this.getEl(),this.qtipConfig)),d(this)}})}};Ext.ns("Ext.ux.plugins");
Ext.ux.plugins.Stateful={init:function(a){var b=!1;if(a.name){var c=["select","change","blur","beforedestroy","statechanged"];a.stateData={};a.getColumnModel&&(c.push("resize","columnmove","hiddenchange","columnresize"),a.relayEvents(a.getColumnModel(),["hiddenchange"]));a.getStore&&(a.addEvents(["storeloaded"]),c.push("storeloaded"),a.getStore().on("load",function(b,c,f){f&&f.params&&(a.stateData.storeOptions={params:f.params,sort:b.getSortState()},a.fireEvent("storeloaded"))}));a.getView&&(b=!0,
c.push("mousedown"));Ext.apply(a,{stateful:!0,stateId:(a.statePrefix?a.statePrefix+"_":"")+a.name+(a.stateSuffix?"_"+a.stateSuffix:""),stateEvents:c,getState:this.getState,applyState:this.applyState,_getToolbarsState:this._getToolbarsState});b&&(b=null,a.header||a.title?b=a:a.outerPanel&&(a.outerPanel.header||a.outerPanel.title)&&(b=a.outerPanel),b.tools=b.tools||[],b.tools.push({id:"refresh",handler:this.clearState,scope:a,qtip:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f (\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0432 \u0441\u043b\u0443\u0447\u0430\u0435, \u0435\u0441\u043b\u0438 \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u0432\u0438\u0434 \u043a \u0438\u0437\u043d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u043c\u0443)"}));
a.on("beforestatesave",this.onBeforeStateSave)}},getState:function(){if(this.stateClear)return null;var a={savedAt:(new Date).getTime()};this.getValue?a.value=this.getValue():this.getValues&&(a.value=this.getValues());this.getColumnModel&&(a.columns=[],this.getColumnModel().getColumnsBy(function(b){b&&a.columns.push({hidden:!!b.hidden,width:b.width,id:b.id})}));if(this.getView){var b=this.getView().scroller;a.scroll=b?b.getScroll():void 0}this.stateData.storeOptions&&(a.store=this.stateData.storeOptions);
this._getToolbarsState(a);return a},_getToolbarsState:function(a){if(this.getTopToolbar){var b=this.getTopToolbar();b&&b.getValues&&(a.toolbars={},a.toolbars[b.name||b.xtype]=b.getValues())}},applyState:function(a){if(a){var b,c=(new Date).getTime();if(!(a.savedAt&&a.savedAt+864E5<c)){this.onRestoreState=!0;a.value&&(this.value=a.value,this.setValue?this.setValue(this.value):this.setValues&&this.setValues(this.value));if(a.columns&&a.columns.length&&this.getColumnModel){var d=this.getColumnModel(),
e=-1;this.suspendEvents(!1);var f=[],c=[];d.getColumnsBy(function(b){e++;if(b)for(var c=0;c<a.columns.length;c++)if(a.columns[c].id==b.id){f[c]=e;d.setColumnWidth(e,a.columns[c].width);d.setHidden(e,a.columns[c].hidden);break}});for(b=0;b<f.length;b++)c[b]=b;for(b=0;b<f.length;b++)if(f[b]!=c[b]){for(var g=!1,k=b;k<c.length;k++)if(c[k]==f[b]){g=k;break}if(!g)break;for(k=b+1;k<=g;k++)c[k]=c[k-1];c[b]=f[b];d.moveColumn(g,b)}this.resumeEvents()}a.toolbars&&this.getTopToolbar&&(c=this.getTopToolbar())&&
c.setValues&&a.toolbars[c.name||c.xtype]&&c.setValues(a.toolbars[c.name||c.xtype]);if(this.getStore&&a.store){c=this.getStore();if(a.store.params)for(b in a.store.params)a.store.params.hasOwnProperty(b)&&c.setBaseParam(b,a.store.params[b]);a.store.sort&&(c.sortInfo=a.store.sort)}if(a.scroll&&this.getView){var h=function(){var b=this.getView().scroller;b&&(b.scrollTo("top",a.scroll.top),b.scrollTo("left",a.scroll.left))};if(this.getStore)this.getStore().on("load",function(){h.defer(100,this)},this,
{single:!0});else h.defer(100,this)}this.onRestoreState=!1}}},onBeforeStateSave:function(a){return a.onRestoreState?!1:!0},clearState:function(){this.stateClear=!0;this.on("statesave",function(){Ext.defer(function(){window.location.reload()},500)});this.fireEvent("statechanged",this)}};Ext.ns("Ext.ux.grid");
Ext.ux.grid.TextActionColumn=Ext.extend(Ext.grid.Column,{header:"&#160;",actionIdRe:/x-action-col-(\d+)/,altText:"",constructor:function(a){var b=a.items||(this.items=[this]),c=a.hiddenItem||!1,d=b.length,e,f;Ext.ux.grid.TextActionColumn.superclass.constructor.call(this,a);this.renderer=function(g,k){var h,l,q=[],s,r;g=Ext.isFunction(a.renderer)?a.renderer.apply(this,arguments)||"":"";k.css+=" x-action-col-cell x-unselectable ";k.attr='unselectable="on"';for(e=0;e<d;e++)if(f=b[e],h="item"===f.scope?
f:f.scope||this.scope||this,l=Ext.isFunction(c)?c.apply(h,arguments):c,!l&&(l=Ext.isFunction(f.isHidden)?f.isHidden.apply(h,arguments):f.isHidden,void 0===l&&void 0!==f.isShown&&(l=Ext.isFunction(f.isShown)?!f.isShown.apply(h,arguments):!f.isShown),!l)){l=f.href&&Ext.isFunction(f.href)?f.href.apply(h,arguments):f.href;r=f.text&&Ext.isFunction(f.text)?f.text.apply(h,arguments):void 0!==f.text?f.text||"":f.text||l||"";void 0===f.tooltip&&f.text?f.tooltip=r:f.tooltip&&Ext.isFunction(f.tooltip)&&(f.tooltip=
f.tooltip.apply(h,arguments));var m=[];f.newWindow&&m.push('target="_blank"');m=0<m.length?" "+m.join(" "):"";s="x-action-col-"+String(e);l='<a href="'+(l||"javascript:;")+'" class="'+s+" "+(f.cls||"")+" x-action-col-text "+(Ext.isFunction(f.getClass)?f.getClass.apply(h,arguments):"")+'"'+(f.tooltip?' ext:qtip="'+f.tooltip+'"':"")+m+">";h="";f.icon&&(h='<img alt="'+(f.altText||f.tooltip||"")+'" src="'+f.icon+'"'+(f.tooltip?' ext:qtip="'+f.tooltip+'"':"")+' class="'+s+" x-action-col-icon "+(f.iconCls||
"")+'" /></a>');r?(h&&(l=l+h+"&nbsp;"+l),l+=r,l+="</a>"):l=h?l+h+"</a>":"";q.push(l)}return g+=q.join(a.actionsSeparator||" | ")}},destroy:function(){delete this.items;delete this.renderer;return Ext.ux.grid.TextActionColumn.superclass.destroy.apply(this,arguments)},processEvent:function(a,b,c,d,e){var f=b.getTarget().className.match(this.actionIdRe),g,k;if(f&&(g=this.items[parseInt(f[1],10)]))if("click"==a)f="item"===g.scope?g:g.scope||this.scope||this,(k=g.handler||this.handler)&&k.call(f,c,d,e,
g,b);else if("mousedown"==a&&!1!==g.stopSelection)return!1;return Ext.ux.grid.TextActionColumn.superclass.processEvent.apply(this,arguments)}});Ext.preg("textactioncolumn",Ext.ux.grid.TextActionColumn);Ext.grid.TextActionColumn=Ext.ux.grid.TextActionColumn;Ext.grid.Column.types.textactioncolumn=Ext.ux.grid.TextActionColumn;Ext.ns("Ext.ux.plugins");
Ext.ux.plugins.GridMenu={init:function(a){a.menuItems&&(Ext.isArray(a.menuItems)||(a.menuItems=[a.menuItems]),function(b){for(var c=b.length-1;0<=c;c--)b[c].handler&&(b[c].handler=function(b){return function(c,f){b(c,f,a.currentRow,a)}}(b[c].handler))}(a.menuItems),a.on("rowcontextmenu",function(a,c,d){d.preventDefault();a.ctxMenu||(a.ctxMenu=new Ext.menu.Menu({items:a.menuItems}));a.currentRow=a.getStore().getAt(c);a.fireEvent("beforecontextmenu",a,a.ctxMenu,a.currentRow,c)&&a.ctxMenu.showAt(d.getXY())}),
a.on("destroy",function(a){a.ctxMenu&&(a.ctxMenu.hide(),a.ctxMenu.destroy(),delete a.ctxMenu);a.currentRow&&delete a.currentRow}))}};/*
     http://www.gnu.org/licenses/agpl.html AGPL Version 3
 @author      Cornelius Weiss <c.weiss@metaways.de>
 @copyright   Copyright (c) 2009 Metaways Infosystems GmbH (http://www.metaways.de)
 @version     $Id: ZendFrameworkProvider.js 15722 2010-08-06 13:30:39Z c.weiss@metaways.de $
   Copyright (c) 2009 Metaways Infosystems GmbH (http://www.metaways.de)

 Ext.Direct provider for seamless integration with Zend_Json_Server

  Ext.Direct.addProvider(Ext.apply(Ext.app.JSONRPC_API, {
        'type'     : 'zfprovider',
        'url'      : Ext.app.JSONRPC_API
    }));

*/
Ext.ns("Ext.ux","Ext.ux.direct");Ext.ux.DataViewTransition=Ext.extend(Object,{defaults:{duration:750,idProperty:"id"},constructor:function(a){Ext.apply(this,a||{},this.defaults)},init:function(a){this.dataview=a;var b=this.idProperty;a.blockRefresh=!0;a.updateIndexes=a.updateIndexes.createSequence(function(){this.getTemplateTarget().select(this.itemSelector).each(function(d,e,f){d.id=d.dom.id=String.format("{0}-{1}",a.id,c.getAt(f).get(b))},this)},a);this.dataviewID=a.id;this.cachedStoreData={};var c=a.store;this.cacheStoreData(c);
c.on("load",this.cacheStoreData,this);c.on("datachanged",function(c){var e=a.getTemplateTarget(),f=c.getAt(0),g=this.getAdded(c),k=this.getRemoved(c),h=this.getRemaining(c);Ext.apply({},h,g);Ext.each(k,function(a){Ext.fly(this.dataviewID+"-"+a.get(this.idProperty)).fadeOut({remove:!1,duration:G/1E3,useDisplay:!0})},this);if(void 0!=f){var k=e.child("#"+this.dataviewID+"-"+f.get(this.idProperty)),f=c.getCount(),l=k.getMargins("lr")+k.getWidth(),q=k.getMargins("bt")+k.getHeight(),k=e.getWidth(),s=Math.floor(k/
l);Math.ceil(f/s);Math.ceil(this.getExistingCount()/s);e.applyStyles({display:"block",position:"relative"});var r={},m={},p={};Ext.iterate(h,function(a,b){a=b.get(this.idProperty);var c=p[a]=e.child("#"+this.dataviewID+"-"+a);r[a]={top:c.getTop()-e.getTop()-c.getMargins("t")-e.getPadding("t"),left:c.getLeft()-e.getLeft()-c.getMargins("l")-e.getPadding("l")}},this);Ext.iterate(h,function(a,b){var c=r[a],d=p[a];"absolute"!=d.getStyle("position")&&p[a].applyStyles({position:"absolute",left:c.left+"px",
top:c.top+"px",width:d.getWidth(!Ext.isIE||Ext.isStrict),height:d.getHeight(!Ext.isIE||Ext.isStrict)})});var x=0;Ext.iterate(c.data.items,function(a){a=a.get(b);m[a]={top:Math.floor(x/s)*q,left:x%s*l};x++},this);var E=new Date,G=this.duration,I=this.dataviewID,y={run:function(){var a=(new Date-E)/G;if(1<=a){for(var b in m)Ext.fly(I+"-"+b).applyStyles({top:m[b].top+"px",left:m[b].left+"px"});Ext.TaskMgr.stop(y)}else for(b in m)if(h[b]){var c=r[b],d=m[b],e=c.top,f=d.top,c=c.left,d=d.left,g=a*Math.abs(e-
f),k=a*Math.abs(c-d),e=e>f?e-g:e+g,f=c>d?c-k:c+k;Ext.fly(I+"-"+b).applyStyles({top:e+"px",left:f+"px"})}},interval:20,scope:this};Ext.TaskMgr.start(y);Ext.iterate(g,function(a,b){Ext.fly(this.dataviewID+"-"+b.get(this.idProperty)).applyStyles({top:m[a].top+"px",left:m[a].left+"px"}).fadeIn({remove:!1,duration:G/1E3})},this)}this.cacheStoreData(c)},this)},cacheStoreData:function(a){this.cachedStoreData={};a.each(function(a){this.cachedStoreData[a.get(this.idProperty)]=a},this)},getExisting:function(){return this.cachedStoreData},
getExistingCount:function(){var a=0,b=this.getExisting(),c;for(c in b)a++;return a},getAdded:function(a){var b={};a.each(function(a){void 0==this.cachedStoreData[a.get(this.idProperty)]&&(b[a.get(this.idProperty)]=a)},this);return b},getRemoved:function(a){var b=[],c;for(c in this.cachedStoreData)-1==a.findExact(this.idProperty,Number(c))&&b.push(this.cachedStoreData[c]);return b},getRemaining:function(a){var b={};a.each(function(a){void 0!=this.cachedStoreData[a.get(this.idProperty)]&&(b[a.get(this.idProperty)]=
a)},this);return b}});Ext.ns("Ext.ux.grid");Ext.ux.grid.CheckColumn=Ext.extend(Ext.grid.Column,{processEvent:function(a,b,c,d,e){if("mousedown"==a&&!0===c.editable&&!1!==this.editable){var f=c.store.getAt(d);f.set(this.dataIndex,!f.data[this.dataIndex]);return!1}return Ext.grid.ActionColumn.superclass.processEvent.apply(this,arguments)},renderer:function(a,b,c){b.css+=" x-grid3-check-col-td";return String.format('<div class="x-grid3-check-col{0}">&#160;</div>',a?"-on":"")},init:Ext.emptyFn});Ext.preg("checkcolumn",Ext.ux.grid.CheckColumn);
Ext.grid.CheckColumn=Ext.ux.grid.CheckColumn;Ext.grid.Column.types.checkcolumn=Ext.ux.grid.CheckColumn;Ext.ns("Ext.ux.grid");
Ext.ux.grid.RowEditor=Ext.extend(Ext.Panel,{floating:!0,shadow:!1,layout:"hbox",cls:"x-small-editor",buttonAlign:"center",baseCls:"x-row-editor",elements:"header,footer,body",frameWidth:5,buttonPad:3,clicksToEdit:"auto",monitorValid:!0,focusDelay:250,errorSummary:!0,saveText:"Save",cancelText:"Cancel",commitChangesText:"You need to commit or cancel your changes",errorText:"Errors",defaults:{normalWidth:!0},initComponent:function(){Ext.ux.grid.RowEditor.superclass.initComponent.call(this);this.addEvents("beforeedit",
"canceledit","validateedit","afteredit")},init:function(a){this.ownerCt=this.grid=a;if(2===this.clicksToEdit)a.on("rowdblclick",this.onRowDblClick,this);else if(a.on("rowclick",this.onRowClick,this),Ext.isIE)a.on("rowdblclick",this.onRowDblClick,this);a.getStore().on("remove",function(){this.stopEditing(!1)},this);a.on({scope:this,keydown:this.onGridKey,columnresize:this.verifyLayout,columnmove:this.refreshFields,reconfigure:this.refreshFields,beforedestroy:this.beforedestroy,destroy:this.destroy,
bodyscroll:{buffer:250,fn:this.positionButtons}});a.getColumnModel().on("hiddenchange",this.verifyLayout,this,{delay:1});a.getView().on("refresh",this.stopEditing.createDelegate(this,[]))},beforedestroy:function(){this.stopMonitoring();this.grid.getStore().un("remove",this.onStoreRemove,this);this.stopEditing(!1);Ext.destroy(this.btns,this.tooltip)},refreshFields:function(){this.initFields();this.verifyLayout()},isDirty:function(){var a;this.items.each(function(b){if(String(this.values[b.id])!==String(b.getValue()))return a=
!0,!1},this);return a},startEditing:function(a,b){if(this.editing&&this.isDirty())this.showTooltip(this.commitChangesText);else if(Ext.isObject(a)&&(a=this.grid.getStore().indexOf(a)),!1!==this.fireEvent("beforeedit",this,a)){this.editing=!0;var c=this.grid,d=c.getView(),e=d.getRow(a),f=c.store.getAt(a);this.record=f;this.rowIndex=a;this.values={};this.rendered||this.render(d.getEditorParent());d=Ext.fly(e).getWidth();this.setSize(d);this.initialized||this.initFields();for(var c=c.getColumnModel(),
d=this.items.items,g,k,h=0,l=c.getColumnCount();h<l;h++)k=this.preEditValue(f,c.getDataIndex(h)),g=d[h],g.setValue(k),g.setDisabled(!c.isCellEditable(h,a)),this.values[g.id]=Ext.isEmpty(k)?"":k;this.verifyLayout(!0);this.isVisible()?this.el.setXY(Ext.fly(e).getXY(),{duration:0.15}):this.setPagePosition(Ext.fly(e).getXY());this.isVisible()||this.show().doLayout();!1!==b&&this.doFocus.defer(this.focusDelay,this)}},stopEditing:function(a){this.editing=!1;if(this.isVisible())if(!1!==a&&this.isValid()){a=
{};for(var b=this.record,c=!1,d=this.grid.colModel,e=this.items.items,f=0,g=d.getColumnCount();f<g;f++)if(!d.isHidden(f)){var k=d.getDataIndex(f);if(!Ext.isEmpty(k)){var h=b.data[k],l=this.postEditValue(e[f].getValue(),h,b,k);String(h)!==String(l)&&(a[k]=l,c=!0)}}c&&!1!==this.fireEvent("validateedit",this,a,b,this.rowIndex)?(b.beginEdit(),Ext.iterate(a,function(a,c){b.set(a,c)}),b.endEdit(),this.fireEvent("afteredit",this,a,b,this.rowIndex)):this.fireEvent("canceledit",this,!1);this.hide()}else this.hide(),
this.fireEvent("canceledit",this,!1===a)},verifyLayout:function(a){if(this.el&&(this.isVisible()||!0===a)){a=this.grid.getView().getRow(this.rowIndex);this.setSize(Ext.fly(a).getWidth(),Ext.isIE?Ext.fly(a).getHeight()+9:void 0);a=this.grid.colModel;for(var b=this.items.items,c=0,d=a.getColumnCount();c<d;c++)if(a.isHidden(c))b[c].hide();else{var e=0,e=c===d-1?e+3:e+1;b[c].show();b[c].setWidth(a.getColumnWidth(c)-e)}this.doLayout();this.positionButtons()}},slideHide:function(){this.hide()},initFields:function(){var a=
this.grid.getColumnModel(),b=Ext.layout.ContainerLayout.prototype.parseMargins;this.removeAll(!1);for(var c=0,d=a.getColumnCount();c<d;c++){var e=a.getColumnAt(c),f=e.getEditor();f||(f=e.displayEditor||new Ext.form.DisplayField);f.margins=0==c?b("0 1 2 1"):c==d-1?b("0 0 2 1"):Ext.isIE?b("0 0 2 0"):b("0 1 2 0");f.setWidth(a.getColumnWidth(c));f.column=e;f.ownerCt!==this&&(f.on("focus",this.ensureVisible,this),f.on("specialkey",this.onKey,this));this.insert(c,f)}this.initialized=!0},onKey:function(a,
b){b.getKey()===b.ENTER&&(this.stopEditing(!0),b.stopPropagation())},onGridKey:function(a){if(a.getKey()===a.ENTER&&!this.isVisible()){var b=this.grid.getSelectionModel().getSelected();b&&(b=this.grid.store.indexOf(b),this.startEditing(b),a.stopPropagation())}},ensureVisible:function(a){this.isVisible()&&this.grid.getView().ensureVisible(this.rowIndex,this.grid.colModel.getIndexById(a.column.id),!0)},onRowClick:function(a,b,c){if("auto"==this.clicksToEdit&&(a=this.lastClickIndex,this.lastClickIndex=
b,a!=b&&!this.isVisible()))return;this.startEditing(b,!1);this.doFocus.defer(this.focusDelay,this,[c.getPoint()])},onRowDblClick:function(a,b,c){this.startEditing(b,!1);this.doFocus.defer(this.focusDelay,this,[c.getPoint()])},onRender:function(){Ext.ux.grid.RowEditor.superclass.onRender.apply(this,arguments);this.el.swallowEvent(["keydown","keyup","keypress"]);this.btns=new Ext.Panel({baseCls:"x-plain",cls:"x-btns",elements:"body",layout:"table",width:2*this.minButtonWidth+2*this.frameWidth+4*this.buttonPad,
items:[{ref:"saveBtn",itemId:"saveBtn",xtype:"button",text:this.saveText,width:this.minButtonWidth,handler:this.stopEditing.createDelegate(this,[!0])},{xtype:"button",text:this.cancelText,width:this.minButtonWidth,handler:this.stopEditing.createDelegate(this,[!1])}]});this.btns.render(this.bwrap)},afterRender:function(){Ext.ux.grid.RowEditor.superclass.afterRender.apply(this,arguments);this.positionButtons();this.monitorValid&&this.startMonitoring()},onShow:function(){this.monitorValid&&this.startMonitoring();
Ext.ux.grid.RowEditor.superclass.onShow.apply(this,arguments)},onHide:function(){Ext.ux.grid.RowEditor.superclass.onHide.apply(this,arguments);this.stopMonitoring();this.grid.getView().focusRow(this.rowIndex)},positionButtons:function(){if(this.btns){var a=this.grid,b=this.el.dom.clientHeight,c=a.getView().scroller.dom.scrollLeft,d=this.btns.getWidth(),a=Math.min(a.getWidth(),a.getColumnModel().getTotalWidth());this.btns.el.shift({left:a/2-d/2+c,top:b-2,stopFx:!0,duration:0.2})}},preEditValue:function(a,
b){var c=a.data[b];return this.autoEncode&&"string"===typeof c?Ext.util.Format.htmlDecode(c):c},postEditValue:function(a,b,c,d){return this.autoEncode&&"string"==typeof a?Ext.util.Format.htmlEncode(a):a},doFocus:function(a){if(this.isVisible()){var b=0,c=this.grid.getColumnModel();a&&(b=this.getTargetColumnIndex(a));for(var b=b||0,d=c.getColumnCount();b<d;b++)if(a=c.getColumnAt(b),!a.hidden&&a.getEditor()){a.getEditor().focus();break}}},getTargetColumnIndex:function(a){var b=this.grid,c=b.view;a=
a.left;for(var b=b.colModel.config,d=0,e=!1,f;f=b[d];d++)if(!f.hidden&&Ext.fly(c.getHeaderCell(d)).getRegion().right>=a){e=d;break}return e},startMonitoring:function(){!this.bound&&this.monitorValid&&(this.bound=!0,Ext.TaskMgr.start({run:this.bindHandler,interval:this.monitorPoll||200,scope:this}))},stopMonitoring:function(){this.bound=!1;this.tooltip&&this.tooltip.hide()},isValid:function(){var a=!0;this.items.each(function(b){if(!b.isValid(!0))return a=!1});return a},bindHandler:function(){if(!this.bound)return!1;
var a=this.isValid();!a&&this.errorSummary&&this.showTooltip(this.getErrorText().join(""));this.btns.saveBtn.setDisabled(!a);this.fireEvent("validation",this,a)},lastVisibleColumn:function(){for(var a=this.items.getCount()-1,b;0<=a;a--)if(b=this.items.items[a],!b.hidden)return b},showTooltip:function(a){var b=this.tooltip;b||(b=this.tooltip=new Ext.ToolTip({maxWidth:600,cls:"errorTip",width:300,title:this.errorText,autoHide:!1,anchor:"left",anchorToTarget:!0,mouseOffset:[40,0]}));var c=this.grid.getView(),
d=parseInt(this.el.dom.style.top,10),c=c.scroller.dom.scrollTop,e=this.el.getHeight();d+e>=c?(b.initTarget(this.lastVisibleColumn().getEl()),b.rendered||(b.show(),b.hide()),b.body.update(a),b.doAutoWidth(20),b.show()):b.rendered&&b.hide()},getErrorText:function(){var a=["<ul>"];this.items.each(function(b){b.isValid(!0)||a.push("<li>",b.getActiveError(),"</li>")});a.push("</ul>");return a}});Ext.preg("roweditor",Ext.ux.grid.RowEditor);Ext.ns("Ext.ux.plugins");
Ext.ux.plugins.LimitSize={init:function(a){a.maxHeightFactor=a.maxHeightFactor||0.9;a.maxWidthFactor=a.maxWidthFactor||0.95;a.autoScroll=!0;a.constrain=!0;a.applyLayout&&(Ext.apply(a,{layout:"anchor",frame:!0}),a.cls=this.cls||"",a.cls+="x-panel-mc",a.items.each(function(a){Ext.apply(a,{anchor:"100%",border:!1,autoHeight:!0})}));a.sizeLimiter=function(){var a=Ext.getBody(),c=Math.floor(this.maxHeightFactor*a.getHeight()),a=Math.floor(this.maxWidthFactor*a.getWidth()),d=this.getSize();if(d.height>
c||d.width>a)try{this.setSize(Math.min(d.width,a),Math.min(d.height,c)),this.doLayout()}catch(e){}this.syncShadow&&this.syncShadow()};a.on("afterrender",a.sizeLimiter);a.on("resize",a.sizeLimiter)}};Ext.preg("LimitHeight",Ext.ux.plugins.LimitSize);Ext.preg("LimitSize",Ext.ux.plugins.LimitSize);Ext.ux.MonthPickerPlugin=function(){function a(){g=Date.defaults.d;Date.defaults.d=(new Date).format("d");return!0}function b(a){Date.defaults.d=g;return a}function c(a,b,c){a=f.menu.picker;a.activeDate=a.activeDate.getFirstDateOfMonth();a.value&&(a.value=a.value.getFirstDateOfMonth());a.showMonthPicker();a.disabled||(a.monthPicker.stopFx(),a.monthPicker.show(),a.mun(a.monthPicker,"click",a.onMonthClick,a),a.mun(a.monthPicker,"dblclick",a.onMonthDblClick,a),a.onMonthClick=a.onMonthClick.createSequence(d),
a.onMonthDblClick=a.onMonthDblClick.createSequence(e),a.mon(a.monthPicker,"click",a.onMonthClick,a),a.mon(a.monthPicker,"dblclick",a.onMonthDblClick,a))}function d(a,b){var c=new Ext.Element(b);c.is("button.x-date-mp-cancel")?f.menu.hide():c.is("button.x-date-mp-ok")&&(c=f.menu.picker,c.setValue(c.activeDate),c.fireEvent("select",c,c.value))}function e(a,b){var c=new Ext.Element(b);c.parent()&&(c.parent().is("td.x-date-mp-month")||c.parent().is("td.x-date-mp-year"))&&(c=f.menu.picker,c.setValue(c.activeDate),
c.fireEvent("select",c,c.value))}var f,g;this.init=function(d){f=d;f.onTriggerClick=f.onTriggerClick.createSequence(c);f.getValue=f.getValue.createInterceptor(a).createSequence(b);f.beforeBlur=f.beforeBlur.createInterceptor(a).createSequence(b)}};Ext.preg("monthPickerPlugin",Ext.ux.MonthPickerPlugin);Ext.ns("Ext.ux.plugins");
Ext.ux.plugins.autoresize={guardHeight:0,guardWidth:0,innerPanelId:"layout_north_panel",outerPanelId:"layout_center_outer_panel",init:function(a){var b=Ext.ux.plugins.autoresize;a.autoResize=a.autoResize||{};Ext.apply(a.autoResize,{autoWidth:!0});a.autoResize.delayEvent=null;var c=Ext.getCmp(a.autoResize.stickTo||b.outerPanelId),d=null;!1!==a.autoResize.internalPanel&&(d=Ext.getCmp(a.autoResize.internalPanel||b.innerPanelId));var e=function(){a&&(a.autoResize.delayEvent&&clearTimeout(a.autoResize.delayEvent),
a.autoResize.delayEvent=setTimeout(function(){a.autoResize.delayEvent=null;a&&a.fireEvent&&a.fireEvent("windowresize",a)},100))},f=function(){var e=c.getHeight(),f=d?d.getHeight():0,g=a?a.autoResize.guardHeight:void 0;void 0===g&&(g=b.guardHeight);return Math.floor(e-f-g)},g=function(){var d=c.getWidth(),e=a?a.autoResize.guardWidth:void 0;void 0===e&&(e=b.guardWidth);return Math.floor(d-e)},k=function(){if(a){var b=f();Math.floor(a.getHeight())!=b&&a.setHeight(b);a.autoResize.autoWidth&&(b=g(),Math.floor(a.getWidth())!=
b&&a.setWidth(b))}};a.addEvents("windowresize");c.on("resize",e);a.on("resize",e);a.on("render",e);a.on("afterlayout",e);a.on("windowresize",k);a.on("destroy",function(a){a.autoResize.delayEvent&&clearTimeout(a.autoResize.delayEvent);c.un("resize",e);a.un("windowresize",k);a.un("afterlayout",e);a.un("render",e);a.un("resize",e)});a.height=f();a.autoResize.autoWidth&&(a.width=g())}};Ext.ns("Ext.ux.grid");Ext.ux.grid.CellToolTips=function(a){var b;Ext.isArray(a)?(b=a,a={}):b=a.ajaxTips;Ext.ux.grid.CellToolTips.superclass.constructor.call(this,a);a.tipConfig&&(this.tipConfig=a.tipConfig);this.ajaxTips=b};
Ext.extend(Ext.ux.grid.CellToolTips,Ext.util.Observable,{version:1.3,ajaxTips:!1,tipTpls:!1,tipFns:!1,tipUrls:"",tipConfig:{},request:!1,init:function(a){this.ajaxTips&&(this.tipTpls={},this.tipFns={},this.tipAfterFns={},this.tipUrls={},Ext.each(this.ajaxTips,function(a){this.tipTpls[a.field]=new Ext.XTemplate(a.tpl);a.url&&(this.tipUrls[a.field]=a.url);a.fn&&(this.tipFns[a.field]=a.fn);a.afterFn&&(this.tipAfterFns[a.field]=a.afterFn);a.tipConfig&&(this.tipConfig=a.tipConfig)},this),delete this.ajaxTips,
a.on("render",this.onGridRender.createDelegate(this)))},setFieldTpl:function(a,b){this.tipTpls[a]=Ext.isObject(b)?b:new Ext.XTemplate(b)},onGridRender:function(a){this.tipTpls&&(Ext.apply(this.tipConfig,{target:a.getView().mainBody,delegate:".x-grid3-cell-inner",renderTo:document.body,finished:!1}),Ext.applyIf(this.tipConfig,{trackMouse:!0}),this.tip=new Ext.ToolTip(this.tipConfig),this.tip.ctt=this,this.tip.on("beforeshow",this.beforeTipShow.createDelegate(this.tip,[this,a],!0)),this.tip.on("hide",
this.hideTip))},beforeTipShow:function(a,b,c){var d=c.getView().findCellIndex(a.triggerElement),d=c.getColumnModel().getDataIndex(d);if(!b.tipTpls[d])return!1;if(a.finished)a.body.dom.innerHTML=a.ctt.tipTpls[d].apply(a.tipdata);else{var e="string"==typeof b.tipUrls[d],f=c.getView().findRowIndex(a.triggerElement),g=c.getStore().getAt(f);if(c.CellToolTipCondition&&!1===c.CellToolTipCondition(f,g))return!1;f=g.copy().data;e?(b.loadDetails(b.tipFns[d]?b.tipFns[d](f):f,a,c,b,d),a.body.dom.innerHTML="Loading..."):
a.body.dom.innerHTML=b.tipTpls[d].apply(b.tipFns[d]?b.tipFns[d](g.data):g.data)}},hideTip:function(a){a.finished=!1},loadDetails:function(a,b,c,d,e){Ext.Ajax.request({url:d.tipUrls[e],params:a,method:"POST",success:function(a,c){b.finished=!0;b.tipdata=Ext.decode(a.responseText);d.tipAfterFns[e]&&(b.tipdata=d.tipAfterFns[e](b.tipdata));b.show()}})}});Ext.ns("Ext.ux.form.HtmlEditor");Ext.isObject||(Ext.isObject=function(a){return a&&"object"==typeof a});
Ext.override(Ext.form.HtmlEditor,{getSelectedText:function(a){var b=this.getDoc(),c="",d=!1,e="";if(this.win.getSelection||b.getSelection)(c=this.win.getSelection())||(c=b.getSelection()),a=a?c.getRangeAt(0).extractContents():this.win.getSelection().getRangeAt(0).cloneContents(),Ext.each(a.childNodes,function(a){3!==a.nodeType&&(d=!0)}),d?(b=document.createElement("div"),b.appendChild(a),e=b.innerHTML,c=this.win.getSelection()+""):e=c=a.textContent,a={textContent:c,hasHTML:d,html:e};else if(b.selection)this.win.focus(),
c=b.selection.createRange(),c.text!==c.htmlText&&(d=!0),a={textContent:c.text,hasHTML:d,html:c.htmlText};else return{textContent:""};return a}});
Ext.ux.form.HtmlEditor.MidasCommand=Ext.extend(Ext.util.Observable,{init:function(a){this.cmp=a;this.btns=[];this.cmp.on("render",this.onRender,this);this.cmp.on("initialize",this.onInit,this,{delay:100,single:!0})},onInit:function(){Ext.EventManager.on(this.cmp.getDoc(),{mousedown:this.onEditorEvent,dblclick:this.onEditorEvent,click:this.onEditorEvent,keyup:this.onEditorEvent,buffer:100,scope:this})},onRender:function(){var a,b=this.cmp.getToolbar(),c,d;Ext.each(this.midasBtns,function(e){Ext.isObject(e)?
(d=e.iconCls?e.iconCls:"x-edit-"+e.cmd,e.value&&(d=d+"-"+e.value.replace(/[<>\/]/g,"")),a={iconCls:d,handler:function(){this.cmp.relayCmd(e.cmd,e.value)},scope:this,tooltip:e.tooltip||{title:e.title},overflowText:e.overflowText||e.title}):a=new Ext.Toolbar.Separator;c=b.addButton(a);e.enableOnSelection&&c.disable();this.btns.push(c)},this)},onEditorEvent:function(){var a=this.cmp.getDoc();Ext.each(this.btns,function(b,c){if(this.midasBtns[c].enableOnSelection||this.midasBtns[c].disableOnSelection)a.getSelection?
this.midasBtns[c].enableOnSelection&&""!==a.getSelection()||this.midasBtns[c].disableOnSelection&&""===a.getSelection()?b.enable():b.disable():a.selection&&(this.midasBtns[c].enableOnSelection&&""!==a.selection.createRange().text||this.midasBtns[c].disableOnSelection&&""===a.selection.createRange().text?b.enable():b.disable());this.midasBtns[c].monitorCmdState&&b.toggle(a.queryCommandState(this.midasBtns[c].cmd))},this)}});Ext.ux.form.HtmlEditor.Divider=Ext.extend(Ext.util.Observable,{init:function(a){this.cmp=a;this.cmp.on("render",this.onRender,this)},onRender:function(){this.cmp.getToolbar().addButton([new Ext.Toolbar.Separator])}});Ext.ux.form.HtmlEditor.HR=Ext.extend(Ext.util.Observable,{langTitle:"Horizontal Rule",langHelp:"Enter the width of the Rule in percentage<br/> followed by the % sign at the end, or to<br/> set a fixed width ommit the % symbol.",langInsert:"Insert",langCancel:"Cancel",langWidth:"Width",defaultHRWidth:"100%",cmd:"hr",init:function(a){this.cmp=a;this.cmp.on("render",this.onRender,this)},onRender:function(){this.cmp.getToolbar().addButton({iconCls:"x-edit-hr",handler:function(){this.hrWindow?this.hrWindow.getEl().frame():
this.hrWindow=new Ext.Window({title:this.langTitle,width:240,closeAction:"hide",items:[{itemId:"insert-hr",xtype:"form",border:!1,plain:!0,bodyStyle:"padding: 10px;",labelWidth:60,labelAlign:"right",items:[{xtype:"label",html:this.langHelp+"<br/>&nbsp;"},{xtype:"textfield",maskRe:/[0-9]|%/,regex:/^[1-9][0-9%]{1,3}/,fieldLabel:this.langWidth,name:"hrwidth",width:60,value:this.defaultHRWidth,listeners:{specialkey:function(a,b){b.getKey()!=b.ENTER&&b.getKey()!=b.RETURN||!a.isValid()||this.doInsertHR()},
scope:this}}]}],buttons:[{text:this.langInsert,handler:function(){var a=this.hrWindow.getComponent("insert-hr").getForm();a.isValid()?this.doInsertHR():a.findField("hrwidth").getEl().frame()},scope:this},{text:this.langCancel,handler:function(){this.hrWindow.hide()},scope:this}],listeners:{render:Ext.isGecko?this.focusHRLong:this.focusHR,show:this.focusHR,move:this.focusHR,scope:this}});this.hrWindow.show()},scope:this,tooltip:{title:this.langInsert+" "+this.langTitle},overflowText:this.langTitle})},
focusHRLong:function(a){this.focus(a,600)},focusHR:function(a){this.focus(a,100)},focus:function(a,b){a.getComponent("insert-hr").getForm().findField("hrwidth").focus(!0,b)},doInsertHR:function(){var a=this.hrWindow.getComponent("insert-hr").getForm();if(a.isValid()){var b=a.findField("hrwidth").getValue();b?this.insertHR(b):this.insertHR(this.defaultHRWidth);a.reset();this.hrWindow.hide()}},insertHR:function(a){this.cmp.insertAtCursor('<hr width="'+a+'">')}});Ext.ux.form.HtmlEditor.Image=Ext.extend(Ext.util.Observable,{langTitle:"Insert Image",urlSizeVars:["width","height"],basePath:"image.php",init:function(a){this.cmp=a;this.cmp.on("render",this.onRender,this);this.cmp.on("initialize",this.onInit,this,{delay:100,single:!0})},onEditorMouseUp:function(a){Ext.get(a.getTarget()).select("img").each(function(a){var c=a.getAttribute("width"),d=a.getAttribute("height"),e=a.getAttribute("src")+" ",e=e.replace(RegExp(this.urlSizeVars[0]+"=[0-9]{1,5}([&| ])"),
this.urlSizeVars[0]+"="+c+"$1"),e=e.replace(RegExp(this.urlSizeVars[1]+"=[0-9]{1,5}([&| ])"),this.urlSizeVars[1]+"="+d+"$1");a.set({src:e.replace(/\s+$/,"")})},this)},onInit:function(){Ext.EventManager.on(this.cmp.getDoc(),{mouseup:this.onEditorMouseUp,buffer:100,scope:this})},onRender:function(){this.cmp.getToolbar().addButton({iconCls:"x-edit-image",handler:this.selectImage,scope:this,tooltip:{title:this.langTitle},overflowText:this.langTitle})},selectImage:Ext.emptyFn,insertImage:function(a){this.cmp.insertAtCursor('<img src="'+
this.basePath+"?"+this.urlSizeVars[0]+"="+a.Width+"&"+this.urlSizeVars[1]+"="+a.Height+"&id="+a.ID+'" title="'+a.Name+'" alt="'+a.Name+'">')}});Ext.ux.form.HtmlEditor.RemoveFormat=Ext.extend(Ext.ux.form.HtmlEditor.MidasCommand,{midasBtns:["|",{enableOnSelection:!0,cmd:"removeFormat",tooltip:{title:"Remove Formatting"},overflowText:"Remove Formatting"}]});Ext.ux.form.HtmlEditor.IndentOutdent=Ext.extend(Ext.ux.form.HtmlEditor.MidasCommand,{midasBtns:["|",{cmd:"indent",tooltip:{title:"Indent Text"},overflowText:"Indent Text"},{cmd:"outdent",tooltip:{title:"Outdent Text"},overflowText:"Outdent Text"}]});Ext.ux.form.HtmlEditor.SubSuperScript=Ext.extend(Ext.ux.form.HtmlEditor.MidasCommand,{midasBtns:["|",{enableOnSelection:!0,cmd:"subscript",tooltip:{title:"Subscript"},overflowText:"Subscript"},{enableOnSelection:!0,cmd:"superscript",tooltip:{title:"Superscript"},overflowText:"Superscript"}]});Ext.ux.form.HtmlEditor.FindAndReplace=Ext.extend(Ext.util.Observable,{langTitle:"Find/Replace",langFind:"Find",langReplace:"Replace",langReplaceWith:"Replace with",langClose:"Close",cmd:"findandreplace",init:function(a){this.cmp=a;this.cmp.on({render:this.onRender,editmodechange:this.editModeChange,scope:this});this.lastSelectionStart=-1},editModeChange:function(a,b){this.btn&&b&&this.btn.setDisabled(!1)},onRender:function(){this.btn=this.cmp.getToolbar().addButton({iconCls:"x-edit-findandreplace",
sourceEditEnabled:!0,handler:function(){this.farWindow?this.farWindow.getEl().frame():this.farWindow=new Ext.Window({title:this.langTitle,closeAction:"hide",width:270,items:[{itemId:"findandreplace",xtype:"form",border:!1,plain:!0,bodyStyle:"padding: 10px;",labelWidth:80,labelAlign:"right",items:[{xtype:"textfield",allowBlank:!1,fieldLabel:this.langFind,name:"find",width:145},{xtype:"textfield",allowBlank:!0,fieldLabel:this.langReplaceWith,name:"replace",width:145}]}],buttons:[{text:this.langFind,
handler:this.doFind,scope:this},{text:this.langReplace,handler:this.doReplace,scope:this},{text:this.langClose,handler:function(){this.farWindow.hide()},scope:this}]});this.farWindow.show()},scope:this,tooltip:{title:this.langTitle},overflowText:this.langTitle})},doFind:function(){var a=this.farWindow.getComponent("findandreplace").getForm();if(!a.isValid())return"";var b=a.findField("find").getValue();a.findField("replace").getValue();if(this.cmp.sourceEditMode){var a=this.cmp.el.dom,c=a.selectionStart===
this.lastSelectionStart?a.selectionStart+1:a.selectionStart,d=a.value.substring(c).search(RegExp(b));-1!=d&&(this.lastSelectionStart=c+d,Ext.isGecko&&(a.setSelectionRange(this.lastSelectionStart,this.lastSelectionStart+b.length),this.cmp.scrollIntoView(c),this.cmp.focus(!1,!0)))}},doReplace:function(){var a=this.farWindow.getComponent("findandreplace").getForm();if(!a.isValid())return"";a.findField("find").getValue();a=a.findField("replace").getValue();if(this.cmp.sourceEditMode){var b=this.cmp.el.dom,
c=b.selectionStart,d=b.selectionEnd,e=b.value;if(Ext.isGecko){var f=b.scrollTop;b.value=e.substring(0,c)+a+e.substring(d);b.setSelectionRange(c,c+a.length);b.scrollTop=f;this.cmp.focus(!1,!0)}}}});Ext.ux.form.HtmlEditor.Table=Ext.extend(Ext.util.Observable,{langTitle:"Insert Table",langInsert:"Insert",langCancel:"Cancel",langRows:"Rows",langColumns:"Columns",langBorder:"Border",langCellLabel:"Label Cells",cmd:"table",showCellLocationText:!0,cellLocationText:"{0}&nbsp;-&nbsp;{1}",tableBorderOptions:[["none","None"],["1px solid #000","Sold Thin"],["2px solid #000","Solid Thick"],["1px dashed #000","Dashed"],["1px dotted #000","Dotted"]],init:function(a){this.cmp=a;this.cmp.on("render",this.onRender,
this)},onRender:function(){this.cmp.getToolbar().addButton({iconCls:"x-edit-table",handler:function(){this.tableWindow?this.tableWindow.getEl().frame():this.tableWindow=new Ext.Window({title:this.langTitle,closeAction:"hide",width:235,items:[{itemId:"insert-table",xtype:"form",border:!1,plain:!0,bodyStyle:"padding: 10px;",labelWidth:65,labelAlign:"right",items:[{xtype:"numberfield",allowBlank:!1,allowDecimals:!1,fieldLabel:this.langRows,name:"row",width:60},{xtype:"numberfield",allowBlank:!1,allowDecimals:!1,
fieldLabel:this.langColumns,name:"col",width:60},{xtype:"combo",fieldLabel:this.langBorder,name:"border",forceSelection:!0,mode:"local",store:new Ext.data.ArrayStore({autoDestroy:!0,fields:["spec","val"],data:this.tableBorderOptions}),triggerAction:"all",value:"none",displayField:"val",valueField:"spec",anchor:"-15"},{xtype:"checkbox",fieldLabel:this.langCellLabel,checked:this.showCellLocationText,listeners:{check:function(){this.showCellLocationText=!this.showCellLocationText},scope:this}}]}],buttons:[{text:this.langInsert,
handler:function(){var a=this.tableWindow.getComponent("insert-table").getForm();if(a.isValid()){var b=a.findField("border").getValue(),a=[a.findField("row").getValue(),a.findField("col").getValue()];if(2==a.length&&0<a[0]&&0<a[1]){var c=Math.floor(100/a[0]),d="<table style='border-collapse: collapse'>",e="&nbsp;";this.showCellLocationText&&(e=this.cellLocationText);for(var f=0;f<a[0];f++){for(var d=d+"<tr>",g=0;g<a[1];g++)d+="<td width='"+c+"%' style='border: "+b+";'>"+String.format(e,f+1,String.fromCharCode(g+
65))+"</td>";d+="</tr>"}this.cmp.insertAtCursor(d+"</table>")}this.tableWindow.hide()}else a.findField("row").isValid()?a.findField("col").isValid()||a.findField("col").getEl().frame():a.findField("row").getEl().frame()},scope:this},{text:this.langCancel,handler:function(){this.tableWindow.hide()},scope:this}]});this.tableWindow.show()},scope:this,tooltip:{title:this.langTitle},overflowText:this.langTitle})}});Ext.ux.form.HtmlEditor.Word=Ext.extend(Ext.util.Observable,{langTitle:"Word Paste",langToolTip:"Cleanse text pasted from Word or other Rich Text applications",wordPasteEnabled:!0,curLength:0,lastLength:0,lastValue:"",init:function(a){this.cmp=a;this.cmp.on("render",this.onRender,this);this.cmp.on("initialize",this.onInit,this,{delay:100,single:!0})},onInit:function(){Ext.EventManager.on(this.cmp.getDoc(),{keyup:this.checkIfPaste,scope:this});this.lastValue=this.cmp.getValue();this.lastLength=this.curLength=
this.lastValue.length},checkIfPaste:function(a){var b=0;this.curLength=this.cmp.getValue().length;a.V==a.getKey()&&a.ctrlKey&&this.wordPasteEnabled&&(this.cmp.suspendEvents(),b=this.findValueDiffAt(this.cmp.getValue()),a=[this.cmp.getValue().substr(0,b),this.fixWordPaste(this.cmp.getValue().substr(b,this.curLength-this.lastLength)),this.cmp.getValue().substr(this.curLength-this.lastLength+b,this.curLength)],this.cmp.setValue(a.join("")),this.cmp.resumeEvents());this.lastLength=this.cmp.getValue().length;
this.lastValue=this.cmp.getValue()},findValueDiffAt:function(a){for(var b=0;b<this.curLength;b++)if(this.lastValue[b]!=a[b])return b},fixWordPaste:function(a){Ext.each([/&nbsp;/ig,/[\r\n]/g,/<(xml|style)[^>]*>.*?<\/\1>/ig,/<\/?(meta|object|span)[^>]*>/ig,/<\/?[A-Z0-9]*:[A-Z]*[^>]*>/ig,/(lang|class|type|href|name|title|id|clear)=\"[^\"]*\"/ig,/style=(\'\'|\"\")/ig,/<![\[-].*?-*>/g,/MsoNormal/g,/<\\?\?xml[^>]*>/g,/<\/?o:p[^>]*>/g,/<\/?v:[^>]*>/g,/<\/?o:[^>]*>/g,/<\/?st1:[^>]*>/g,/&nbsp;/g,/<\/?SPAN[^>]*>/g,
/<\/?FONT[^>]*>/g,/<\/?STRONG[^>]*>/g,/<\/?H1[^>]*>/g,/<\/?H2[^>]*>/g,/<\/?H3[^>]*>/g,/<\/?H4[^>]*>/g,/<\/?H5[^>]*>/g,/<\/?H6[^>]*>/g,/<\/?P[^>]*><\/P>/g,/\x3c!--(.*)--\x3e/g,/\x3c!--(.*)>/g,/<!(.*)--\x3e/g,/<\\?\?xml[^>]*>/g,/<\/?o:p[^>]*>/g,/<\/?v:[^>]*>/g,/<\/?o:[^>]*>/g,/<\/?st1:[^>]*>/g,/style=\"[^\"]*\"/g,/style=\'[^\"]*\'/g,/lang=\"[^\"]*\"/g,/lang=\'[^\"]*\'/g,/class=\"[^\"]*\"/g,/class=\'[^\"]*\'/g,/type=\"[^\"]*\"/g,/type=\'[^\"]*\'/g,/href=\'#[^\"]*\'/g,/href=\"#[^\"]*\"/g,/name=\"[^\"]*\"/g,
/name=\'[^\"]*\'/g,/ clear=\"all\"/g,/id=\"[^\"]*\"/g,/title=\"[^\"]*\"/g,/<span[^>]*>/g,/<\/?span[^>]*>/g,/<title>(.*)<\/title>/g,/class=/g,/<meta[^>]*>/g,/<link[^>]*>/g,/<style>(.*)<\/style>/g,/<w:[^>]*>(.*)<\/w:[^>]*>/g],function(b){a=a.replace(b,"")});a=a.replace(/<div[^>]*>/g,"<p>");return a=a.replace(/<\/?div[^>]*>/g,"</p>")},onRender:function(){this.cmp.getToolbar().add({iconCls:"x-edit-wordpaste",pressed:!0,handler:function(a){a.toggle(!a.pressed);this.wordPasteEnabled=!this.wordPasteEnabled},
scope:this,tooltip:{text:this.langToolTip},overflowText:this.langTitle})}});Ext.ux.form.HtmlEditor.Link=Ext.extend(Ext.util.Observable,{langTitle:"Insert Link",langInsert:"Insert",langCancel:"Cancel",langTarget:"Target",langURL:"URL",langText:"Text",linkTargetOptions:[["_self","Default"],["_blank","New Window"],["_parent","Parent Window"],["_top","Entire Window"]],init:function(a){a.enableLinks=!1;this.cmp=a;this.cmp.on("render",this.onRender,this)},onRender:function(){this.cmp.getToolbar().addButton({iconCls:"x-edit-createlink",handler:function(){var a=this.cmp.getSelectedText();
this.linkWindow?(this.linkWindow.show(),this.linkWindow.getEl().frame()):(this.linkWindow=new Ext.Window({title:this.langTitle,closeAction:"hide",width:450,height:160,layout:"fit",items:[{xtype:"form",itemId:"insert-link",border:!1,plain:!0,bodyStyle:"padding: 10px;",labelWidth:80,labelAlign:"right",items:[{xtype:"textfield",fieldLabel:this.langText,name:"text",anchor:"100%",value:""},{xtype:"textfield",fieldLabel:this.langURL,name:"url",anchor:"100%",value:"http://"},{xtype:"combo",fieldLabel:this.langTarget,
name:"target",forceSelection:!0,mode:"local",store:new Ext.data.ArrayStore({autoDestroy:!0,fields:["spec","val"],data:this.linkTargetOptions}),triggerAction:"all",value:"_self",displayField:"val",valueField:"spec",anchor:"100%"}]}],buttons:[{text:this.langInsert,handler:function(){var a=this.linkWindow.getComponent("insert-link").getForm();if(a.isValid()){var c="",d=this.cmp.getSelectedText(!0),e=a.findField("text").getValue(),f=a.findField("url").getValue(),a=a.findField("target").getValue();e.length&&
" "==e[e.length-1]&&(e=e.substr(0,e.length-1),c=" ");d.hasHTML&&(e=d.html);this.cmp.insertAtCursor('<a href="'+f+'" target="'+a+'">'+e+"</a>"+c);this.linkWindow.hide()}else a.findField("url").isValid()?a.findField("target").isValid()||a.findField("target").getEl().frame():a.findField("url").getEl().frame()},scope:this},{text:this.langCancel,handler:function(){this.linkWindow.hide()},scope:this}],listeners:{show:{fn:function(){var b=this.linkWindow.getComponent("insert-link").getForm();b.findField("text").setValue(a.textContent).setDisabled(a.hasHTML);
if(b=b.findField("url"))b.reset(),b.focus(!0,50)},scope:this,defer:350}}}),this.linkWindow.show())},scope:this,tooltip:this.langTitle})}});Ext.ux.form.HtmlEditor.SpecialCharacters=Ext.extend(Ext.util.Observable,{langTitle:"Insert Special Character",langInsert:"Insert",langCancel:"Cancel",specialChars:[153],charRange:[160,256],chars:[],init:function(a){this.cmp=a;this.cmp.on("render",this.onRender,this)},onRender:function(){this.cmp.getToolbar().addButton({iconCls:"x-edit-char",handler:function(){if(!this.chars.length){this.specialChars.length&&Ext.each(this.specialChars,function(a,c){this.chars[c]=["&#"+a+";"]},this);for(var a=this.charRange[0];a<
this.charRange[1];a++)this.chars.push(["&#"+a+";"])}a=new Ext.data.ArrayStore({fields:["char"],data:this.chars});this.charWindow=new Ext.Window({title:this.langTitle,width:436,autoHeight:!0,layout:"fit",items:[{xtype:"dataview",store:a,ref:"charView",autoHeight:!0,multiSelect:!0,tpl:new Ext.XTemplate('<tpl for="."><div class="char-item">{char}</div></tpl><div class="x-clear"></div>'),overClass:"char-over",itemSelector:"div.char-item",listeners:{dblclick:function(a,c,d,e){this.insertChar(a.getStore().getAt(c).get("char"));
this.charWindow.close()},scope:this}}],buttons:[{text:this.langInsert,handler:function(){Ext.each(this.charWindow.charView.getSelectedRecords(),function(a){a=a.get("char");this.insertChar(a)},this);this.charWindow.close()},scope:this},{text:this.langCancel,handler:function(){this.charWindow.close()},scope:this}]});this.charWindow.show()},scope:this,tooltip:{title:this.langTitle},overflowText:this.langTitle})},insertChar:function(a){a&&this.cmp.insertAtCursor(a)}});Ext.ux.form.HtmlEditor.UndoRedo=Ext.extend(Ext.ux.form.HtmlEditor.MidasCommand,{midasBtns:["|",{cmd:"undo",tooltip:{title:"Undo"},overflowText:"Undo"},{cmd:"redo",tooltip:{title:"Redo"},overflowText:"Redo"}]});Ext.ux.form.HtmlEditor.HeadingButtons=Ext.extend(Ext.ux.form.HtmlEditor.MidasCommand,{midasBtns:["|",{enableOnSelection:!0,cmd:"formatblock",value:"<h1>",tooltip:{title:"1st Heading"},overflowText:"1st Heading"},{enableOnSelection:!0,cmd:"formatblock",value:"<h2>",tooltip:{title:"2nd Heading"},overflowText:"2nd Heading"}]});
Ext.ux.form.HtmlEditor.HeadingMenu=Ext.extend(Ext.util.Observable,{init:function(a){this.cmp=a;this.cmp.on("render",this.onRender,this)},onRender:function(){var a=this.cmp;this.cmp.getToolbar().addItem({xtype:"combo",displayField:"display",valueField:"value",name:"headingsize",forceSelection:!0,mode:"local",triggerAction:"all",width:65,emptyText:"Heading",store:{xtype:"arraystore",autoDestroy:!0,fields:["value","display"],data:[["H1","H1"],["H2","H2"],["H3","H3"],["H4","H4"],["H5","H5"],["H6","H6"]]},
listeners:{select:function(a,c){this.relayCmd("formatblock","<"+c.get("value")+">");a.reset()},scope:a}})}});Ext.ux.form.HtmlEditor.Font=Ext.extend(Ext.util.Observable,{init:function(a){this.cmp=a;this.cmp.on("render",this.onRender,this)},onRender:function(){var a=this.cmp,b=function(){var b=[];Ext.each(a.fontFamilies,function(a){b.push([a.toLowerCase(),a])});return b}();this.cmp.getToolbar().addItem({xtype:"combo",displayField:"display",valueField:"value",name:"fontfamily",forceSelection:!0,mode:"local",triggerAction:"all",width:80,emptyText:"Font",tpl:'<tpl for="."><div class="x-combo-list-item" style="font-family:{value};">{display}</div></tpl>',
store:{xtype:"arraystore",autoDestroy:!0,fields:["value","display"],data:b},listeners:{select:function(a,b){this.relayCmd("fontname",b.get("value"));this.deferFocus();a.reset()},scope:a}})}});Ext.ux.form.HtmlEditor.plugins=function(){return[new Ext.ux.form.HtmlEditor.Link,new Ext.ux.form.HtmlEditor.Divider,new Ext.ux.form.HtmlEditor.Word,new Ext.ux.form.HtmlEditor.FindAndReplace,new Ext.ux.form.HtmlEditor.UndoRedo,new Ext.ux.form.HtmlEditor.Divider,new Ext.ux.form.HtmlEditor.Image,new Ext.ux.form.HtmlEditor.Table,new Ext.ux.form.HtmlEditor.HR,new Ext.ux.form.HtmlEditor.SpecialCharacters,new Ext.ux.form.HtmlEditor.HeadingMenu,new Ext.ux.form.HtmlEditor.IndentOutdent,new Ext.ux.form.HtmlEditor.SubSuperScript,
new Ext.ux.form.HtmlEditor.RemoveFormat]};Ext.ux.form.HtmlEditor.HR&&(Ext.ux.form.HtmlEditor.HR.prototype.langTitle="\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044c",Ext.ux.form.HtmlEditor.HR.prototype.langHelp="\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0448\u0438\u0440\u0438\u043d\u0443 \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044f \u0432 \u043f\u0440\u043e\u0446\u0435\u043d\u0442\u0430\u0445<br/> (\u0441\u043e \u0437\u043d\u0430\u043a\u043e\u043c %), \u043b\u0438\u0431\u043e \u0431\u0435\u0437 %<br/>\u0434\u043b\u044f \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u044f \u0444\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0439 \u0448\u0438\u0440\u0438\u043d\u044b.",
Ext.ux.form.HtmlEditor.HR.prototype.langInsert="\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c",Ext.ux.form.HtmlEditor.HR.prototype.langCancel="\u041e\u0442\u043c\u0435\u043d\u0430",Ext.ux.form.HtmlEditor.HR.prototype.langWidth="\u0428\u0438\u0440\u0438\u043d\u0430",Ext.ux.form.HtmlEditor.HR.prototype.defaultHRWidth="80%");Ext.ux.form.HtmlEditor.Image&&(Ext.ux.form.HtmlEditor.Image.prototype.langTitle="\u0412\u0441\u0442\u0430\u0432\u043a\u0430 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f");
Ext.ux.form.HtmlEditor.RemoveFormat&&(Ext.ux.form.HtmlEditor.RemoveFormat.prototype.midasBtns[1].tooltip.title="\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0444\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435");
Ext.ux.form.HtmlEditor.IndentOutdent&&(Ext.ux.form.HtmlEditor.IndentOutdent.prototype.midasBtns[1].tooltip.title="\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0441\u0442\u0443\u043f",Ext.ux.form.HtmlEditor.IndentOutdent.prototype.midasBtns[2].tooltip.title="\u0423\u0431\u0440\u0430\u0442\u044c \u043e\u0442\u0441\u0442\u0443\u043f");
Ext.ux.form.HtmlEditor.IndentOutdent&&(Ext.ux.form.HtmlEditor.SubSuperScript.prototype.midasBtns[1].tooltip.title="\u0412 \u043d\u0438\u0436\u043d\u0438\u0439 \u0438\u043d\u0434\u0435\u043a\u0441",Ext.ux.form.HtmlEditor.SubSuperScript.prototype.midasBtns[2].tooltip.title="\u0412 \u0432\u0435\u0440\u0445\u043d\u0438\u0439 \u0438\u043d\u0434\u0435\u043a\u0441");
Ext.ux.form.HtmlEditor.FindAndReplace&&(Ext.ux.form.HtmlEditor.FindAndReplace.prototype.langTitle="\u041f\u043e\u0438\u0441\u043a/\u0417\u0430\u043c\u0435\u043d\u0430",Ext.ux.form.HtmlEditor.FindAndReplace.prototype.langFind="\u041d\u0430\u0439\u0442\u0438",Ext.ux.form.HtmlEditor.FindAndReplace.prototype.langReplace="\u0417\u0430\u043c\u0435\u043d\u0438\u0442\u044c",Ext.ux.form.HtmlEditor.FindAndReplace.prototype.langReplaceWith="\u0417\u0430\u043c\u0435\u043d\u0438\u0442\u044c \u043d\u0430",Ext.ux.form.HtmlEditor.FindAndReplace.prototype.langClose=
"\u0417\u0430\u043a\u0440\u044b\u0442\u044c");
Ext.ux.form.HtmlEditor.Table&&(Ext.ux.form.HtmlEditor.Table.prototype.langTitle="\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0443",Ext.ux.form.HtmlEditor.Table.prototype.langInsert="\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c",Ext.ux.form.HtmlEditor.Table.prototype.langCancel="\u041e\u0442\u043c\u0435\u043d\u0430",Ext.ux.form.HtmlEditor.Table.prototype.langRows="\u0421\u0442\u0440\u043e\u043a\u0438",Ext.ux.form.HtmlEditor.Table.prototype.langColumns="\u0421\u0442\u043e\u043b\u0431\u0446\u044b",
Ext.ux.form.HtmlEditor.Table.prototype.langBorder="\u0420\u0430\u043c\u043a\u0438",Ext.ux.form.HtmlEditor.Table.prototype.tableBorderOptions[0][1]="\u041d\u0435\u0442",Ext.ux.form.HtmlEditor.Table.prototype.tableBorderOptions[1][1]="\u0421\u043f\u043b\u043e\u0448\u043d\u044b\u0435 \u0442\u043e\u043d\u043a\u0438\u0435",Ext.ux.form.HtmlEditor.Table.prototype.tableBorderOptions[2][1]="\u0421\u043f\u043b\u043e\u0448\u043d\u044b\u0435 \u0442\u043e\u043b\u0441\u0442\u044b\u0435",Ext.ux.form.HtmlEditor.Table.prototype.tableBorderOptions[3][1]=
"\u0422\u0438\u0440\u0435",Ext.ux.form.HtmlEditor.Table.prototype.tableBorderOptions[4][1]="\u0422\u043e\u0447\u043a\u0438",Ext.ux.form.HtmlEditor.Table.prototype.langCellLabel="\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c \u044f\u0447\u0435\u0439\u043a\u0438");Ext.ux.form.HtmlEditor.Word&&(Ext.ux.form.HtmlEditor.Word.prototype.langTitle="\u0412\u0441\u0442\u0430\u0432\u043a\u0430 \u0438\u0437 \u0412\u043e\u0440\u0434\u0430",Ext.ux.form.HtmlEditor.Word.prototype.langToolTip="\u0427\u0438\u0441\u0442\u0438\u0442\u044c \u0442\u0435\u043a\u0441\u0442, \u0432\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u043c\u044b\u0439 \u0438\u0437 \u0412\u043e\u0440\u0434\u0430 \u0438 \u0434\u0440\u0443\u0433\u0438\u0445 \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440\u043e\u0432.");
Ext.ux.form.HtmlEditor.Link&&(Ext.ux.form.HtmlEditor.Link.prototype.langTitle="\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443",Ext.ux.form.HtmlEditor.Link.prototype.langInsert="\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c",Ext.ux.form.HtmlEditor.Link.prototype.langCancel="\u041e\u0442\u043c\u0435\u043d\u0430",Ext.ux.form.HtmlEditor.Link.prototype.langTarget="\u041e\u0442\u043a\u0440\u044b\u0432\u0430\u0442\u044c \u0432",Ext.ux.form.HtmlEditor.Link.prototype.linkTargetOptions=
[["_self","\u0442\u0435\u043a\u0443\u0449\u0435\u043c \u043e\u043a\u043d\u0435\u043c"],["_blank","\u043d\u043e\u0432\u043e\u043c \u043e\u043a\u043d\u0435"]],Ext.ux.form.HtmlEditor.Link.prototype.langURL="URL",Ext.ux.form.HtmlEditor.Link.prototype.langText="\u0422\u0435\u043a\u0441\u0442");
Ext.ux.form.HtmlEditor.SpecialCharacters&&(Ext.ux.form.HtmlEditor.SpecialCharacters.prototype.langTitle="\u0412\u0441\u0442\u0430\u0432\u043a\u0430 \u0441\u043f\u0435\u0446. \u0441\u0438\u043c\u0432\u043e\u043b\u0430",Ext.ux.form.HtmlEditor.SpecialCharacters.prototype.langInsert="\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c",Ext.ux.form.HtmlEditor.SpecialCharacters.prototype.langCancel="\u041e\u0442\u043c\u0435\u043d\u0430");
Ext.ux.form.HtmlEditor.UndoRedo&&(Ext.ux.form.HtmlEditor.UndoRedo.prototype.midasBtns[1].tooltip.title="\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",Ext.ux.form.HtmlEditor.UndoRedo.prototype.midasBtns[2].tooltip.title="\u0412\u0435\u0440\u043d\u0443\u0442\u044c");(function(a){if(!a.HistoryManager){var b=!(!a.history||!a.history.pushState),c="undefined"!=typeof a.onhashchange;if(Ext.isOpera||Ext.isWebKit||Ext.isGecko)b=!1;"Microsoft Internet Explorer"==a.navigator.appName&&(!document.documentMode||8>document.documentMode?c=!1:10==document.documentMode&&(b=!1));if(b||c)a.HistoryManager=new (Ext.extend(Ext.util.Observable,{constructor:function(){this.addEvents("change");b?a.onpopstate=function(b){a.HistoryManager.onPopState(b)}:c?a.onhashchange=function(b){a.HistoryManager.onPopState(b)}:
(this.currentHash=a.document.location.hash,setTimeout(this._checker,250))},_checker:function(){var b=a.HistoryManager;b&&a.document.location.hash!=b.currentHash&&(b.currentHash=a.document.location.hash,b.onPopState());setTimeout(b._checker,50)},onPopState:function(a){this.fireEvent("change",this.getToken())},addEvent:function(a,b){this.on(a,b)},add:function(d){if(b){var e=a.document.location.href,f=e.indexOf("#"),e=0>f?e+("#"+d):e.substr(0,f+1)+d;a.history.pushState(null,null,e)}else{if(c){a.document.location.hash=
d;return}a.document.location.hash=d;this.currentHash="#"+d}this.fireEvent("change",d)},getToken:function(){var b=a.document.location.hash;return b&&"#"!=b?b.substr(1):"/"}}))}})(window);(function(){function a(){var a=navigator.userAgent,b,c=a.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(c[1]))return b=/\brv[ :]+(\d+)/g.exec(a)||[],{name:"IE",version:b[1]||""};if("Chrome"===c[1]&&(b=a.match(/\b(OPR|Edge)\/(\d+)/),null!=b))return{name:b[1].replace("OPR","Opera"),version:b[2]};c=c[2]?[c[1],c[2]]:[navigator.appName,navigator.appVersion,"-?"];null!=(b=a.match(/version\/(\d+)/i))&&c.splice(1,1,b[1]);return{name:c[0],version:c[1]}}function b(a,
b){"undefined"!=typeof console&&a<=n.current_log_level&&(a==n.LOG_LEVEL_DEBUG&&console.log("DEBUG: %s",b),a==n.LOG_LEVEL_INFO&&console.info("INFO: %s",b),a==n.LOG_LEVEL_ERROR&&console.error("ERROR: %s",b))}function c(a){a!=n.LOG_LEVEL_DEBUG&&a!=n.LOG_LEVEL_INFO&&a!=n.LOG_LEVEL_ERROR?b(n.LOG_LEVEL_ERROR,"cadesplugin_api.js: Incorrect log_level: "+a):(n.current_log_level=a,n.current_log_level==n.LOG_LEVEL_DEBUG&&b(n.LOG_LEVEL_INFO,"cadesplugin_api.js: log_level = DEBUG"),n.current_log_level==n.LOG_LEVEL_INFO&&
b(n.LOG_LEVEL_INFO,"cadesplugin_api.js: log_level = INFO"),n.current_log_level==n.LOG_LEVEL_ERROR&&b(n.LOG_LEVEL_INFO,"cadesplugin_api.js: log_level = ERROR"),g()&&(n.current_log_level==n.LOG_LEVEL_DEBUG&&window.postMessage("set_log_level=debug","*"),n.current_log_level==n.LOG_LEVEL_INFO&&window.postMessage("set_log_level=info","*"),n.current_log_level==n.LOG_LEVEL_ERROR&&window.postMessage("set_log_level=error","*")))}function d(a){function b(a,f){var g;try{g=c[a](f)}catch(k){return Promise.reject(k)}return g.done?
g.value:Promise.resolve(g.value).then(d,e)}var c=a(Array.prototype.slice.call(arguments,1)),d=b.bind(b,"next"),e=b.bind(b,"throw");return d()}function e(){return"IE"==H.name||"MSIE"==H.name}function f(){return navigator.userAgent.match(/ipod/i)||navigator.userAgent.match(/ipad/i)||navigator.userAgent.match(/iphone/i)}function g(){if("IE"==H.name||"MSIE"==H.name)return!1;if("Edge"==H.name)return S=!0;if("Opera"==H.name)return N=!0,33<=H.version?!0:!1;if("Firefox"==H.name)return Q=!0,52<=H.version?
!0:!1;if("Chrome"==H.name)return 42<=H.version?!0:!1}function k(a){if(f())return s("CreateObject",[a]);if(e()){if(a.match(/X509Enrollment/i))try{return document.getElementById("certEnrollClassFactory").CreateObject(a)}catch(b){throw"\u0414\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043e\u0431\u044c\u0435\u043a\u0442\u043e\u0432 X509Enrollment \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0432\u0435\u0431-\u0443\u0437\u0435\u043b \u043d\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u043f\u043e\u0434\u043b\u0438\u043d\u043d\u043e\u0441\u0442\u0438 \u043f\u043e \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0443 HTTPS";
}try{return document.getElementById("webClassFactory").CreateObject(a)}catch(c){return new ActiveXObject(a)}}return z.CreateObject(a)}function h(a){var b=a.message;b?a.number&&(a=a.number,0>a&&(a=4294967295+a+1),a=a.toString(16).toUpperCase(),b+=" (0x"+a+")"):b=a;return b}function l(a){if(g()||e()||f())return h(a);try{return z.getLastError()}catch(b){return h(a)}}function q(a){return z.CreateObjectAsync(a)}function s(a,b){var c,d;R.call(a,b,function(a,b){d=a;eval("tmpobj="+b);"string"==typeof c&&
(c=c.replace(/\\\n/gm,"\n"),c=c.replace(/\\\r/gm,"\r"))});if(d)throw d;return c}function r(){if(!window.cadesplugin_skip_extension_install){var a=document.createElement("div");a.id="cadesplugin_ovr";a.style="visibility: hidden; position: fixed; left: 0px; top: 0px; width:100%; height:100%; background-color: rgba(0,0,0,0.7)";a.innerHTML="<div id='cadesplugin_ovr_item' style='position:relative; width:400px; margin:100px auto; background-color:#fff; border:2px solid #000; padding:10px; text-align:center; opacity: 1; z-index: 1500'><button id='cadesplugin_close_install' style='float: right; font-size: 10px; background: transparent; border: 1; margin: -5px'>X</button><p>\u0414\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u041a\u0440\u0438\u043f\u0442\u043e\u041f\u0440\u043e \u042d\u0426\u041f Browser plugin \u043d\u0430 \u0434\u0430\u043d\u043d\u043e\u043c \u0441\u0430\u0439\u0442\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0435 \u0434\u043b\u044f \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0430. \u0423\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044c, \u0447\u0442\u043e \u043e\u043d\u043e \u0443 \u0412\u0430\u0441 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u043e \u0438\u043b\u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 \u0435\u0433\u043e.<p><a href='/resources/cryptopro/firefox_cryptopro_extension_latest.xpi'>\u0421\u043a\u0430\u0447\u0430\u0442\u044c \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0435</a></p><p>\u0414\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0432 Firefox \u0432\u0435\u0440\u0441\u0438\u0438 52 \u0438 \u0432\u044b\u0448\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c <a href='/resources/cryptopro/firefox_cryptopro_extension_latest.xpi'>\u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0435 \u0434\u043b\u044f \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0430</a>.</p></div>";
document.getElementsByTagName("Body")[0].appendChild(a);document.getElementById("cadesplugin_close_install").addEventListener("click",function(){y("\u041f\u043b\u0430\u0433\u0438\u043d \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d");document.getElementById("cadesplugin_ovr").style.visibility="hidden"});a.addEventListener("click",function(){y("\u041f\u043b\u0430\u0433\u0438\u043d \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d");document.getElementById("cadesplugin_ovr").style.visibility=
"hidden"});a.style.visibility="visible"}}function m(){window.cadesplugin_skip_extension_install?y("\u041f\u043b\u0430\u0433\u0438\u043d \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d"):document.addEventListener("DOMContentLoaded",function(){var a=document.createElement("div");a.id="cadesplugin_ovr";a.style="visibility: hidden; position: fixed; left: 0px; top: 0px; width:100%; height:100%; background-color: rgba(0,0,0,0.7)";a.innerHTML="<div id='cadesplugin_ovr_item' style='position:relative; width:400px; margin:100px auto; background-color:#fff; border:2px solid #000; padding:10px; text-align:center; opacity: 1; z-index: 1500'><button id='cadesplugin_close_install' style='float: right; font-size: 10px; background: transparent; border: 1; margin: -5px'>X</button><p>\u0414\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u041a\u0440\u0438\u043f\u0442\u043e\u041f\u0440\u043e \u042d\u0426\u041f Browser plugin \u043d\u0430 \u0434\u0430\u043d\u043d\u043e\u043c \u0441\u0430\u0439\u0442\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0435 \u0438\u0437 \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0430 \u0434\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0439 Opera.<p><button id='cadesplugin_install' style='font:12px Arial'>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0435</button></p></div>";
document.getElementsByTagName("Body")[0].appendChild(a);document.getElementById("cadesplugin_install").addEventListener("click",function(a){opr.addons.installExtension("epebfcehmdedogndhlcacafjaacknbcm",function(){document.getElementById("cadesplugin_ovr").style.visibility="hidden";location.reload()},function(){})});document.getElementById("cadesplugin_close_install").addEventListener("click",function(){y("\u041f\u043b\u0430\u0433\u0438\u043d \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d");
document.getElementById("cadesplugin_ovr").style.visibility="hidden"});a.addEventListener("click",function(){y("\u041f\u043b\u0430\u0433\u0438\u043d \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d");document.getElementById("cadesplugin_ovr").style.visibility="hidden"});a.style.visibility="visible";document.getElementById("cadesplugin_ovr_item").addEventListener("click",function(a){a.stopPropagation()})})}function p(){cpcsp_chrome_nmcades.check_chrome_plugin(I,y)}function x(){window.postMessage("cadesplugin_echo_request",
"*");window.addEventListener("message",function(a){if("string"==typeof a.data&&a.data.match("cadesplugin_loaded"))if(Q||S){a=a.data.substring(a.data.indexOf("url:")+4);var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("src",a);b.onerror=y;b.onload=p;document.getElementsByTagName("head")[0].appendChild(b);J++}else cpcsp_chrome_nmcades.check_chrome_plugin(I,y)},!1)}function E(){if(Q||S)x();else{var a=document.createElement("script");a.setAttribute("type",
"text/javascript");a.setAttribute("src","chrome-extension://iifchhfnnmpdbibifmljnfjhpififfog/nmcades_plugin_api.js");a.onerror=y;a.onload=x;document.getElementsByTagName("head")[0].appendChild(a);a=document.createElement("script");a.setAttribute("type","text/javascript");a.setAttribute("src","chrome-extension://epebfcehmdedogndhlcacafjaacknbcm/nmcades_plugin_api.js");a.onerror=y;a.onload=x;document.getElementsByTagName("head")[0].appendChild(a)}}function G(){var a=document.createElement("object");
a.setAttribute("id","cadesplugin_object");a.setAttribute("type","application/x-cades");a.setAttribute("style","visibility: hidden");document.getElementsByTagName("body")[0].appendChild(a);z=document.getElementById("cadesplugin_object");e()&&(a=document.createElement("object"),a.setAttribute("id","certEnrollClassFactory"),a.setAttribute("classid","clsid:884e2049-217d-11da-b2a4-000e7bbb2b09"),a.setAttribute("style","visibility: hidden"),document.getElementsByTagName("body")[0].appendChild(a),a=document.createElement("object"),
a.setAttribute("id","webClassFactory"),a.setAttribute("classid","clsid:B04C8637-10BD-484E-B0DA-B8A039F60024"),a.setAttribute("style","visibility: hidden"),document.getElementsByTagName("body")[0].appendChild(a))}function I(){B=1;O?P():window.postMessage("cadesplugin_loaded","*")}function y(a){if(g()){J++;if(2>J)return;if(N&&("undefined"==typeof a||"object"==typeof a)){m();return}}if("undefined"==typeof a||"object"==typeof a)a="\u041f\u043b\u0430\u0433\u0438\u043d \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d";
B=1;O?u(a):window.postMessage("cadesplugin_load_error","*")}function M(){1!=B&&(Q&&r(),B=1,O?u("\u0418\u0441\u0442\u0435\u043a\u043b\u043e \u0432\u0440\u0435\u043c\u044f \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043f\u043b\u0430\u0433\u0438\u043d\u0430"):window.postMessage("cadesplugin_load_error","*"))}function L(){try{k("CAdESCOM.About"),I()}catch(a){document.getElementById("cadesplugin_object").style.display="none";var b=navigator.mimeTypes["application/x-cades"];
b?b.enabledPlugin?y("\u041f\u043b\u0430\u0433\u0438\u043d \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d, \u043d\u043e \u043d\u0435 \u0441\u043e\u0437\u0434\u0430\u044e\u0442\u0441\u044f \u043e\u0431\u044c\u0435\u043a\u0442\u044b"):y("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u043f\u043b\u0430\u0433\u0438\u043d\u0430"):y("\u041f\u043b\u0430\u0433\u0438\u043d \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d")}}function C(){var a=
document.createElement("div");a.innerHTML="\x3c!--[if lt IE 9]><iecheck></iecheck><![endif]--\x3e";1==a.getElementsByTagName("iecheck").length?y("Internet Explorer \u0432\u0435\u0440\u0441\u0438\u0438 8 \u0438 \u043d\u0438\u0436\u0435 \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f"):document.all&&(!document.documentMode||document.documentMode&&8>=document.documentMode)?y("Internet Explorer \u0432\u0435\u0440\u0441\u0438\u0438 8 \u0438 \u043d\u0438\u0436\u0435 \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f"):
g()?E():O?"complete"===document.readyState?(G(),L()):window.addEventListener("load",function(a){G();L()},!1):window.addEventListener("message",function(a){"cadesplugin_echo_request"==a.data&&(G(),L())},!1)}function K(a){z=a}if(!window.cadesplugin){var z,B=0,u,P,N=0,Q=0,S=0,J=0,O=!!window.Promise,n;n=O?new Promise(function(a,b){P=a;u=b}):{};var H=a(),R={callbacksCount:1,callbacks:{},resultForCallback:function(a,b){var c=R.callbacks[a];c&&c.apply(null,b)},call:function(a,b,c){var d=c&&"function"==typeof c,
e=d?R.callbacksCount++:0;d&&(R.callbacks[e]=c);c=document.createElement("IFRAME");d=["_CPNP_handle"];try{c.setAttribute("src","cpnp-js-call:"+a+":"+e+":"+encodeURIComponent(JSON.stringify(b,d)))}catch(f){alert(f)}document.documentElement.appendChild(c);c.parentNode.removeChild(c)}};n.JSModuleVersion="2.1.0";n.async_spawn=d;n.set=K;n.set_log_level=c;n.getLastError=l;g()&&(n.CreateObjectAsync=q);g()||(n.CreateObject=k);window.cadesplugin_load_timeout?setTimeout(M,window.cadesplugin_load_timeout):setTimeout(M,
2E6);n.CAPICOM_LOCAL_MACHINE_STORE=1;n.CAPICOM_CURRENT_USER_STORE=2;n.CADESCOM_LOCAL_MACHINE_STORE=1;n.CADESCOM_CURRENT_USER_STORE=2;n.CADESCOM_CONTAINER_STORE=100;n.CAPICOM_MY_STORE="My";n.CAPICOM_STORE_OPEN_MAXIMUM_ALLOWED=2;n.CAPICOM_CERTIFICATE_FIND_SUBJECT_NAME=1;n.CADESCOM_XML_SIGNATURE_TYPE_ENVELOPED=0;n.CADESCOM_XML_SIGNATURE_TYPE_ENVELOPING=1;n.CADESCOM_XML_SIGNATURE_TYPE_TEMPLATE=2;n.XmlDsigGost3410UrlObsolete="http://www.w3.org/2001/04/xmldsig-more#gostr34102001-gostr3411";n.XmlDsigGost3411UrlObsolete=
"http://www.w3.org/2001/04/xmldsig-more#gostr3411";n.XmlDsigGost3410Url="urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr34102001-gostr3411";n.XmlDsigGost3411Url="urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr3411";n.CADESCOM_CADES_DEFAULT=0;n.CADESCOM_CADES_BES=1;n.CADESCOM_CADES_T=5;n.CADESCOM_CADES_X_LONG_TYPE_1=93;n.CADESCOM_ENCODE_BASE64=0;n.CADESCOM_ENCODE_BINARY=1;n.CADESCOM_ENCODE_ANY=-1;n.CAPICOM_CERTIFICATE_INCLUDE_CHAIN_EXCEPT_ROOT=0;n.CAPICOM_CERTIFICATE_INCLUDE_WHOLE_CHAIN=1;n.CAPICOM_CERTIFICATE_INCLUDE_END_ENTITY_ONLY=
2;n.CAPICOM_CERT_INFO_SUBJECT_SIMPLE_NAME=0;n.CAPICOM_CERT_INFO_ISSUER_SIMPLE_NAME=1;n.CAPICOM_CERTIFICATE_FIND_SHA1_HASH=0;n.CAPICOM_CERTIFICATE_FIND_SUBJECT_NAME=1;n.CAPICOM_CERTIFICATE_FIND_ISSUER_NAME=2;n.CAPICOM_CERTIFICATE_FIND_ROOT_NAME=3;n.CAPICOM_CERTIFICATE_FIND_TEMPLATE_NAME=4;n.CAPICOM_CERTIFICATE_FIND_EXTENSION=5;n.CAPICOM_CERTIFICATE_FIND_EXTENDED_PROPERTY=6;n.CAPICOM_CERTIFICATE_FIND_APPLICATION_POLICY=7;n.CAPICOM_CERTIFICATE_FIND_CERTIFICATE_POLICY=8;n.CAPICOM_CERTIFICATE_FIND_TIME_VALID=
9;n.CAPICOM_CERTIFICATE_FIND_TIME_NOT_YET_VALID=10;n.CAPICOM_CERTIFICATE_FIND_TIME_EXPIRED=11;n.CAPICOM_CERTIFICATE_FIND_KEY_USAGE=12;n.CAPICOM_DIGITAL_SIGNATURE_KEY_USAGE=128;n.CAPICOM_PROPID_ENHKEY_USAGE=9;n.CAPICOM_OID_OTHER=0;n.CAPICOM_OID_KEY_USAGE_EXTENSION=10;n.CAPICOM_EKU_CLIENT_AUTH=2;n.CAPICOM_EKU_SMARTCARD_LOGON=5;n.CAPICOM_EKU_OTHER=0;n.CAPICOM_AUTHENTICATED_ATTRIBUTE_SIGNING_TIME=0;n.CADESCOM_AUTHENTICATED_ATTRIBUTE_DOCUMENT_NAME=1;n.CADESCOM_AUTHENTICATED_ATTRIBUTE_DOCUMENT_DESCRIPTION=
2;n.CADESCOM_ATTRIBUTE_OTHER=-1;n.CADESCOM_STRING_TO_UCS2LE=0;n.CADESCOM_BASE64_TO_BINARY=1;n.CADESCOM_DISPLAY_DATA_NONE=0;n.CADESCOM_DISPLAY_DATA_CONTENT=1;n.CADESCOM_DISPLAY_DATA_ATTRIBUTE=2;n.CADESCOM_ENCRYPTION_ALGORITHM_RC2=0;n.CADESCOM_ENCRYPTION_ALGORITHM_RC4=1;n.CADESCOM_ENCRYPTION_ALGORITHM_DES=2;n.CADESCOM_ENCRYPTION_ALGORITHM_3DES=3;n.CADESCOM_ENCRYPTION_ALGORITHM_AES=4;n.CADESCOM_ENCRYPTION_ALGORITHM_GOST_28147_89=25;n.CADESCOM_HASH_ALGORITHM_SHA1=0;n.CADESCOM_HASH_ALGORITHM_MD2=1;n.CADESCOM_HASH_ALGORITHM_MD4=
2;n.CADESCOM_HASH_ALGORITHM_MD5=3;n.CADESCOM_HASH_ALGORITHM_SHA_256=4;n.CADESCOM_HASH_ALGORITHM_SHA_384=5;n.CADESCOM_HASH_ALGORITHM_SHA_512=6;n.CADESCOM_HASH_ALGORITHM_CP_GOST_3411=100;n.CADESCOM_HASH_ALGORITHM_CP_GOST_3411_2012_256=101;n.CADESCOM_HASH_ALGORITHM_CP_GOST_3411_2012_512=102;n.LOG_LEVEL_DEBUG=4;n.LOG_LEVEL_INFO=2;n.LOG_LEVEL_ERROR=1;n.current_log_level=n.LOG_LEVEL_ERROR;window.cadesplugin=n;C()}})();Ext.define("Application.components.timezoneCombo",{extend:"Ext.form.ComboBox",initComponent:function(){var a=getTimezonesStore();Ext.apply(this,{hiddenName:"timezone",valueField:"phptz",displayField:"name",store:a,value:"Europe/Moscow",mode:"local",typeAhead:!0,minChars:3,forceSelection:!0,triggerAction:"all",editable:!0,selectOnFocus:!1,listeners:{afterrender:function(){ensureStoreLoaded(a,function(a){this.isDestroyed||this.destroying||this.setValue("Europe/Moscow")},this)}}});Application.components.timezoneCombo.superclass.initComponent.call(this)}});Ext.define("Application.components.searchToolbar",{extend:"Ext.panel.Panel",searchHelp:"\u0411\u044b\u0441\u0442\u0440\u044b\u0439 \u043f\u043e\u0438\u0441\u043a",searchText:"\u0418\u0441\u043a\u0430\u0442\u044c",eventTarget:null,advancedSearch:null,advancedSearchText:"\u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u043d\u044b\u0439 \u043f\u043e\u0438\u0441\u043a",advancedSearchParams:null,advancedSearchActive:!1,advancedSearchOnly:!1,itemsAlign:"left",items:null,itemsBottom:null,border:!0,searchTools:null,
initComponent:function(){var a=this,b=Ext.id(),c=Ext.id(),d=Ext.id(),e=Ext.id(),f=!1,g=this.items,k=this.itemsBottom;this.ids={search_field:Ext.id(),extended_search:Ext.id(),extended_button:Ext.id()};var h=function(){var b;b=this.eventTarget?this.eventTarget:this;var c=a.getValues();a.advancedSearchOnly?b.fireEvent("search",c.advancedValues):b.fireEvent("search",c.query,c.advancedActive?c.advancedValues:{})};this.border||(this.bodyCssClass="cleanborder");Ext.apply(this,{layout:"auto",frame:!1,cls:"x-panel-mc",
style:"padding: 0px",defaults:{border:!1,frame:!1,cls:"cleanborder"},items:[],doSearch:h});this.advancedSearchOnly||this.items.push({layout:"hbox",xtype:"toolbar",items:[{xtype:"container",flex:1,height:20,id:b,layout:"anchor",items:[{xtype:"textfield",anchor:"100%",id:this.ids.search_field,emptyText:this.searchHelp,enableKeyEvents:!0,stateful:this.state_id?!0:!1,stateId:this.state_id?this.state_id:null,stateEvents:["select","change","blur"],getState:function(){return{value:this.getValue()}},listeners:{change:function(a){a.updateCleaner()},
staterestore:function(a){a.updateCleaner()},afterrender:function(a){a.updateCleaner()},blur:function(a){a.updateCleaner()},keydown:function(a,b){a.updateCleaner();b.getKey()==b.ENTER&&Ext.getCmp(c).handler.call(this)},scope:this},setValue:function(a){Ext.form.TextField.superclass.setValue.call(this,a);this.updateCleaner()},updateCleaner:function(){var a=Ext.get(e);if(a){var b=this.getValue();b&&!f?(a.fadeIn(0.5),f=!0):!b&&f&&(a.fadeOut(0.5),f=!1)}else this.updateCleaner.defer(500,this)}}]},{text:this.searchText,
id:c,style:"padding-left: 2px",handler:h,cls:"x-btn-text-icon",icon:"ico/search.png",scope:this}]});this.advancedSearch?(this.advancedSearchDefaults=this.advancedSearchDefaults||{},Ext.apply(this.advancedSearchDefaults,{},{clearValue:this.itemClearValue}),b=this.renderSearchForm(),b.buttonAlign=this.advancedSearchButtonAlign?this.advancedSearchButtonAlign:"center",b.id=this.ids.extended_search,b.items.push({xtype:"button",hidden:!0,type:"submit",scope:this,handler:h}),b.keys=[{key:[Ext.EventObject.ENTER],
scope:this,handler:h}],b.buttons=[{text:this.searchText,handler:h,scope:this},{text:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u043f\u043e\u0438\u0441\u043a",scope:this,id:this.resetButton?this.resetButton:Ext.id(),handler:function(){var b=Ext.getCmp(this.ids.extended_search);b&&cleanFormItems(b);if(b=Ext.getCmp(a.basis_for_single_supplier))b.setValue(null),b.hide();(b=Ext.getCmp(this.ids.search_field))&&b.setValue("");h.call(this);a.fireEvent("clear")}}],this.items.push({id:d,layout:"form",
hidden:!this.advancedSearchActive,items:[{xtype:"fieldset",title:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043f\u043e\u0438\u0441\u043a\u0430",cls:"spaced-fieldset",style:"padding-bottom: 0",items:[b]}]}),this.advancedSearchOnly||this.items[0].items.push({text:this.advancedSearchText,enableToggle:!0,id:this.ids.extended_button,cls:"x-btn-text-icon",icon:"ico/settings1.png",pressed:this.advancedSearchActive,listeners:{toggle:function(b,c){var e=
Ext.getCmp(d);e&&(a.eventTarget&&a.eventTarget.fireEvent("statechanged"),c!=a.advancedSearchActive&&(c?e.show():e.hide(),a.fireEvent("resize"),a.eventTarget&&a.eventTarget.doLayout()),a.advancedSearchActive=c)}}})):this.advancedSearchActive=!1;g&&("left"==this.itemsAlign?this.items[0].items.unshift.apply(this.items[0].items,g):this.items[0].items.push.apply(this.items[0].items,g),g=null);this.searchTools=this.searchTools||[];this.searchTools.push({id:"close",align:"right",hidden:!0,handler:function(){Ext.getCmp(a.ids.search_field).setValue(null)},
tip:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u043f\u043e\u043b\u0435",toolId:e});if(this.searchTools&&this.searchTools.length)this.on("afterrender",function(){var a=Ext.getCmp(this.ids.search_field),b=[];a&&(a.on("afterrender",function(){for(var c=a.getEl(),d=0,e=0,f=0;f<this.searchTools.length;f++){var g=this.searchTools[f],k="left"==g.align?!0:!1,h={tag:"div",cls:["x-search-tool-"+(k?"left":"right"),"x-tool","x-tool-"+g.id].join(" ")};g.tip&&(h["ext:qtip"]=g.tip);g.toolId&&(h.id=g.toolId);
g.extra&&Ext.apply(h,g.extra);g.hidden&&(h.style="visibility: hidden; "+(h.style||""));k&&0<d?h.style="left: "+17*d+"px; "+(h.style||""):0<e&&(h.style="right: "+19*e+"px; "+(h.style||""));h=c.insertSibling(h,k?"after":"before");b.push(h);if(g.handler)h.on("click",g.handler,g.scope||this);k?d++:e++}0<d&&c.setStyle("padding-left",17*d+5+"px");0<e&&c.setStyle("padding-right",19*e+5+"px")},this,{single:!0}),a.on("destroy",function(){for(var a=0;a<b.length;a++)b[a].remove();b=[];this.searchTools=[]},this,
{single:!0}))},this,{single:!0});k&&this.items.push(k);Application.components.searchToolbar.superclass.initComponent.call(this)},renderSearchForm:function(){var a=this.advancedSearch,b=this.advancedSearchParams||{},c=b.columns||2,d,e;if(this.advancedSearchDefaults)for(d=a.length-1;0<=d;d--)Ext.apply(a[d],{},this.advancedSearchDefaults);var f={xtype:"panel",autoHeight:!0,layout:"column",cls:"cleanborder",bodyCssClass:"cleanborder",anchor:"-30",defaults:{layout:"form",border:!1,xtype:"panel",cls:"cleanborder",
bodyCssClass:"cleanborder",defaultType:"textfield",labelWidth:b.labelWidth||140},items:[]};for(d=0;d<c-1;d++)f.items.push({bodyStyle:"padding:1px 18px 0 0",columnWidth:1/c-0.1/(c-1),items:[]});f.items.push({columnWidth:1/c+(1<c?0.1:0),items:[]});for(d=0;d<a.length;d++)if(b=d%c,e=a[d]){"submit"==e.type?b=0:(e.anchor="undefined"!=typeof e.anchor?e.anchor:"100%",e.fieldLabel="<b>"+e.fieldLabel+"</b>");if(e.xtype&&0<e.xtype.indexOf("interval")){for(var g=Ext.apply({},e),k="id name fieldLabel fromText tillText labelStyle tillAlign fromValue tillValue".split(" "),
h=g.tillAlign,l=0;l<k.length;l++)delete g[k[l]];g.xtype=e.xtype.replace("interval",e.intervalType||"field");e={layout:"column",border:!1,cls:"cleanborder",bodyCssClass:"cleanborder",xtype:"panel",defaults:{layout:"form",border:!1,bodyCssClass:"cleanborder",xtype:"panel",labelWidth:f.defaults.labelWidth},items:[{items:[{width:100,name:e.name?e.name+"_from":void 0,id:e.id?e.id+"_from":void 0,format:e.format||"d.m.Y",fieldLabel:"<b>"+e.fieldLabel+" "+(e.fromText||"\u0441")+"</b>",value:e.fromValue,stateful:e.state_id?
!0:!1,stateId:e.state_id?e.state_id+"_from":null,stateEvents:e.state_id?["select","change","blur"]:null,getState:function(){return{value:this.getValue()}},reset:function(){this.setValue(null);this.fireEvent("change")}}]},{labelWidth:35,items:[{xtype:g.xtype,width:100,name:e.name?e.name+"_till":void 0,id:e.id?e.id+"_till":void 0,format:e.format||"d.m.Y",fieldLabel:"<b>"+(e.tillText||"\u043f\u043e")+"</b>",labelStyle:"text-align: right;",value:e.tillValue,stateful:e.state_id?!0:!1,stateId:e.state_id?
e.state_id+"_till":null,stateEvents:e.state_id?["select","change","blur"]:null,getState:function(){return{value:this.getValue()}},reset:function(){this.setValue(null);this.fireEvent("change")}}]}]};"date"==h&&(e.items[1].items[0].listeners={select:function(a,b){b.setHours(23,59);a.setValue(b)}});Ext.apply(e.items[0].items[0],g);Ext.apply(e.items[1].items[0],g)}f.items[b].items.push(e)}return f},itemClearValue:function(){this.reset();"undefined"!=typeof this.defaultValue?this.setValue(this.defaultValue):
"undefined"!=typeof this.initialConfig.value&&this.setValue(this.initialConfig.value);this.fireEvent("change")},getValues:function(){var a={advancedActive:!!this.advancedSearchActive},b=this.ids.search_field?Ext.getCmp(this.ids.search_field):null;b&&(a.query=b.getValue());if(b=this.ids.extended_search?Ext.getCmp(this.ids.extended_search):null)a.advancedValues={},collectComponentValues(b,a.advancedValues);return a},setValues:function(a){var b=this.ids.search_field?Ext.getCmp(this.ids.search_field):
null;b&&b.setValue(a.query?a.query:void 0);(b=this.ids.extended_search?Ext.getCmp(this.ids.extended_search):null)&&setComponentValues(b,a.advancedValues);(b=this.ids.extended_button?Ext.getCmp(this.ids.extended_button):null)&&b.toggle(a.advancedActive)}});Ext.define("Application.components.imageGalleryPanel",{extend:"Ext.Panel",initComponent:function(){var a=Ext.id(),b=Ext.id(),c=Ext.id();this.filePanelId=a;this.addEvents("uploadcomplete","idchanged","itemsLoaded");this.fileitems=[];Ext.isEmpty(this.files)&&(this.files=[]);Ext.isEmpty(this.withHash)&&(this.withHash=!1);var d=[];this.procedure?this.procedure_id=this.procedure:!this.parent.procedure_id||Ext.isEmpty(this.parent.procedure_id)?this.procedure_id=!1:this.procedure_id=this.parent.procedure_id;
if(this.editable){var e=new Application.components.imgUploadForm({id:b,parent:this,procedure_id:this.procedure_id,region:"north",height:165,title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044e \u0438\u043b\u0438 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"});d.push(e)}a=new Application.components.imgGalleryDataView({region:"west",title:"\u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f",
id:a,height:400,width:180,style:"padding: 0px",procedure_id:this.procedure_id,editable:this.editable});c=new Application.components.imgSingleView({id:c,region:"center",height:400,title:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f"});d.push(c);d.push(a);this.editable&&(this.relayEvents(e,["uploadcomplete"]),e.relayEvents(this,["idchanged"]),a.relayEvents(e,["uploadcomplete"]),c.relayEvents(a,["itemDeleted"]));a.relayEvents(this,
["itemsLoaded"]);c.relayEvents(a,["itemSelected"]);Ext.apply(this,{autoHeight:!0,frame:!0,name:"lot_unit_pictures",items:[{layout:"border",xtype:"panel",height:this.editable?600:430,defaults:{frame:!0,split:!0},items:d}],listeners:{idchanged:function(a){this.procedure_id=a},uploadcomplete:function(a,b){a.success&&a.procedure_id&&this.parent&&a.procedure_id!=this.parent.procedure_id&&this.parent.fireEvent("idchanged",a.procedure_id)}}});if(this.files)this.on("afterrender",function(){this.setValues(this.files)});
Application.components.imageGalleryPanel.superclass.initComponent.call(this)},setValues:function(a){if(a){for(var b=null,c=0;c<a.length;c++)b=a[c],this.fileitems.push(b);this.fireEvent("itemsLoaded",{images:this.fileitems})}},getValues:function(){return Ext.getCmp(this.filePanelId).getFileItems()}});Application.components.combo=Ext.extend(Ext.form.ComboBox,{disabledCssClass:"x-combo-list-item-unsel",hiddenCssClass:"x-hidden",tooltipTpl:!1,initComponent:function(){var a="",b="",c=this.displayField,d={compiled:!0};this.disabledField&&(a='<tpl if="'+this.disabledField+'"> '+this.disabledCssClass+"</tpl>");this.hiddenRecordField&&(b='<tpl if="'+this.hiddenRecordField+'"> '+this.hiddenCssClass+"</tpl>");this.renderer&&(c="[this.rendererFn(values)]",d.rendererFn=this.renderer);var e=" ";this.tooltipTpl&&
(e+='ext:qtip="'+this.tooltipTpl+'" ');this.tpl=new Ext.XTemplate('<tpl for="."><div'+e+'class="x-combo-list-item'+a+b+'">{'+c+"}</div></tpl>",d);Application.components.combo.superclass.initComponent.call(this);if(this.disabledField)this.on("beforeselect",function(a,b){return b.data[a.disabledField]?!1:!0});if(this.hiddenRecordField)this.on("beforeselect",function(a,b){return b.data[a.hiddenRecordField]?!1:!0})}});Application.components.addressPanel=Ext.extend(Ext.Panel,{allowBlank:!0,blankText:"\u043f\u043e\u043b\u0435 \u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e",msgTarget:"under",okato:null,index:null,region:null,city:null,street:null,fieldsToObserve:["okato","index","region","city","street"],defaults:{name:"postal"},required:!0,initComponent:function(){function a(a){"\u0420\u043e\u0441\u0441\u0438\u044f"==a||"\u0420\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0430\u044f \u0424\u0435\u0434\u0435\u0440\u0430\u0446\u0438\u044f (\u0420\u0424, \u0420\u043e\u0441\u0441\u0438\u044f)"==
a?(b.okato={ref:"okato_id",id:d.okato_block,xtype:"compositefield",fieldLabel:"\u041a\u043e\u0434 \u041e\u041a\u0410\u0422\u041e",items:[{xtype:"combo",store:createOkatoStore(),valueField:"name",displayField:"name",name:b.name+"[okato]",nameUI:b.name+"Okato",id:d.okato,typeAhead:!1,emptyText:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u041e\u041a\u0410\u0422\u041e",minChars:3,pageSize:30,hideTrigger:!0,triggerAction:"query",allowBlank:!0,fieldLabel:"\u041a\u043e\u0434 \u041e\u041a\u0410\u0422\u041e",
flex:0.9,setValue:function(a){this.constructor.prototype.setValue.apply(this,arguments);RPC.Reference.fillByOkato(a,function(a){a=a.data;Ext.getCmp(d.region).setValue(a.region);Ext.getCmp(d.city).setValue(a.city);Ext.getCmp(d.settlement).setValue(a.settlement)})},listeners:{select:function(a,b,c){a=this.getValue();RPC.Reference.fillByOkato(a,function(a){a=a.data;Ext.getCmp(d.region).setValue(a.region);Ext.getCmp(d.city).setValue(a.city);Ext.getCmp(d.settlement).setValue(a.settlement)})}}},Application.models.Procedure.getButtonSelectTreeWnd("\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043a\u043e\u0434 \u041e\u041a\u0410\u0422\u041e",
"okatoList","code","\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u041e\u041a\u0410\u0422\u041e",function(a){Ext.getCmp(d.okato).setValue(a.code)},!1)]},b.index={xtype:"textfield",name:b.name+"[index]",nameUI:b.name+"Index",id:d.index,allowBlank:!0,vtype:"digits",minLength:5,maxLength:6,fieldLabel:"\u041f\u043e\u0447\u0442\u043e\u0432\u044b\u0439 \u0438\u043d\u0434\u0435\u043a\u0441"+(this.required?REQUIRED_FIELD:"")},b.region={xtype:"combo",fieldLabel:"\u0420\u0435\u0433\u0438\u043e\u043d/\u043e\u0431\u043b\u0430\u0441\u0442\u044c"+
(this.required?REQUIRED_FIELD:""),store:createZonesStore("reg",{sokr:!0}),valueField:"name",displayField:"name",name:b.name+"[region]",nameUI:b.name+"Region",id:d.region,typeAhead:!1,emptyText:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0440\u0435\u0433\u0438\u043e\u043d/\u043e\u0431\u043b\u0430\u0441\u0442\u044c",minChars:3,pageSize:10,hideTrigger:!0,forceSelection:!0,triggerAction:"all",listeners:{select:function(){var a={region:Ext.getCmp(d.region).getValue(),city:Ext.getCmp(d.city).getValue(),
settlement:Ext.getCmp(d.settlement).getValue()};RPC.Reference.fillByRegion(a,function(a){(a=a.data)&&a.code&&Ext.getCmp(d.okato).setValue(a.code)})}}},b.city={xtype:"combo",fieldLabel:"\u0413\u043e\u0440\u043e\u0434/\u0440\u0430\u0439\u043e\u043d"+(this.required?REQUIRED_FIELD:""),store:createZonesStore("city"),mode:"remote",valueField:"name",displayField:"name",name:b.name+"[city]",nameUI:b.name+"City",id:d.city,emptyText:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0433\u043e\u0440\u043e\u0434\u0430",
minChars:3,pageSize:10,hideTrigger:!0,triggerAction:"query",listeners:{select:function(){var a={region:Ext.getCmp(d.region).getValue(),city:Ext.getCmp(d.city).getValue(),settlement:Ext.getCmp(d.settlement).getValue()};RPC.Reference.fillByRegion(a,function(a){(a=a.data)&&a.code&&Ext.getCmp(d.okato).setValue(a.code)})}}}):(b.okato=null,b.index=null,b.region={xtype:"textfield",name:b.name+"[region]",nameUI:b.name+"Region",id:d.region,allowBlank:!0,fieldLabel:"\u0420\u0435\u0433\u0438\u043e\u043d/\u043e\u0431\u043b\u0430\u0441\u0442\u044c",
minLength:2,maxLength:255},b.city={xtype:"textfield",name:b.name+"[city]",nameUI:b.name+"City",id:d.city,minLength:3,maxLength:255,fieldLabel:"\u0413\u043e\u0440\u043e\u0434/\u0440\u0430\u0439\u043e\u043d"+(this.required?REQUIRED_FIELD:"")});b.street={xtype:"textfield",name:b.name+"[street]",nameUI:b.name+"Street",id:d.street,minLength:1,maxLength:255,fieldLabel:"\u0423\u043b\u0438\u0446\u0430"+(this.required?REQUIRED_FIELD:"")}}var b=this,c="index okato region city settlement street house country_iso_nr okato_block".split(" "),
d={};this.field_ids=d;for(var e=0;e<c.length;e++)d[c[e]]=Ext.id();e={xtype:"Application.components.combo",fieldLabel:"\u0421\u0442\u0440\u0430\u043d\u0430"+(this.required?REQUIRED_FIELD:""),store:getCountriesStore(),valueField:"iso_nr",hiddenName:b.name+"[country_iso_nr]",nameUI:b.name+"CountryIsoNr",displayField:"name",name:b.name+"[country_iso_nr]",id:d.country_iso_nr,minChars:2,pageSize:10,hideTrigger:!0,forceSelection:!0,triggerAction:"all",renderer:function(a){return Ext.util.Format.countryFlag(a.alpha2||
a.alpha3||a.eng_title)+" "+a.name},listeners:{select:function(c,e,k){a(this.lastSelectionText);for(c=0;c<b.fieldsToObserve.length;c++)(e=Ext.getCmp(d[b.fieldsToObserve[c]]))&&("okato"==b.fieldsToObserve[c]?Ext.getCmp(d.okato_block)&&Ext.getCmp(d.okato_block).destroy():e.destroy());a(this.lastSelectionText);for(c=0;c<b.fieldsToObserve.length;c++)b[b.fieldsToObserve[c]]&&(e=c+1,"street"==b.fieldsToObserve[c]&&e++,b.insert(e,b[b.fieldsToObserve[c]]));b.doLayout()}}};Ext.apply(this,{defaults:{anchor:"100%",
cls:this.itemsCssClass,readOnly:this.readOnly},labelWidth:200,layout:"form",items:[e,{xtype:"textfield",name:b.name+"[settlement]",allowBlank:!0,id:d.settlement,fieldLabel:"\u041d\u0430\u0441\u0435\u043b\u0435\u043d\u043d\u044b\u0439 \u043f\u0443\u043d\u043a\u0442",minLength:2,maxLength:255},{xtype:"textfield",name:b.name+"[house]",nameUI:b.name+"House",allowBlank:!0,id:d.house,fieldLabel:"\u0414\u043e\u043c \u0438 \u043e\u0444\u0438\u0441"+(this.required?REQUIRED_FIELD:""),minLength:1,maxLength:255}],
loadData:function(a){var b=Ext.getCmp(d.country_iso_nr);if(b){var e=function(){b.setValue(a.country_iso_nr);b.fireEvent("select");for(var e=0;e<c.length;e++)if("country"!=c[e]){var k=Ext.getCmp(d[c[e]]);void 0!==a[c[e]]&&k?k.setValue(a[c[e]]):k&&"country_iso_nr"!==c[e]&&k.setValue("")}};0<=b.store.find("iso_nr",a.country_iso_nr)?e():b.store.load({callback:e,params:{query:a.country_iso_nr,queryfield:"iso_nr"}})}},getValues:function(){var a=this.values||{};Ext.isString(a)?a={}:0==a.length&&(a={});this.address_id&&
(a.id=this.address_id);for(var b=0;b<c.length;b++){var e=Ext.getCmp(d[c[b]]);e&&e.rendered&&((e=e.getValue())&&!Ext.isEmpty(e)?a[c[b]]=e:a[c[b]]=null)}return a},setValues:function(a){a.country_iso_nr=a.country_iso_nr||a.country;this.values=a;this.address_id=a.id;if(this.rendered)this.loadData(a);else this.on("afterrender",function(){this.loadData(this.values)},this,{once:!0})}});Application.components.addressPanel.superclass.initComponent.call(this);this.values&&0<this.values.length?this.setValues(this.values):
this.values={}}});Ext.define("Application.components.treeLoader",{extend:"Ext.tree.Panel",useArrows:!0,autoScroll:!0,animate:!0,containerScroll:!0,border:!1,type:null,rootName:"0",directFn:null,directSearchFn:null,textFormat:"{0} {1}",search:!1,searchHelp:"\u041f\u043e\u0438\u0441\u043a",initComponent:function(){this.addEvents("selected");this.search&&Ext.apply(this,{tbar:{xtype:"Application.components.searchToolbar",searchHelp:this.searchHelp,eventTarget:this}});Ext.apply(this,{loader:this.getTreeLoader(),rootVisible:!1,
root:{expanded:!0,id:this.rootName},listeners:{scope:this,load:function(a){this.unmask();if(a&&a.childNodes)for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];c.leaf&&(c.iconCls="icon-silk-accept");c.name=c.text;this.textFormat&&(c.text=String.format(this.textFormat,c.id,c.text))}},dblclick:function(a){a&&a.leaf&&(this.setNodeData(a),this.fireEvent("selected",a))},render:function(){this.mask("\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430")}}});if(this.selection)this.on("afterrender",
function(){this.selectPath(this.selection.path)},this,{once:!0});Application.components.treeLoader.superclass.initComponent.call(this);this.on("search",this.searchHandler,this)},searchHandler:function(a){var b=this.type+"Search",b=this.directSearchFn?this.directSearchFn:RPC.Reference[b];if(!Ext.isDefined(b)||!Ext.isFunction(b))throw"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u043f\u043e\u0438\u0441\u043a\u0430 \u043f\u043e \u0434\u0435\u0440\u0435\u0432\u0443";
if(a){var c=this.getSelectedObject(),c=c?c.id:null;this.mask("\u041f\u043e\u0438\u0441\u043a\u2026");b([a,c],function(a){this.unmask();a.success&&a.result&&(this.selectPath(a.result),a.message="\u0414\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0433\u043e \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0435\u0433\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043a\u043d\u043e\u043f\u043a\u0443 \u00ab\u0418\u0441\u043a\u0430\u0442\u044c\u00bb \u0435\u0449\u0435 \u0440\u0430\u0437");
(new Ext.QuickTip({html:a.message||"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0448\u043b\u043e\u0441\u044c"})).showBy(this.getTopToolbar().getEl())}.createDelegate(this))}},getTreeLoader:function(){var a=this.directFn?this.directFn:RPC.Reference[this.type];if(!Ext.isDefined(a)||!Ext.isFunction(a))throw"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u043f\u043e\u0438\u0441\u043a\u0430 \u043f\u043e \u0434\u0435\u0440\u0435\u0432\u0443";
return new Ext.tree.TreeLoader({directFn:function(b,c){a({node:b,type:this.type},c)}.createDelegate(this),baseParams:{type:this.type,for_combo:!1}})},setNodeData:function(a){if(a){for(var b=a.name,c=a.parentNode;c&&this.rootName!==c.id;)b=c.name+" - "+b,c=c.parentNode;a.full_name=b;a.path=a.getPath()}},mask:function(a){this.getEl().mask(a,"x-mask-loading x-move-down")},unmask:function(){this.getEl().unmask()},getSelectedObject:function(){var a=this.getSelectionModel().getSelectedNode();a&&this.setNodeData(a);
return a}});Ext.define("Application.components.keyValuePanel",{extend:"Ext.form.FieldSet",cls:"keyvalue-panel-table",hideBorders:!0,noValueText:"\u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e",captionCls:"th",initComponent:function(){this.fieldKeys=[];Ext.isObject(this.fields)||(this.fields={});if(Ext.isObject(this.templates))for(var a in this.templates)Ext.isString(this.templates[a])&&(this.templates[a]=new Ext.XTemplate(this.templates[a]));else this.templates={};this.initValues();this.addEvents("dataload");
this.doFields();this.on("render",function(){var a=this.getValues();this.setValues(a)});this.data&&this.loadData(this.data);Application.components.keyValuePanel.superclass.initComponent.call(this)},doFields:function(){void 0===this.items&&(this.items=[]);for(var a in this.fields)if(this.fields.hasOwnProperty(a)&&void 0===this.fieldKeys[a])if(this.fieldKeys[a]=1,null!=this.fields[a]&&this.fields[a].xtype)this.rendered?this.add(this.fields[a]):this.items.push(this.fields[a]);else{var b={xtype:"panel",
key:a+"-row",layout:"table",cls:"spaced-bottom-shallow",defaultType:"label",layoutConfig:{columns:2},items:[{key:a+"-caption",cellCls:this.captionCls,html:this.formatTitle(t(this.fields[a]))},{key:a}]};this.rendered?this.add(b):this.items.push(b)}this.rendered&&this.doLayout()},loadData:function(a){this.fireEvent("dataload",a);this.setValues(a);return this},initValues:function(){void 0!==this.values?this.setValues(this.values):this.values={}},getValues:function(){return this.values||{}},getStoreValues:function(){return this.store_values||
{}},setValues:function(a){this.store_values=a;if(Ext.isObject(a))for(var b in this.fields)this.setValue(b,a);return this},setValue:function(a,b){if(this.fields.hasOwnProperty(a))if(Ext.isEmpty(b[a])&&(!this.fieldsShowAlways||0>this.fieldsShowAlways.indexOf(a))){if(this.rendered){var c=this.items.find(function(b){return b.key==a+"-row"});c&&c.hide()}}else if(Ext.isEmpty(b[a])||!1===b[a]?this.values[a]="":this.values[a]=b[a],this.rendered&&(c=this.items.find(function(b){return b.key==a+"-row"}))){var d=
c.getComponent(1);if(d){var e=this.formatValue(a,this.values);d.setText(e,!1)}c.show()}},setValueByField:function(a){Ext.isObject(this.store_values)&&this.setValue(a,this.store_values)},getDataByField:function(a){if(Ext.isObject(this.store_values))return this.store_values[a]},formatTitle:function(a){return a&&0<a.length&&":"!==a.charAt(a.length-1)?a+":":a},formatValue:function(a,b){var c=b[a];Ext.isObject(c)&&(c="",Ext.iterate(b[a],function(a,b){c+=" "+b}));if(!Ext.isEmpty(c)||this.fieldsShowAlways&&
0<=this.fieldsShowAlways.indexOf(a))this.templates&&this.templates[a]?c=Ext.isFunction(this.templates[a])?this.templates[a](c,this):this.templates[a].apply(this.values):Ext.isDate(c)&&(c=Ext.util.Format.localDateText(c));Ext.isEmpty(c)&&(c=this.noValueText);return c+""},hideKey:function(a){var b=!1;this.items.each(function(c){if(c.key==a+"-row"||c.key==a)b=!0,c.hide()});b&&this.doLayout()},hideKeyForced:function(a){var b=!1;this.items.each(function(c){if(c.key==a+"-row"||c.key==a)b=!0,c.getComponent(0).hide(),
c.getComponent(1).hide()});b&&this.doLayout()}});Ext.define("Application.components.basicLotGrid",{extend:"Ext.grid.GridPanel",initComponent:function(){var a=this.procedure_id,b=getLotStore(a);Ext.apply(this,{store:b,columns:[{header:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430",width:200,dataIndex:"subject"},{header:"\u041d\u0430\u0447.\u043c\u0430\u043a\u0441.\u0446\u0435\u043d\u0430",width:70,dataIndex:"start_price"},{header:"\u0420\u0430\u0437\u043c\u0435\u0440 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f",
width:70,dataIndex:"guarantee_application"},{header:"\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0438",dataIndex:"lot_customers",width:300},{header:"\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u0438",xtype:"textactioncolumn",items:[{tooltip:"\u041f\u043e\u0434\u0430\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443 \u043d\u0430 \u0443\u0447\u0430\u0441\u0442\u0438\u0435",text:"\u041f\u043e\u0434\u0430\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443 \u043d\u0430 \u0443\u0447\u0430\u0441\u0442\u0438\u0435",
href:function(b,d,e){return String.format("#com/applic/create/lot/{0}/procedure/"+a,e.get("id"))}}]}]});Application.components.basicLotGrid.superclass.initComponent.call(this)}});Ext.define("Application.components.okvedField",{extend:"Application.components.autocompleteField",emptyText:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u043b\u0438 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0438\u0437 \u041e\u041a\u0412\u042d\u0414",initComponent:function(){this.directFn=RPC.Reference.okvedSearch;this.storeValueField="okved";Application.components.okvedField.superclass.initComponent.call(this)}});Ext.define("Application.components.cmpDataPanel",{extend:"Ext.form.FieldSet",title:"\u0421\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u043e \u0437\u0430\u044f\u0432\u0438\u0442\u0435\u043b\u0435",autoHeight:!0,initComponent:function(){Ext.apply(this,{labelWidth:300,layout:"form",defaults:{anchor:"100%",defaults:{border:!1,anchor:"100%",allowBlank:!1}},items:[{xtype:"textfield",name:"full_name",readOnly:!0,style:"background: transparent; border: none;",value:this.cmpData.full_name,fieldLabel:"\u041f\u043e\u043b\u043d\u043e\u0435 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438"},
{xtype:"textfield",readOnly:!0,name:"inn",style:"background: transparent; border: none;",value:this.cmpData.inn,fieldLabel:"\u0418\u041d\u041d"},{xtype:"textfield",readOnly:!0,name:"kpp",style:"background: transparent; border: none;",value:this.cmpData.kpp,fieldLabel:"\u041a\u041f\u041f"},{xtype:"textfield",readOnly:!0,name:"legal_address",style:"background: transparent; border: none;",value:this.cmpData.legal_address,fieldLabel:"\u042e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0430\u0434\u0440\u0435\u0441"},
{xtype:"textfield",readOnly:!0,name:"postal_address",style:"background: transparent; border: none;",value:this.cmpData.postal_address,fieldLabel:"\u041f\u043e\u0447\u0442\u043e\u0432\u044b\u0439 \u0430\u0434\u0440\u0435\u0441"},{xtype:this.noneditable?"textfield":"Application.components.phonePanel",noneditable:this.noneditable,readOnly:this.noneditable?!0:!1,style:this.noneditable?"background: transparent; border: none;":"",name:"phone",id:"phone",value:this.cmpData.phone,allowBlank:!0,fieldLabel:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u044b\u0439 \u0442\u0435\u043b\u0435\u0444\u043e\u043d"},
{xtype:"hidden",name:"contragent_id",value:this.cmpData.id}]});Application.components.cmpDataPanel.superclass.initComponent.call(this)}});/*
 (c) 2011, by Rob Boerman
 @date      20. May 2011
 @version   1.0

 Example:

 var userCombo = new Ext.ComboBox({
 id: 'myCombo',
 valueField:'id',
 displayField:'name',
 store: ...
 });

 We need a unique id for the grid, either create one yourself or let Ext create it for you

 var gridId = Ext.id();

 Create the grid

 var todoGrid = new Ext.grid.EditorGridPanel({
 store: myStore,
 id: gridId,                     // Be sure to include the grid id
 cm: new Ext.grid.ColumnModel({
 columns: [{
 id: 'todo',
 header: 'Todo',
 dataIndex: 'todo'
 },{
 id: 'owner',
 width: 150,
 header: 'Assignee',
 dataIndex: 'owner',
 xtype: 'combocolumn',   // Use the custom column or use the column's render manually
 editor: userCombo,      // The custom column needs a ComboBox editor to be able to render the displayValue, without it just renders value
 gridId: gridId          // Don't forget to specify the grid's id, the columns renderer needs it
 }]
 }),
 clicksToEdit: 1
 });

 @license Ext.ux.grid.ComboColumn is licensed under the terms of
 the Open Source LGPL 3.0 license.  Commercial use is permitted to the extent
 that the code/component(s) do NOT become part of another Open Source or Commercially
 licensed development library or toolkit without explicit permission.



 License details: <a href="http://www.gnu.org/licenses/lgpl.html" target="_blank">http://www.gnu.org/licenses/lgpl.html</a>

*/
Ext.ns("Ext.ux.renderer","Ext.ux.grid");Ext.ux.grid.ComboColumn=Ext.extend(Ext.grid.Column,{gridId:void 0,constructor:function(a){Ext.ux.grid.ComboColumn.superclass.constructor.call(this,a);this.renderer=this.editor&&this.editor.triggerAction?Ext.ux.renderer.ComboBoxRenderer(this.editor,this.gridId):function(a){return a}}});Ext.grid.Column.types.combocolumn=Ext.ux.grid.ComboColumn;
Ext.ux.renderer.ComboBoxRenderer=function(a,b){return function(c){if(0==a.store.getCount()&&b)return c;var d=a.store.find(a.valueField,c);c=(d=a.store.getAt(d))?d.get(a.displayField):c;return c}};var CryptoPlugin={},eds=function(){function a(a){switch(navigator.appName){case "Microsoft Internet Explorer":z=!1;try{var b=new ActiveXObject(a)}catch(c){return Ext.MessageBox.alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u041a\u0440\u0438\u043f\u0442\u043e\u041f\u0440\u043e",C),Debug.log("Crypto plugin error: cant load activeX"),Debug.log(c),!1}return b;default:var d=navigator.userAgent;if(d.match(/Trident\/./i)){try{b=new ActiveXObject(a)}catch(e){return Ext.MessageBox.alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u041a\u0440\u0438\u043f\u0442\u043e\u041f\u0440\u043e",
C),!1}return b}if(d.match(/ipod/i)||d.match(/ipad/i)||d.match(/iphone/i))return call_ru_cryptopro_npcades_10_native_bridge("CreateObject",[a]);var f;try{b=null,cadesplugin.CreateObjectAsync?b=cadesplugin.CreateObjectAsync(a):(z=!1,b=cadesplugin.CreateObject(a)),f=b}catch(g){Ext.MessageBox.alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u041a\u0440\u0438\u043f\u0442\u043e\u041f\u0440\u043e",C),f=!1}return f}}function b(a){a=(z?a:a.SubjectName).split(", ");var b={};Ext.isEmpty(a)||Ext.each(a,function(a){a=
a.split("=");b[a[0]]=a[1]});return b}function c(a){a.message?a.number&&(err=a.message):err=B._utf8_decode(a);return err}function d(a){var b=0;Ext.isEmpty(a.number)?(b=(Ext.isEmpty(a.message)?a:a.message).match(/(\(0x\w+\))/),b=Ext.isEmpty(b[0])?void 0:parseInt(b[0].substr(1,b[0].length-2),16)):b=4294967295+a.number+1;message_text="\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u0438\u044f: "+(Ext.isEmpty(L[b])?c(a):L[b]);Main.eds.thumbprint=null;Ext.Msg.show({title:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u0438\u044f",
msg:message_text,buttons:Ext.Msg.OK,icon:Ext.MessageBox.ERROR,width:500,modal:!0});return!0}function e(b){var c=!1,d=!1,e=!1,f=!1;try{var g=a("CAdESCOM.About");if(!1===g)return!1;e=d=c=!0;"function"===typeof g.then?f=z=!0:"1.5.1500"<=g.Version&&(f=!0,z=!1)}catch(h){if(g=navigator.mimeTypes["application/x-cades"])c=!0,g.enabledPlugin&&(d=!0)}if(e){if(f)return!0;b&&Ext.MessageBox.alert("\u041e\u0448\u0438\u0431\u043a\u0430","\u0414\u043b\u044f \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u044b \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0431\u043e\u043b\u0435\u0435 \u0441\u0432\u0435\u0436\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f \u041a\u0440\u0438\u043f\u0442\u043e\u041f\u0440\u043e browser plugin ");
return!1}c?d?b&&Ext.MessageBox.alert("\u041e\u0448\u0438\u0431\u043a\u0430","\u041f\u043b\u0430\u0433\u0438\u043d \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d, \u043d\u043e \u043d\u0435 \u0443\u0434\u0430\u0435\u0442\u0441\u044f \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043e\u0431\u044a\u0435\u043a\u0442\u044b. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0430"):b&&Ext.MessageBox.alert("\u041e\u0448\u0438\u0431\u043a\u0430",
"\u041f\u043b\u0430\u0433\u0438\u043d \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d, \u043d\u043e \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0430"):b&&Ext.MessageBox.alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u041a\u0440\u0438\u043f\u0442\u043e\u041f\u0440\u043e",C);return!1}function f(a){var c,d,e,f,g=a.SubjectName.then(function(a){c=
b(a)}),h=a.ValidFromDate.then(function(a){d=a}),k=a.ValidToDate.then(function(a){e=a});a=a.Thumbprint.then(function(a){f=a});return Promise.all([g,h,k,a]).then(function(){return[f,c.CN,d,e,c]})}function g(d){if(!e(!0))return!1;if(z)k(d);else{if(!Ext.isEmpty(Main.eds.thumbprint)){var f=s(Main.eds.thumbprint);if(f)return d.success({certificate:f}),!0;d.failure();return!1}var f=new Ext.data.ArrayStore({fields:[{name:"thumb"},{name:"title"},{name:"validFrom",type:"date"},{name:"validTo",type:"date"},
{name:"data"}]}),g=a("CAPICOM.store");if(!g)return!1;try{g.Open()}catch(r){return Ext.MessageBox.alert("\u041e\u0448\u0438\u0431\u043a\u0430","\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0442\u043a\u0440\u044b\u0442\u0438\u0438 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430: "+c(r)),Debug.log("Crypto plugin error: cant open store"),Debug.log(r),!1}var l=[],J=!0;try{var m=g.Certificates.Count}catch(n){J=!1}if(!m||!J)return Ext.MessageBox.alert("\u041e\u0448\u0438\u0431\u043a\u0430",
"\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u043d\u0430 \u0412\u0430\u0448\u0435\u043c \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u0435 \u043e\u0442\u0441\u0443\u0442\u0441\u0432\u0443\u044e\u0442 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u044b.<br/>\u0412\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0443\u044e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0443 \u043f\u0435\u0440\u0435\u0434 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0444\u0443\u043d\u043a\u0446\u0438\u0439 \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u0438\u044f"),
Debug.log("Crypto plugin error: no certificates"),!1;for(J=1;J<=m;J++){var p;try{p=g.Certificates.Item(J)}catch(q){return Ext.MessageBox.alert("\u041e\u0448\u0438\u0431\u043a\u0430","\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0438 \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0432: "+c(q)),Debug.log("Crypto plugin error: cant get certificates list"),Debug.log(q),!1}var x=new Date;x.setTime(Date.parse(p.ValidFromDate));
var E=new Date;E.setTime(Date.parse(p.ValidToDate));var y=b(p);l.push([p.Thumbprint,y.CN,x,E,y])}f.loadData(l);g.Close();h(f,d)}}function k(b){if(!e(!0))return!1;if(!Ext.isEmpty(Main.eds.thumbprint)){var d=s(Main.eds.thumbprint);if(d)return b.success({certificate:d}),!0;b.failure();return!1}d=a("CAPICOM.store");if(!d)return!1;var g=new Ext.data.ArrayStore({fields:[{name:"thumb"},{name:"title"},{name:"validFrom",type:"date"},{name:"validTo",type:"date"},{name:"data"}]});try{var k;d.then(function(a){a.Open(E,
G,I);return a.Certificates},function(a){Ext.MessageBox.alert("\u041e\u0448\u0438\u0431\u043a\u0430","\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u043e\u0442\u043c\u0435\u043d\u0435\u043d\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c")}).then(function(a){k=a;return k.Count}).then(function(a){for(var c=[],d=[],e=1;e<=a;e++){var r=k.Item(e).then(f);r.then(function(a){d.push(a)});c.push(r)}Promise.all(c).then(function(){g.loadData(d);h(g,b)})})}catch(r){return Ext.MessageBox.alert("\u041e\u0448\u0438\u0431\u043a\u0430",
"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0442\u043a\u0440\u044b\u0442\u0438\u0438 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430: "+c(r)),Debug.log("Crypto plugin error: cant open store"),Debug.log(r),!1}}function h(a,b){var c=Ext.id(),e=Ext.id(),f=Ext.id();(new Ext.Window({title:"\u0412\u044b\u0431\u043e\u0440 \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u0430 \u0434\u043b\u044f \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u0438\u044f",height:200,
width:400,modal:!0,layout:"fit",id:f,items:[{xtype:"grid",border:!1,id:c,viewConfig:{forceFit:!0},columns:[{header:"\u0412\u043b\u0430\u0434\u0435\u043b\u0435\u0446",dataIndex:"title",width:150},{header:"\u0414\u0435\u0439\u0441\u0442\u0432\u0443\u0435\u0442 \u0441",xtype:"datecolumn",format:"d.m.Y",dataIndex:"validFrom",flex:2},{header:"\u0414\u0435\u0439\u0441\u0442\u0432\u0443\u0435\u0442 \u043f\u043e",xtype:"datecolumn",format:"d.m.Y",dataIndex:"validTo",flex:2},{header:"\u0414\u043e\u043f.",
xtype:"actioncolumn",flex:1,width:30,items:[{iconCls:"x-action-icon",icon:"/ico/about.png",tooltip:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e\u0431 \u042d\u041f",handler:function(a,b){var c=a.getStore().getAt(b),d="";if(!Ext.isEmpty(c.data.data))for(var e in c.data.data)void 0!=K[e]&&(d+="<b>"+K[e]+":</b> "+c.data.data[e]+"<br/>");Ext.isEmpty(d)||Ext.MessageBox.alert("\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e\u0431 \u042d\u041f",d)}}]}],store:a}],
bbar:{toolbarCls:"x-panel-fbar",cls:"bar-butons-ecp",items:[{xtype:"checkbox",boxLabel:"\u0437\u0430\u043f\u043e\u043c\u043d\u0438\u0442\u044c \u0432\u044b\u0431\u043e\u0440",flex:1,checked:!0,id:e,inputValue:1},"->",{xtype:"button",ctCls:"btn-text-ecp",text:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c",handler:function(){var a=Ext.getCmp(c).getSelectionModel().getSelections();if(1!=a.length)return!1;a=a[0].get("thumb");if(z)oCert=r(a);else{oCert=s(a);try{if(!oCert||!oCert.PrivateKey)return Ext.getCmp(f).close(),
b.failure(),!1}catch(g){return d(g),!1}}!0==Ext.getCmp(e).checked&&(Main.eds.thumbprint=a);Ext.getCmp(f).close();b.success({certificate:oCert});return!0}},{xtype:"button",text:"\u041e\u0442\u043c\u0435\u043d\u0430",handler:function(){Ext.getCmp(f).close();b.failure()}}]}})).show()}function l(a,b){var c=m(a,b.message);return!1!=c?(z?(q(c,b),c=void 0):Ext.isEmpty(c)?(Main.eds.thumbprint=null,b.failure({certificate:oCert}),c=!1):(b.success({message_signed:c,certificate:oCert}),c=!0),c):!1}function q(a,
b){a.then(function(a){Ext.isEmpty(a)?(Main.eds.thumbprint=null,b.failure({certificate:oCert})):b.success({message_signed:a,certificate:oCert})})}function s(b){if(z)return r(b);try{var d=a("CAPICOM.store");d.Open()}catch(e){Ext.MessageBox.alert("\u041e\u0448\u0438\u0431\u043a\u0430","\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0442\u043a\u0440\u044b\u0442\u0438\u0438 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430: "+c(e));Debug.log("Crypto plugin error: cant open store");
Debug.log(e);return}b=d.Certificates.Find(0,b);return 0==b.Count?(Ext.MessageBox.alert("\u041e\u0448\u0438\u0431\u043a\u0430","\u0412\u044b\u0431\u0440\u0430\u043d\u044b\u0439 \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442 \u043d\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d"),Debug.log("Crypto plugin error: cant load certificate"),!1):b.Item(1)}function r(b){try{var d=a("CAPICOM.store")}catch(e){Ext.MessageBox.alert("\u041e\u0448\u0438\u0431\u043a\u0430","\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0442\u043a\u0440\u044b\u0442\u0438\u0438 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430: "+
c(e));Debug.log("Crypto plugin error: cant open store");Debug.log(e);return}return d.then(function(a){openCertificates=a.Open();return a.Certificates}).then(function(a){return a.Find(0,b)}).then(function(a){return a.Item(1)})}function m(b,e,f){if(z)return p(b,e,f);try{var g=a("CAdESCOM.CPSigner")}catch(h){Ext.MessageBox.alert("\u041e\u0448\u0438\u0431\u043a\u0430",'\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u043e\u0431\u044a\u0435\u043a\u0442\u0430 CAdESCOM.CPSigner!<br/>\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u041a\u0440\u0438\u043f\u0442\u043e\u041f\u0440\u043e \u042d\u0426\u041f Browser plug-in \u043d\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d \u0438\u043b\u0438 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e (<a href="http://www.cryptopro.ru/products/cades/plugin/get">\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c</a>)');
Debug.log("Crypto plugin error: cant create CAdESCOM.CPSigner");Debug.log(h);return}if(g){g.Certificate=b;b=a("CAdESCOM.CadesSignedData");b.ContentEncoding=M;b.Content=B.encode(e);g.Options=1;try{var k=b.SignCades(g,x)}catch(r){return d(r),!1}if(!0==f){e=k;f=a("CAdESCOM.CadesSignedData");try{f.VerifyCades(e,x)}catch(n){Ext.MessageBox.alert("\u041e\u0448\u0438\u0431\u043a\u0430","\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u0438\u044f. \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u043e: "+
c(n)),Debug.log("Crypto plugin error: cant check signature"),Debug.log(n)}}return k}Ext.MessageBox.alert("\u041e\u0448\u0438\u0431\u043a\u0430",'\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u043e\u0431\u044a\u0435\u043a\u0442\u0430 CAdESCOM.CPSigner!<br/>\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u041a\u0440\u0438\u043f\u0442\u043e\u041f\u0440\u043e \u042d\u0426\u041f Browser plug-in \u043d\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d \u0438\u043b\u0438 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e (<a href="http://www.cryptopro.ru/products/cades/plugin/get">\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c</a>)');
Debug.log("Crypto plugin error: cant create CAdESCOM.CPSigner")}function p(b,c){var d,e,f;try{var g=a("CAdESCOM.CPSigner")}catch(h){Ext.MessageBox.alert("\u041e\u0448\u0438\u0431\u043a\u0430",'\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u043e\u0431\u044a\u0435\u043a\u0442\u0430 CAdESCOM.CPSigner!<br/>\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u041a\u0440\u0438\u043f\u0442\u043e\u041f\u0440\u043e \u042d\u0426\u041f Browser plug-in \u043d\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d \u0438\u043b\u0438 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e (<a href="http://www.cryptopro.ru/products/cades/plugin/get">\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c</a>)');
Debug.log("Crypto plugin error: cant create CAdESCOM.CPSigner");Debug.log(h);return}var k=a("CAdESCOM.CadesSignedData");return g.then(function(a){d=a;return b}).then(function(a){e=a;return d.propset_Certificate(e)}).then(function(){return d.propset_Options(y)}).then(function(){return k}).then(function(a){f=a;return f.propset_ContentEncoding(M)}).then(function(){return f}).then(function(){return f.propset_Content(B.encode(c))}).then(function(){return f}).then(function(a){return a.SignCades(d,x)})}
var x=1,E=2,G="My",I=2,y=1,M=1,L={2148204810:"\u041a\u043e\u0440\u043d\u0435\u0432\u043e\u0439 \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442 \u043d\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0432 \u0441\u043f\u0438\u0441\u043e\u043a \u0434\u043e\u0432\u0435\u0440\u0435\u043d\u043d\u044b\u0445 \u043d\u0430 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e\u043c \u041f\u041a \u0438\u043b\u0438 \u0432\u044b\u0448\u0435\u043b \u0441\u0440\u043e\u043a \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u0430. \u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u0432 \u0441\u043b\u0443\u0436\u0431\u0443 \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438.",
2148081675:"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d \u043f\u0440\u0438\u0432\u0430\u0442\u043d\u044b\u0439 \u043a\u043b\u044e\u0447 \u043f\u0440\u0438\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0439 \u043a \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u0443. \u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u0432 \u0441\u043b\u0443\u0436\u0431\u0443 \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438.",
2148086017:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0439 \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442 \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u043c \u043a\u0432\u0430\u043b\u0438\u0444\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0439 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0434\u043f\u0438\u0441\u0438. \u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u0432 \u0441\u043b\u0443\u0436\u0431\u0443 \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438.",
2148073494:"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d \u043f\u0440\u0438\u0432\u0430\u0442\u043d\u044b\u0439 \u043a\u043b\u044e\u0447 \u043f\u0440\u0438\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0439 \u043a \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u0443",2148081668:"\u0421\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442 \u043d\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d \u0447\u0435\u0440\u0435\u0437 \u0441\u0438\u0441\u0442\u0435\u043c\u0443 \u041a\u0440\u0438\u043f\u0442\u043e \u041f\u0440\u043e!"},
C='<b>\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043a \u043c\u0435\u0445\u0430\u043d\u0438\u0437\u043c\u0443 \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u043d\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e \u043d\u0430 \u0432\u0430\u0448\u0435\u043c \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u0435!</b><br/><br/>\u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u0414\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u042d\u041f \u0432\u0430\u043c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0438\u043c\u0435\u0442\u044c:<ul class="disced"><li>\u041a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440 \u043f\u043e\u0434 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435\u043c Windows, Linux \u0438\u043b\u0438 FreeBSD</li><li>\u041e\u0434\u0438\u043d \u0438\u0437 \u0441\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u043e\u0432 (Internet Explorer, Mozilla Firefox, Opera, Chrome, Safari) \u0441 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u043e\u0439 \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0435\u0432 JavaScript</li><li>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u0439 \u043f\u043b\u0430\u0433\u0438\u043d \u0434\u043b\u044f \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0430 \u00ab\u041a\u0440\u0438\u043f\u0442\u043e\u041f\u0440\u043e \u042d\u0426\u041f Browser plug-in\u00bb (<a href="/resources/cryptopro/cadesplugin.exe">\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c</a>)</li><li>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u0439 \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442 \u043a\u043b\u044e\u0447\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438</li><li>\u0414\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0432 Firefox \u0432\u0435\u0440\u0441\u0438\u0438 52 \u0438 \u0432\u044b\u0448\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c <a href="/resources/cryptopro/firefox_cryptopro_extension_latest.xpi">\u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0435 \u0434\u043b\u044f \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0430</a></li></ul>',
K={E:"E-mail",CN:"\u041f\u043e\u043b\u043d\u043e\u0435 \u0438\u043c\u044f",T:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",OU:"\u041f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u0435",O:"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f",L:"\u0413\u043e\u0440\u043e\u0434/\u0441\u0435\u043b\u043e",SP:"\u041e\u0431\u043b\u0430\u0441\u0442\u044c/\u0440\u0430\u0439\u043e\u043d",S:"\u0420\u0435\u0433\u0438\u043e\u043d",C:"\u0421\u0442\u0440\u0430\u043d\u0430",
INN:"\u0418\u041d\u041d",OGRN:"\u041e\u0413\u0420\u041d",SNILS:"\u0421\u041d\u0418\u041b\u0421"},z=!0,B={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var b="",c,d,e,f,g,h,k=0;for(a=B._utf8_encode(a);k<a.length;)c=a.charCodeAt(k++),d=a.charCodeAt(k++),e=a.charCodeAt(k++),f=c>>2,c=(c&3)<<4|d>>4,g=(d&15)<<2|e>>6,h=e&63,isNaN(d)?g=h=64:isNaN(e)&&(h=64),b=b+this._keyStr.charAt(f)+this._keyStr.charAt(c)+this._keyStr.charAt(g)+this._keyStr.charAt(h);return b},
decode:function(a){var b="",c,d,e,f,g,h=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");h<a.length;)c=this._keyStr.indexOf(a.charAt(h++)),d=this._keyStr.indexOf(a.charAt(h++)),f=this._keyStr.indexOf(a.charAt(h++)),g=this._keyStr.indexOf(a.charAt(h++)),c=c<<2|d>>4,d=(d&15)<<4|f>>2,e=(f&3)<<6|g,b+=String.fromCharCode(c),64!=f&&(b+=String.fromCharCode(d)),64!=g&&(b+=String.fromCharCode(e));return B._collapseBytes(b)},_collapseBytes:function(a){var b="",c=a.length,d,e,f;for(d=0;d<c;d+=2)d+1<c?(e=a.charCodeAt(d),
f=a.charCodeAt(d+1),e=String.fromCharCode(e+(f<<8)),b+=e):(e=a.charCodeAt(d),b+=String.fromCharCode(e));return b},_utf8_encode:function(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):(127<d&&2048>d?b+=String.fromCharCode(d>>6|192):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128)),b+=String.fromCharCode(d&63|128))}return b},_utf8_decode:function(a){for(var b="",c=0,d=c1=c2=0;c<a.length;)d=a.charCodeAt(c),128>
d?(b+=String.fromCharCode(d),c++):191<d&&224>d?(c2=a.charCodeAt(c+1),b+=String.fromCharCode((d&31)<<6|c2&63),c+=2):(c2=a.charCodeAt(c+1),c3=a.charCodeAt(c+2),b+=String.fromCharCode((d&15)<<12|(c2&63)<<6|c3&63),c+=3);return b}};CryptoPlugin.signMessage=function(a){if(Main.signaturePluginByDefault)return(new Application.components.PluginSelector).show(),!1;Ext.isFunction(a.success)||(a.success=function(){});Ext.isFunction(a.failure)||(a.failure=function(){});if(!Ext.isEmpty(Main.eds.thumbprint))return oCert=
s(Main.eds.thumbprint),l(oCert,a);g({allowSkip:void 0!=a.allowSkip?a.allowSkip:!0,success:function(b){oCert=b.certificate;return l(oCert,a)},failure:function(){a.failure()}})};CryptoPlugin.selectCertificateForm=g;CryptoPlugin.getCertInfo=b;CryptoPlugin.signByCertificate=m;CryptoPlugin.DN_FIELDS_DESCRIPTION=K;window.CryptoPlugin=CryptoPlugin;(function(){for(var a in CryptoPlugin)CryptoPlugin.hasOwnProperty(a)&&(window[a]=CryptoPlugin[a])})()};/*
 TBA (To be announced)

*/
Ext.namespace("Ext.ux.form");Ext.ux.form.SuperBoxSelect=function(a){Ext.ux.form.SuperBoxSelect.superclass.constructor.call(this,a);this.addEvents("beforeadditem","additem","newitem","beforeremoveitem","removeitem","clear")};
Ext.ux.form.SuperBoxSelect=Ext.extend(Ext.ux.form.SuperBoxSelect,Ext.form.ComboBox,{addNewDataOnBlur:!1,allowAddNewData:!1,allowQueryAll:!0,backspaceDeletesLastItem:!0,classField:null,clearBtnCls:"",clearLastQueryOnEscape:!1,clearOnEscape:!1,displayFieldTpl:null,extraItemCls:"",extraItemStyle:"",expandBtnCls:"",fixFocusOnTabSelect:!0,forceFormValue:!0,forceSameValueQuery:!1,itemDelimiterKey:Ext.EventObject.ENTER,navigateItemsWithTab:!0,pinList:!0,preventDuplicates:!0,queryFilterRe:"",queryValuesDelimiter:"|",
queryValuesIndicator:"valuesqry",removeValuesFromStore:!0,renderFieldBtns:!0,stackItems:!1,styleField:null,supressClearValueRemoveEvents:!1,validationEvent:"blur",valueDelimiter:",",initComponent:function(){Ext.apply(this,{items:new Ext.util.MixedCollection(!1),usedRecords:new Ext.util.MixedCollection(!1),addedRecords:[],remoteLookup:[],hideTrigger:!0,grow:!1,resizable:!1,multiSelectMode:!1,preRenderValue:null,filteredQueryData:""});this.queryFilterRe&&Ext.isString(this.queryFilterRe)&&(this.queryFilterRe=
RegExp(this.queryFilterRe));this.transform&&this.doTransform();if(this.forceFormValue)this.items.on({add:this.manageNameAttribute,remove:this.manageNameAttribute,clear:this.manageNameAttribute,scope:this});Ext.ux.form.SuperBoxSelect.superclass.initComponent.call(this);if("remote"===this.mode&&this.store)this.store.on("load",this.onStoreLoad,this)},onRender:function(a,b){var c=this.hiddenName;this.hiddenName=null;Ext.ux.form.SuperBoxSelect.superclass.onRender.call(this,a,b);this.hiddenName=c;this.manageNameAttribute();
c=!0===this.stackItems?"x-superboxselect-stacked":"";this.renderFieldBtns&&(c+=" x-superboxselect-display-btns");this.el.removeClass("x-form-text").addClass("x-superboxselect-input-field");this.wrapEl=this.el.wrap({tag:"ul"});this.outerWrapEl=this.wrapEl.wrap({tag:"div",cls:"x-form-text x-superboxselect "+c});this.inputEl=this.el.wrap({tag:"li",cls:"x-superboxselect-input"});this.renderFieldBtns&&this.setupFieldButtons().manageClearBtn();this.setupFormInterception()},doTransform:function(){var a=
Ext.getDom(this.transform),b=[];if(!this.store){this.mode="local";for(var c=[],a=a.options,d=0,e=a.length;d<e;d++){var f=a[d],g=Ext.get(f),k=g.getAttributeNS(null,"value")||"",h=g.getAttributeNS(null,"className")||"",g=g.getAttributeNS(null,"style")||"";f.selected&&b.push(k);c.push([k,f.text,h,"string"===typeof g?g:g.cssText])}this.store=new Ext.data.SimpleStore({id:0,fields:["value","text","cls","style"],data:c});Ext.apply(this,{valueField:"value",displayField:"text",classField:"cls",styleField:"style"})}b.length&&
(this.value=b.join(","))},setupFieldButtons:function(){this.buttonWrap=this.outerWrapEl.createChild({cls:"x-superboxselect-btns"});this.buttonClear=this.buttonWrap.createChild({tag:"div",cls:"x-superboxselect-btn-clear "+this.clearBtnCls});this.allowQueryAll&&(this.buttonExpand=this.buttonWrap.createChild({tag:"div",cls:"x-superboxselect-btn-expand "+this.expandBtnCls}));this.initButtonEvents();return this},initButtonEvents:function(){this.buttonClear.addClassOnOver("x-superboxselect-btn-over").on("click",
function(a){a.stopEvent();this.disabled||(this.clearValue(),this.el.focus())},this);if(this.allowQueryAll)this.buttonExpand.addClassOnOver("x-superboxselect-btn-over").on("click",function(a){a.stopEvent();this.disabled||(this.isExpanded()?this.multiSelectMode=!1:this.pinList&&(this.multiSelectMode=!0),this.onTriggerClick())},this)},removeButtonEvents:function(){this.buttonClear.removeAllListeners();this.allowQueryAll&&this.buttonExpand.removeAllListeners();return this},clearCurrentFocus:function(){this.currentFocus&&
(this.currentFocus.onLnkBlur(),this.currentFocus=null);return this},initEvents:function(){var a=this.el;a.on({click:this.onClick,focus:this.clearCurrentFocus,blur:this.onBlur,keydown:this.onKeyDownHandler,keyup:this.onKeyUpBuffered,scope:this});this.on({collapse:this.onCollapse,expand:this.clearCurrentFocus,scope:this});this.wrapEl.on("click",this.onWrapClick,this);this.outerWrapEl.on("click",this.onWrapClick,this);this.inputEl.focus=function(){a.focus()};Ext.ux.form.SuperBoxSelect.superclass.initEvents.call(this);
Ext.apply(this.keyNav,{tab:function(b){if(this.fixFocusOnTabSelect&&this.isExpanded())return b.stopEvent(),a.blur(),this.onViewClick(!1),this.focus(!1,10),!0;this.onViewClick(!1);""!==a.dom.value&&this.setRawValue("");return!0},down:function(a){if(this.isExpanded()||this.currentFocus)this.inKeyMode=!0,this.selectNext();else if(this.allowQueryAll)this.onTriggerClick()},enter:function(){}})},onClick:function(){this.clearCurrentFocus();this.collapse();this.autoSize()},beforeBlur:function(){if(this.allowAddNewData&&
this.addNewDataOnBlur){var a=this.el.dom.value;""!==a&&this.fireNewItemEvent(a)}Ext.form.ComboBox.superclass.beforeBlur.call(this)},onFocus:function(){this.outerWrapEl.addClass(this.focusClass);Ext.ux.form.SuperBoxSelect.superclass.onFocus.call(this)},onBlur:function(){this.outerWrapEl.removeClass(this.focusClass);this.clearCurrentFocus();""!==this.el.dom.value&&(this.applyEmptyText(),this.autoSize());Ext.ux.form.SuperBoxSelect.superclass.onBlur.call(this)},onCollapse:function(){this.view.clearSelections();
this.multiSelectMode=!1},onWrapClick:function(a){a.stopEvent();this.collapse();this.el.focus();this.clearCurrentFocus()},markInvalid:function(a){var b;if(this.rendered&&!this.preventMark){this.outerWrapEl.addClass(this.invalidClass);a=a||this.invalidText;switch(this.msgTarget){case "qtip":Ext.apply(this.el.dom,{qtip:a,qclass:"x-form-invalid-tip"});Ext.apply(this.wrapEl.dom,{qtip:a,qclass:"x-form-invalid-tip"});Ext.QuickTips&&Ext.QuickTips.enable();break;case "title":this.el.dom.title=a;this.wrapEl.dom.title=
a;this.outerWrapEl.dom.title=a;break;case "under":if(!this.errorEl){b=this.getErrorCt();if(!b){this.el.dom.title=a;break}this.errorEl=b.createChild({cls:"x-form-invalid-msg"});this.errorEl.setWidth(b.getWidth(!0)-20)}this.errorEl.update(a);Ext.form.Field.msgFx[this.msgFx].show(this.errorEl,this);break;case "side":if(!this.errorIcon){b=this.getErrorCt();if(!b){this.el.dom.title=a;break}this.errorIcon=b.createChild({cls:"x-form-invalid-icon"})}this.alignErrorIcon();Ext.apply(this.errorIcon.dom,{qtip:a,
qclass:"x-form-invalid-tip"});this.errorIcon.show();this.on("resize",this.alignErrorIcon,this);break;default:b=Ext.getDom(this.msgTarget),b.innerHTML=a,b.style.display=this.msgDisplay}this.fireEvent("invalid",this,a)}},clearInvalid:function(){if(this.rendered&&!this.preventMark){this.outerWrapEl.removeClass(this.invalidClass);switch(this.msgTarget){case "qtip":this.el.dom.qtip="";this.wrapEl.dom.qtip="";break;case "title":this.el.dom.title="";this.wrapEl.dom.title="";this.outerWrapEl.dom.title="";
break;case "under":this.errorEl&&Ext.form.Field.msgFx[this.msgFx].hide(this.errorEl,this);break;case "side":this.errorIcon&&(this.errorIcon.dom.qtip="",this.errorIcon.hide(),this.un("resize",this.alignErrorIcon,this));break;default:var a=Ext.getDom(this.msgTarget);a.innerHTML="";a.style.display="none"}this.fireEvent("valid",this)}},alignErrorIcon:function(){this.wrap&&this.errorIcon.alignTo(this.wrap,"tl-tr",[Ext.isIE?5:2,3])},expand:function(){!this.isExpanded()&&this.hasFocus&&(this.bufferSize&&
(this.doResize(this.bufferSize),delete this.bufferSize),this.list.alignTo(this.outerWrapEl,this.listAlign).show(),this.innerList.setOverflow("auto"),this.mon(Ext.getDoc(),{scope:this,mousewheel:this.collapseIf,mousedown:this.collapseIf}),this.fireEvent("expand",this))},restrictHeight:function(){var a=this.innerList.dom,b=a.scrollTop,c=this.list;a.style.height="";var d=c.getFrameWidth("tb")+(this.resizable?this.handleHeight:0)+this.assetHeight,e=Math.max(a.clientHeight,a.offsetHeight,a.scrollHeight),
f=this.getPosition()[1]-Ext.getBody().getScroll().top,g=Ext.lib.Dom.getViewHeight()-f-this.getSize().height,f=Math.max(f,g,this.minHeight||0)-c.shadowOffset-d-5,e=Math.min(e,f,this.maxHeight);this.innerList.setHeight(e);c.beginUpdate();c.setHeight(e+d);c.alignTo(this.outerWrapEl,this.listAlign);c.endUpdate();this.multiSelectMode&&(a.scrollTop=b)},validateValue:function(a){if(0===this.items.getCount()){if(this.allowBlank)return this.clearInvalid(),!0;this.markInvalid(this.blankText);return!1}this.clearInvalid();
return!0},manageNameAttribute:function(){0===this.items.getCount()&&this.forceFormValue?this.el.dom.setAttribute("name",this.hiddenName||this.name):this.el.dom.removeAttribute("name")},setupFormInterception:function(){var a;this.findParentBy(function(b){b.getForm&&(a=b.getForm())});if(a){var b=a.getValues;a.getValues=function(c){this.el.dom.disabled=!0;var d=this.el.dom.value;this.setRawValue("");var e=b.call(a);this.el.dom.disabled=!1;this.setRawValue(d);this.forceFormValue&&0===this.items.getCount()&&
(e[this.name]="");return c?Ext.urlEncode(e):e}.createDelegate(this)}},onResize:function(a,b,c,d){var e=Ext.isIE6?4:Ext.isIE7?1:Ext.isIE8?1:0;this.wrapEl&&(this._width=a,this.outerWrapEl.setWidth(a-e),this.renderFieldBtns&&(e+=this.buttonWrap.getWidth()+20,this.wrapEl.setWidth(a-e)));Ext.ux.form.SuperBoxSelect.superclass.onResize.call(this,a,b,c,d);this.autoSize()},onEnable:function(){Ext.ux.form.SuperBoxSelect.superclass.onEnable.call(this);this.items.each(function(a){a.enable()});this.renderFieldBtns&&
this.initButtonEvents()},onDisable:function(){Ext.ux.form.SuperBoxSelect.superclass.onDisable.call(this);this.items.each(function(a){a.disable()});this.renderFieldBtns&&this.removeButtonEvents()},clearValue:function(a){Ext.ux.form.SuperBoxSelect.superclass.clearValue.call(this);this.preventMultipleRemoveEvents=a||this.supressClearValueRemoveEvents||!1;this.removeAllItems();this.preventMultipleRemoveEvents=!1;this.fireEvent("clear",this);return this},fireNewItemEvent:function(a){this.view.clearSelections();
this.collapse();this.setRawValue("");if(this.queryFilterRe&&(a=a.replace(this.queryFilterRe,""),!a))return;this.fireEvent("newitem",this,a,this.filteredQueryData)},onKeyUp:function(a){!1===this.editable||a.isSpecialKey()&&a.getKey()!==a.BACKSPACE||this.itemDelimiterKey.indexOf===a.getKey()||a.hasModifier()&&!a.shiftKey||(this.lastKey=a.getKey(),this.dqTask.delay(this.queryDelay))},onKeyDownHandler:function(a,b){var c,d,e;a.getKey()!==a.ESC||this.isExpanded()||""==this.el.dom.value||!this.clearOnEscape&&
!this.clearLastQueryOnEscape||(this.clearOnEscape&&(this.el.dom.value=""),this.clearLastQueryOnEscape&&(this.lastQuery=""),a.stopEvent());if((a.getKey()===a.DELETE||a.getKey()===a.SPACE)&&this.currentFocus)return a.stopEvent(),c=this.currentFocus,this.on("expand",function(){this.collapse()},this,{single:!0}),e=this.items.indexOfKey(this.currentFocus.key),this.clearCurrentFocus(),e<this.items.getCount()-1&&(d=this.items.itemAt(e+1)),c.preDestroy(!0),d&&function(){d.onLnkFocus();this.currentFocus=d}.defer(200,
this),!0;c=this.el.dom.value;var f;e=a.ctrlKey;if(this.itemDelimiterKey===a.getKey()){a.stopEvent();if(""!==c)e||!this.isExpanded()?this.fireNewItemEvent(c):(this.onViewClick(),this.unsetDelayCheck&&(this.delayedCheck=!0,this.unsetDelayCheck.defer(10,this)));else{if(!this.isExpanded())return;this.onViewClick();this.unsetDelayCheck&&(this.delayedCheck=!0,this.unsetDelayCheck.defer(10,this))}return!0}if(""!==c)this.autoSize();else{if(a.getKey()===a.HOME)return a.stopEvent(),0<this.items.getCount()&&
(this.collapse(),f=this.items.get(0),f.el.focus()),!0;if(a.getKey()===a.BACKSPACE){a.stopEvent();if(this.currentFocus){c=this.currentFocus;this.on("expand",function(){this.collapse()},this,{single:!0});e=this.items.indexOfKey(c.key);this.clearCurrentFocus();e<this.items.getCount()-1&&(d=this.items.itemAt(e+1));c.preDestroy(!0);d&&function(){d.onLnkFocus();this.currentFocus=d}.defer(200,this);return}if(f=this.items.get(this.items.getCount()-1))if(this.backspaceDeletesLastItem)this.on("expand",function(){this.collapse()},
this,{single:!0}),f.preDestroy(!0);else if(this.navigateItemsWithTab)f.onElClick();else this.on("expand",function(){this.collapse();this.currentFocus=f;this.currentFocus.onLnkFocus.defer(20,this.currentFocus)},this,{single:!0});return!0}if(a.isNavKeyPress()){if(a.getKey()===a.LEFT||a.getKey()===a.UP&&!this.isExpanded()){a.stopEvent();this.collapse();f=this.items.get(this.items.getCount()-1);if(this.navigateItemsWithTab)f&&f.focus();else if(this.currentFocus)e=this.items.indexOfKey(this.currentFocus.key),
this.clearCurrentFocus(),0!==e&&(this.currentFocus=this.items.itemAt(e-1),this.currentFocus.onLnkFocus());else if(this.currentFocus=f)f.onLnkFocus();return!0}if(a.getKey()===a.DOWN&&this.currentFocus){this.collapse();a.stopEvent();e=this.items.indexOfKey(this.currentFocus.key);if(e==this.items.getCount()-1)this.clearCurrentFocus.defer(10,this);else if(this.clearCurrentFocus(),this.currentFocus=this.items.itemAt(e+1))this.currentFocus.onLnkFocus();return!0}if(a.getKey()===a.RIGHT)if(this.collapse(),
f=this.items.itemAt(0),this.navigateItemsWithTab)f&&f.focus();else if(this.currentFocus){if(e=this.items.indexOfKey(this.currentFocus.key),this.clearCurrentFocus(),e<this.items.getCount()-1&&(this.currentFocus=this.items.itemAt(e+1)))this.currentFocus.onLnkFocus()}else if(this.currentFocus=f)f.onLnkFocus()}else this.multiSelectMode=!1,this.clearCurrentFocus()}},onKeyUpBuffered:function(a){a.isNavKeyPress()||this.autoSize()},reset:function(){this.killItems();Ext.ux.form.SuperBoxSelect.superclass.reset.call(this);
this.addedRecords=[];this.autoSize().setRawValue("")},applyEmptyText:function(){this.setRawValue("");if(0<this.items.getCount())return this.el.removeClass(this.emptyClass),this.setRawValue(""),this;this.rendered&&this.emptyText&&1>this.getRawValue().length&&(this.setRawValue(this.emptyText),this.el.addClass(this.emptyClass));return this},removeAllItems:function(){this.items.each(function(a){a.preDestroy(!0)},this);this.manageClearBtn();return this},killItems:function(){this.items.each(function(a){a.kill()},
this);this.resetStore();this.items.clear();this.manageClearBtn();return this},resetStore:function(){this.store.clearFilter();if(!this.removeValuesFromStore)return this;this.usedRecords.each(function(a){this.store.add(a)},this);this.usedRecords.clear();this.store.remoteSort||this.store.sort(this.displayField,"ASC");return this},sortStore:function(){var a=this.store.getSortState();a&&a.field&&this.store.sort(a.field,a.direction);return this},getCaption:function(a){"string"===typeof this.displayFieldTpl&&
(this.displayFieldTpl=new Ext.XTemplate(this.displayFieldTpl));var b;a=a instanceof Ext.data.Record?a.data:a;this.displayFieldTpl?b=this.displayFieldTpl.apply(a):this.displayField&&(b=a[this.displayField]);return b},addRecord:function(a){var b=a.data[this.displayField],c=this.getCaption(a),d=a.data[this.valueField],e=this.classField?a.data[this.classField]:"",f=this.styleField?a.data[this.styleField]:"";this.removeValuesFromStore&&(this.usedRecords.add(d,a),this.store.remove(a));this.addItemBox(d,
b,c,e,f);this.fireEvent("additem",this,d,a)},createRecord:function(a){if(!this.recordConstructor){var b=[{name:this.valueField},{name:this.displayField}];this.classField&&b.push({name:this.classField});this.styleField&&b.push({name:this.styleField});this.recordConstructor=Ext.data.Record.create(b)}return new this.recordConstructor(a)},addItems:function(a){Ext.isArray(a)?Ext.each(a,function(a){this.addItem(a)},this):this.addItem(a)},addNewItem:function(a){this.addItem(a,!0)},addItem:function(a,b){var c=
a[this.valueField];if(this.disabled)return!1;if(!this.preventDuplicates||!this.hasValue(c)){var d=this.findRecord(this.valueField,c);if(d)this.addRecord(d);else if(this.allowAddNewData)if("remote"===this.mode)this.remoteLookup.push(a),this.doQuery(c,!1,!1,b);else return c=this.createRecord(a),this.store.add(c),this.addRecord(c),!0}},addItemBox:function(a,b,c,d,e){var f=Ext.id(null,"sbx-item");b=new Ext.ux.form.SuperBoxSelectItem({owner:this,disabled:this.disabled,renderTo:this.wrapEl,cls:this.extraItemCls+
" "+d,style:function(a){var b="";switch(typeof a){case "function":b=a.call();break;case "object":for(var c in a)b+=c+":"+a[c]+";";break;case "string":b=a+";"}return b}(this.extraItemStyle)+" "+e,caption:c,display:b,value:a,key:f,listeners:{remove:function(a){if(!1===this.fireEvent("beforeremoveitem",this,a.value))return!1;this.items.removeKey(a.key);this.removeValuesFromStore&&this.usedRecords.containsKey(a.value)&&(this.store.add(this.usedRecords.get(a.value)),this.usedRecords.removeKey(a.value),
this.sortStore(),this.view&&this.view.render());this.preventMultipleRemoveEvents||this.fireEvent.defer(250,this,["removeitem",this,a.value,this.findInStore(a.value)])},destroy:function(){this.collapse();this.autoSize().manageClearBtn().validateValue()},scope:this}});b.render();a={tag:"input",type:"hidden",value:a,name:this.hiddenName||this.name};this.disabled&&Ext.apply(a,{disabled:"disabled"});b.hidden=this.el.insertSibling(a,"before");this.items.add(f,b);this.applyEmptyText().autoSize().manageClearBtn().validateValue()},
manageClearBtn:function(){if(!this.renderFieldBtns||!this.rendered)return this;0===this.items.getCount()&&this.buttonClear.addClass("x-superboxselect-btn-hide");return this},findInStore:function(a){a=this.store.find(this.valueField,a);return-1<a?this.store.getAt(a):!1},getSelectedRecords:function(){var a=[];if(this.removeValuesFromStore)a=this.usedRecords.getRange();else{var b=[];this.items.each(function(a){b.push(a.value)});Ext.each(b,function(b){a.push(this.findInStore(b))},this)}return a},findSelectedItem:function(a){var b;
this.items.each(function(c){if(c.el.dom===a)return b=c,!1});return b},findSelectedRecord:function(a){var b;(a=this.findSelectedItem(a))&&(b=this.findSelectedRecordByValue(a.value));return b},findSelectedRecordByValue:function(a){var b;this.removeValuesFromStore?this.usedRecords.each(function(c){if(c.get(this.valueField)==a)return b=c,!1},this):b=this.findInStore(a);return b},getValue:function(){var a=[];this.items.each(function(b){a.push(b.value)});return a.length?a.join(this.valueDelimiter):Ext.isEmpty(this.value)?
"":this.value},getCount:function(){return this.items.getCount()},getValueEx:function(){var a=[];this.items.each(function(b){var c={};c[this.valueField]=b.value;c[this.displayField]=b.display;this.classField&&(c[this.classField]=b.cls||"");this.styleField&&(c[this.styleField]=b.style||"");a.push(c)},this);return a},initValue:function(){Ext.isObject(this.value)||Ext.isArray(this.value)?(this.setValueEx(this.value),this.originalValue=this.getValue()):Ext.ux.form.SuperBoxSelect.superclass.initValue.call(this);
"remote"===this.mode&&(this.setOriginal=!0)},addValue:function(a){if(!Ext.isEmpty(a)){var b=a;Ext.isArray(a)||(b=(""+a).split(this.valueDelimiter));Ext.each(b,function(a){var b=this.findRecord(this.valueField,a);b?this.addRecord(b):"remote"===this.mode&&this.remoteLookup.push(a)},this);"remote"===this.mode&&(a=this.remoteLookup.join(this.queryValuesDelimiter),this.doQuery(a,!1,!0))}},setValue:function(a){this.rendered?(this.removeAllItems().resetStore(),this.remoteLookup=[],this.addValue(a)):this.value=
a},setValueEx:function(a){this.rendered?(this.removeAllItems().resetStore(),Ext.isArray(a)||(a=[a]),this.remoteLookup=[],this.allowAddNewData&&"remote"===this.mode?Ext.each(a,function(a){a=this.findRecord(this.valueField,a[this.valueField])||this.createRecord(a);this.addRecord(a)},this):Ext.each(a,function(a){this.addItem(a)},this)):this.value=a},hasValue:function(a){var b=!1;this.items.each(function(c){if(c.value==a)return b=!0,!1},this);return b},onSelect:function(a,b){if(!1!==this.fireEvent("beforeselect",
this,a,b)){var c=a.data[this.valueField];this.preventDuplicates&&this.hasValue(c)||(this.setRawValue(""),this.lastSelectionText="",!1!==this.fireEvent("beforeadditem",this,c,a,this.filteredQueryData)&&this.addRecord(a),0!==this.store.getCount()&&this.multiSelectMode?this.restrictHeight():this.collapse())}},onDestroy:function(){this.items.purgeListeners();this.killItems();this.allowQueryAll&&Ext.destroy(this.buttonExpand);this.renderFieldBtns&&Ext.destroy(this.buttonClear,this.buttonWrap);Ext.destroy(this.inputEl,
this.wrapEl,this.outerWrapEl);Ext.ux.form.SuperBoxSelect.superclass.onDestroy.call(this)},autoSize:function(){if(!this.rendered)return this;this.metrics||(this.metrics=Ext.util.TextMetrics.createInstance(this.el));var a=this.el.dom.value,b=document.createElement("div");""===a&&this.emptyText&&1>this.items.getCount()&&(a=this.emptyText);b.appendChild(document.createTextNode(a));a=b.innerHTML;a=Math.max(this.metrics.getWidth(a+"&#160;")+24,24);"undefined"!=typeof this._width&&(a=Math.min(this._width,
a));this.el.setWidth(a);Ext.isIE&&(this.el.dom.style.top="0");this.fireEvent("autosize",this,a);return this},shouldQuery:function(a){return this.lastQuery&&(a=a.match("^"+this.lastQuery))&&!this.store.getCount()?a[0]!==this.lastQuery:!0},doQuery:function(a,b,c,d){a=Ext.isEmpty(a)?"":a;if(this.queryFilterRe){this.filteredQueryData="";var e=a.match(this.queryFilterRe);e&&e.length&&(this.filteredQueryData=e[0]);a=a.replace(this.queryFilterRe,"");if(!a&&e)return}b={query:a,forceAll:b,combo:this,cancel:!1};
if(!1===this.fireEvent("beforequery",b)||b.cancel)return!1;a=b.query;b=b.forceAll;if(!0===b||a.length>=this.minChars||c&&!Ext.isEmpty(a))d||this.forceSameValueQuery||this.shouldQuery(a)?(this.lastQuery=a,"local"==this.mode?(this.selectedIndex=-1,b?this.store.clearFilter():this.store.filter(this.displayField,a),this.onLoad()):(this.store.baseParams[this.queryParam]=a,this.store.baseParams[this.queryValuesIndicator]=c,this.store.load({params:this.getParams(a)}),d||this.expand())):(this.selectedIndex=
-1,this.onLoad())},onStoreLoad:function(a,b,c){var d=c.params[this.queryParam]||a.baseParams[this.queryParam]||"";a=c.params[this.queryValuesIndicator]||a.baseParams[this.queryValuesIndicator];this.removeValuesFromStore&&this.store.each(function(a){this.usedRecords.containsKey(a.get(this.valueField))&&this.store.remove(a)},this);a&&(a=d.split(this.queryValuesDelimiter),Ext.each(a,function(a){this.remoteLookup.remove(a);(a=this.findRecord(this.valueField,a))&&this.addRecord(a)},this),this.setOriginal&&
(this.setOriginal=!1,this.originalValue=this.getValue()));""!==d&&this.allowAddNewData&&Ext.each(this.remoteLookup,function(a){"object"===typeof a&&a[this.valueField]===d&&(this.remoteLookup.remove(a),b.length&&b[0].get(this.valueField)===d?this.addRecord(b[0]):(a=this.createRecord(a),this.store.add(a),this.addRecord(a),this.addedRecords.push(a),function(){this.isExpanded()&&this.collapse()}.defer(10,this)))},this);var e=[];if(""===d)Ext.each(this.addedRecords,function(a){this.preventDuplicates&&
this.usedRecords.containsKey(a.get(this.valueField))||e.push(a)},this);else{var f=RegExp(Ext.escapeRe(d)+".*","i");Ext.each(this.addedRecords,function(a){this.preventDuplicates&&this.usedRecords.containsKey(a.get(this.valueField))||f.test(a.get(this.displayField))&&e.push(a)},this)}this.store.add(e);this.sortStore();0===this.store.getCount()&&this.isExpanded()&&this.collapse()}});Ext.reg("superboxselect",Ext.ux.form.SuperBoxSelect);Ext.ux.form.SuperBoxSelectItem=function(a){Ext.apply(this,a);Ext.ux.form.SuperBoxSelectItem.superclass.constructor.call(this)};
Ext.ux.form.SuperBoxSelectItem=Ext.extend(Ext.ux.form.SuperBoxSelectItem,Ext.Component,{initComponent:function(){Ext.ux.form.SuperBoxSelectItem.superclass.initComponent.call(this)},onElClick:function(a){var b=this.owner;b.clearCurrentFocus().collapse();b.navigateItemsWithTab?this.focus():(b.el.dom.focus(),function(){this.onLnkFocus();b.currentFocus=this}.defer(10,this))},onLnkClick:function(a){a&&a.stopEvent();this.preDestroy();this.owner.navigateItemsWithTab||this.owner.el.focus()},onLnkFocus:function(){this.el.addClass("x-superboxselect-item-focus");
this.owner.outerWrapEl.addClass("x-form-focus")},onLnkBlur:function(){this.el.removeClass("x-superboxselect-item-focus");this.owner.outerWrapEl.removeClass("x-form-focus")},enableElListeners:function(){this.el.on("click",this.onElClick,this,{stopEvent:!0});this.el.addClassOnOver("x-superboxselect-item x-superboxselect-item-hover")},enableLnkListeners:function(){this.lnk.on({click:this.onLnkClick,focus:this.onLnkFocus,blur:this.onLnkBlur,scope:this})},enableAllListeners:function(){this.enableElListeners();
this.enableLnkListeners()},disableAllListeners:function(){this.el.removeAllListeners();this.lnk.un("click",this.onLnkClick,this);this.lnk.un("focus",this.onLnkFocus,this);this.lnk.un("blur",this.onLnkBlur,this)},onRender:function(a,b){Ext.ux.form.SuperBoxSelectItem.superclass.onRender.call(this,a,b);var c=this.el;c&&c.remove();this.el=c=a.createChild({tag:"li"},a.last());c.addClass("x-superboxselect-item");var d=this.owner.navigateItemsWithTab?Ext.isSafari?"button":"a":"span";Ext.apply(c,{focus:function(){var a=
this.down(d+".x-superboxselect-item-close");a&&a.focus()},preDestroy:function(){this.preDestroy()}.createDelegate(this)});this.enableElListeners();c.update(this.caption);var e={tag:d,"class":"x-superboxselect-item-close",tabIndex:this.owner.navigateItemsWithTab?"0":"-1"};"a"===d&&(e.href="#");this.lnk=c.createChild(e);this.disabled?this.disableAllListeners():this.enableLnkListeners();this.on({disable:this.disableAllListeners,enable:this.enableAllListeners,scope:this});this.setupKeyMap()},setupKeyMap:function(){this.keyMap=
new Ext.KeyMap(this.lnk,[{key:[Ext.EventObject.BACKSPACE,Ext.EventObject.DELETE,Ext.EventObject.SPACE],fn:this.preDestroy,scope:this},{key:[Ext.EventObject.RIGHT,Ext.EventObject.DOWN],fn:function(){this.moveFocus("right")},scope:this},{key:[Ext.EventObject.LEFT,Ext.EventObject.UP],fn:function(){this.moveFocus("left")},scope:this},{key:[Ext.EventObject.HOME],fn:function(){var a=this.owner.items.get(0).el.focus();a&&a.el.focus()},scope:this},{key:[Ext.EventObject.END],fn:function(){this.owner.el.focus()},
scope:this},{key:Ext.EventObject.ENTER,fn:function(){}}]);this.keyMap.stopEvent=!0},moveFocus:function(a){a=this.el["left"==a?"prev":"next"]()||this.owner.el;a.focus.defer(100,a)},preDestroy:function(a){if(!1!==this.fireEvent("remove",this)){var b=function(){this.owner.navigateItemsWithTab&&this.moveFocus("right");this.hidden.remove();this.hidden=null;this.destroy()};a?b.call(this):this.el.hide({duration:0.2,callback:b,scope:this});return this}},kill:function(){this.hidden.remove();this.hidden=null;
this.purgeListeners();this.destroy()},onDisable:function(){this.hidden&&this.hidden.dom.setAttribute("disabled","disabled");this.keyMap.disable();Ext.ux.form.SuperBoxSelectItem.superclass.onDisable.call(this)},onEnable:function(){this.hidden&&this.hidden.dom.removeAttribute("disabled");this.keyMap.enable();Ext.ux.form.SuperBoxSelectItem.superclass.onEnable.call(this)},onDestroy:function(){Ext.destroy(this.lnk,this.el);Ext.ux.form.SuperBoxSelectItem.superclass.onDestroy.call(this)}});
Ext.reg("superboxselect",Ext.ux.form.SuperBoxSelect);Ext.form.SuperBoxSelect=Ext.ux.form.SuperBoxSelect;Ext.define("Application.components.percentSlider",{extend:"Ext.form.CompositeField",minValue:0,maxValue:100,decimalPrecision:1,increment:0.5,numberField:!1,initComponent:function(){this.slider_id=Ext.id();var a=[{xtype:"displayfield",value:this.leftTextValue||this.minValue+"%",flex:1,style:"text-align: right"},{xtype:"slider",id:this.slider_id,flex:4,decimalPrecision:this.decimalPrecision,increment:this.minIncrement||this.increment,disabled:this.disabled,value:this.value,minValue:this.minValue,maxValue:this.maxValue,
plugins:new Ext.slider.Tip({getText:function(a){return a.value+"%"}})},{xtype:"displayfield",value:this.rightTextValue||this.maxValue+"%",flex:1,style:"margin-right: 5px"}];this.numberField&&(!0===this.numberField&&(this.numberField={}),this.number_id=Ext.id(),a.unshift(Ext.apply({xtype:"Application.components.percentField",msgTarget:"qtip",allowNegative:!1,hideLabel:!0,flex:3,id:this.number_id,minValue:this.minValue,value:this.value||0,maxValue:this.maxValue},this.numberField)));Ext.apply(this,{items:a,
enableAnimation:!0,cls:"cleanbackground",msgTarget:"qtip"});Application.components.percentSlider.superclass.initComponent.call(this);this.numberField&&this.setupEvents()},getValue:function(){return Ext.getCmp(this.slider_id).getValue()},setValue:function(a){a=Number(a);return this.numberField?Ext.getCmp(this.number_id).setValue(a):Ext.getCmp(this.slider_id).setValue(a)},updateRanges:Ext.emptyFn,setupEvents:function(){Ext.getCmp(this.number_id).on("change",function(a,b){var c=Ext.getCmp(this.slider_id);
b=Number(a.getValue());this.fixedNumber=!0;c.setValue(b,this.enableAnimation);this.fixedNumber=!1},this);Ext.getCmp(this.slider_id).on("change",function(a,b){this.fixedNumber||Ext.getCmp(this.number_id).setValue(b)},this);this.on("sync",function(){Ext.getCmp(this.slider_id).syncThumb()},this)},getSlider:function(){return Ext.getCmp(this.slider_id)},disable:function(){Application.components.percentSlider.superclass.disable.call(this);this.getSlider().disable()},enable:function(){Application.components.percentSlider.superclass.enable.call(this);
this.getSlider().enable()}});Ext.define("Application.components.multiuploadPanel",{extend:"Ext.panel.Panel",withDescr:!0,comboDescr:!1,withJustification:!1,files:[],uploadText:!1,uploadParams:{},autoUpload:!1,simultaneousUpload:!1,uploadHandler:null,deleteHandler:null,uploadName:"file",docTypeStore:null,maxFiles:null,uploaded_files_id:null,uploaded_files_ep9_id:null,disabledUpload:!1,initComponent:function(){var a=this,b=Ext.id();this.upload_panel_id=b;var c=[];this.addEvents("beforeupload");this.addEvents("uploadcomplete");
this.addEvents("deletecomplete");for(var d=0;d<this.files.length;d++)c.push(this.getFileInfoPanel(this.files[d]));d=[];this.items&&d.push.apply(d,this.items);this.uploadText||(this.uploadText=this.autoUpload?"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u0430\u0439\u043b":"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u0430\u0439\u043b");var e={disabled:a.disabledUpload,xtype:"Application.components.UploadFilePanel",
id:b,withDescr:this.withDescr,comboDescr:this.comboDescr,formLabelWidth:this.formLabelWidth,formDescriptionLabel:this.formDescriptionLabel,withJustification:this.withJustification,docTypeStore:this.docTypeStore,allowCancel:!1,requiredDescr:void 0!==a.requiredDescr?a.requiredDescr:!0,requiredMark:void 0!==a.requiredMark?a.requiredMark:!1,required:a.required?!0:!1,uploadText:this.autoUpload?this.uploadText:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0444\u0430\u0439\u043b",monitorValid:this.autoUpload,
listeners:{fileselected:function(){a.autoUpload&&f()}}};null==a.uploaded_files_ep9_id&&(a.uploaded_files_ep9_id=Ext.id(),d.push({xtype:"fieldset",title:"\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b \u043f\u043e \u043d\u0435\u0441\u043e\u0441\u0442\u043e\u044f\u0432\u0448\u0435\u0439\u0441\u044f \u043a\u043e\u043d\u043a\u0443\u0440\u0435\u043d\u0442\u043d\u043e\u0439 \u0437\u0430\u043a\u0443\u043f\u043a\u0435",border:!0,id:a.uploaded_files_ep9_id,items:c,hidden:!0}));null==a.uploaded_files_id&&
(a.uploaded_files_id=Ext.id(),d.push({xtype:"panel",border:!1,id:a.uploaded_files_id,cls:"shallowsubpanel",items:c}));d.push(e);var f=function(){var c=Ext.getCmp(b);if(c.isValid()&&!1!==a.fireEvent("beforeupload",a)){var d=a.uploadParams;d.descr=c.getDescription();var f=c.getDocumentType();f&&(d.document_type=f);if(f=c.getDescrId())d.descr=d.descr+". "+f;f=c.getIsJustificationDocument();if(d.is_justification_document=f)d.descr="\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442-\u043e\u0431\u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u044f - "+
d.descr;var l={tag:"div",style:"visibility: hidden; display:none;"},l=Ext.DomHelper.append(Ext.getBody(),l),f=Ext.get(c.getFilePanel().getFileInputId()).dom;f.setAttribute("name",a.uploadName);var q=function(){c.getEl().unmask();Main.app.un("rpcerror",q);s.destroy();Ext.fly(l).remove();a.simultaneousUpload?(a.remove(c),a.doLayout()):c.reset()},s=new Ext.form.FormPanel({renderTo:l,api:{submit:a.uploadHandler},baseParams:d,paramsAsHash:!0,fileUpload:!0,hidden:!0,items:[{contentEl:f}],listeners:{actioncomplete:function(b,
c){c&&c.result&&(c.result.success?a.hideFileList||a.addFileInfo(c.result.file):echoResponseMessage(c.result));a.fireEvent("uploadcomplete",c.result,c);q()},actionfailed:function(a,b){q();b&&b.result&&echoResponseMessage(b.result)}}});Main.app.on("rpcerror",q);c.getEl().mask("\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0444\u0430\u0439\u043b\u0430","x-mask-loading");s.getForm().submit();a.simultaneousUpload&&(b=Ext.id(),a.upload_panel_id=b,e.id=b,e.docTypeStore=this.docTypeStore,a.add(e),a.doLayout())}},
c=null;this.autoUpload||(c=[{xtype:"button",text:this.uploadText,handler:f}]);Ext.apply(this,{items:d,buttons:c,addFileInfo:function(b){var c=Ext.getCmp(a.uploaded_files_id),d=Ext.getCmp(a.uploaded_files_ep9_id);b.document_type==VOCAB_DOC_TYPE_EP9_DOC_ID?b.actual&&(d.add(this.getFileInfoPanel(b)),d.show()):(c.add(this.getFileInfoPanel(b)),a.hideFilePanelIfBig(c));d.doLayout();this.fireEvent("addfilecomplete",b)},getFilesInfo:function(){var b=[];Ext.getCmp(a.uploaded_files_id).items.each(function(a){a.file&&
b.push(a.file)});return b},removeFileInfo:function(b,c){if(c)if("string"==typeof c&&0<c.length)c=Ext.getCmp(c);else return;else c=Ext.getCmp(a.uploaded_files_id);c.items.each(function(d){var e=!1;if(e=Ext.isFunction(b)?b(d.file):d.file===b)c.remove(d),a.hideFilePanelIfBig()},this)},updateFileInfo:function(b){var c=Ext.getCmp(a.uploaded_files_id);c.items.each(function(d){var e=!1;if(e=Ext.isFunction(b)?b(d.file):d.file===b)d.file&&(d.file.actual=!1,d.file.obsolete=!0,d.update(getFileInfoHtml(d.file))),
a.hideFilePanelIfBig(c)},this)},hideFilePanelIfBig:function(c){c||(c=Ext.getCmp(a.uploaded_files_id));this.maxFiles&&(c.items.getCount()>=this.maxFiles?Ext.getCmp(b).hide():Ext.getCmp(b).show());c.doLayout()},deleteFile:function(a){var b=this,c=function(c){c.success?(b.updateFileInfo(a),b.fireEvent("deletecomplete",a)):echoResponseMessage(c)};this.deleteHandler?this.deleteHandler(a,c):c({success:!0})},removeAllInfo:function(){this.removeFileInfo(function(){return!0});this.removeFileInfo(function(){return!0},
a.uploaded_files_ep9_id)}});Application.components.multiuploadPanel.superclass.initComponent.call(this)},getFileInfoPanel:function(a){return getFileInfoPanel(a,{deleteHandler:this.deleteHandler?this.deleteFile.createDelegate(this):!1},!1)},getFileInfoHtml:getFileInfoHtml,setValues:function(a){if(a){this.removeAllInfo();a.sort(function(a,b){return parseDate(a.date_added)>parseDate(b.date_added)?1:-1});for(var b=0;b<a.length;b++)this.addFileInfo(a[b]);this.fireEvent("valuessetted")}},reset:function(){this.removeAllInfo()},
getValues:function(){return this.getFilesInfo()},updateByDocTypeStore:function(a){this.docTypeStore=a;Ext.getCmp(this.upload_panel_id).updateByDocTypeStore(a)}});Ext.define("Application.components.promptWindow",{extend:"Ext.Window",resizable:!1,autoHeight:!0,width:450,initComponent:function(){this.items=[{xtype:this.cmpType,autoHeight:!0}];this.cmpParams&&(this.cmpParams.curWindow=this,Ext.apply(this.items[0],this.cmpParams));Application.components.promptWindow.superclass.initComponent.call(this)}});Application.components.FilesPanelMU=Ext.extend(Ext.Panel,{initComponent:function(){for(var a=[],b=this,c=0,d=b.file_panels.length;c<d;++c)(function(c){var d=b.file_panels[c];d.required="\u041f\u0440\u043e\u0447\u0438\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b"==d.name?!1:!0;a.push({title:d.name,frame:!0,cls:"spaced-bottom",items:[{cls:"spaced-panel",style:"font-size: 9px",hidden:void 0===d.descr||0==d.descr.length,html:d.descr},{xtype:"Application.components.multiuploadPanel",name:d.req_id?
b.cmptype+"_docs_"+d.req_id+"":b.cmptype+"_docs",uploadHandler:b.uploadHandler,deleteHandler:b.deleteHandler,autoUpload:!0,required:d.required,listeners:{beforeupload:function(a){a.uploadParmas={};a.uploadParams.contragent_id=b.contragent_id;d.req_id&&(a.uploadParams.requirement_id=d.req_id);a.uploadParams.doctype=b.cmptype+"_files"}}},{border:!1,hideTitle:!0,html:ACCEPTED_FILES}]})})(c);Ext.apply(this,{frame:!1,items:a,setValues:function(a){setComponentValues(this,a,!1)}});Application.components.FilesPanelMU.superclass.initComponent.call(this)}});Ext.define("Application.components.quantityField",{extend:"Application.components.numberField",zeroText:"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043d\u0435 \u043d\u0443\u043b\u0435\u0432\u044b\u043c",inputText:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043d\u044f\u0442\u044c \u0432\u0430\u0448 \u0432\u0432\u043e\u0434. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0447\u0438\u0441\u043b\u043e, \u043e\u0442\u0434\u0435\u043b\u044f\u044f \u0434\u0435\u0441\u044f\u0442\u0438\u0447\u043d\u044b\u0435 \u0437\u043d\u0430\u043a\u0438 \u0437\u0430\u043f\u044f\u0442\u043e\u0439 \u0438\u043b\u0438 \u0442\u043e\u0447\u043a\u043e\u0439, \u0438 \u0440\u0430\u0437\u0434\u0435\u043b\u044f\u044f \u0442\u044b\u0441\u044f\u0447\u0438 (\u0435\u0441\u043b\u0438 \u043d\u0443\u0436\u043d\u043e) \u043f\u0440\u043e\u0431\u0435\u043b\u0430\u043c\u0438",
negativeText:"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c",minValueText:"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u044c\u0448\u0435 \u0447\u0435\u043c",maxValueText:"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043d\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u0447\u0435\u043c",
renderPrecision:!0,allowFloat:!0,allowBlank:!1,allowZero:!1,initComponent:function(){this.allowBlank&&Ext.apply(this,{allowZero:!0});Application.components.quantityField.superclass.initComponent.call(this)},parser:function(a){return""==a?0:this.allowFloat?parseFloat(a):parseInt(a)},renderer:function(a){if(this.allowBlank&&0==parsePrice(a))return"";var b="0";this.allowFloat&&(this.renderPrecision||-1!=parsePrice(a).toString().indexOf("."))&&(b="0.00");if(void 0!==this.precision)for(var b="0.",c=0;c<
this.precision;c++)b+="0";return Ext.util.Format.number(a,b)},validator:function(a){a=this.parser(a);return!this.allowNegative&&0>a?this.negativeText:this.allowZero||0!=a?null!==this.minValue&&a<this.minValue?this.minValueText+" "+this.renderer(this.minValue):null!==this.maxValue&&a>this.maxValue?this.maxValueText+" "+this.renderer(this.maxValue):!1===a?this.inputText:!0:this.zeroText}});Ext.define("Application.components.imgSingleView",{extend:"Ext.Panel",initComponent:function(){var a=Ext.id();this.addEvents("itemSelected");var b=new Ext.XTemplate('<div class="details">','<tpl for=".">','<div class="details-info">',"<h4>{descr}</h4>",'<img src="{previewLink}" height="320"><br>','<span><a href="{link}" target="_blank">\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043f\u043e\u043b\u043d\u043e\u0440\u0430\u0437\u043c\u0435\u0440\u043d\u043e\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435</a></span>',
"</div>","</tpl>","</div>");this.file_id=null;Ext.apply(this,{html:"",autoScroll:!0,id:a});this.addListener("itemSelected",function(a){this.file_id=a.id;a=b.apply(a);this.update(a)});this.addListener("itemDeleted",function(a){this.file_id==a&&this.update(null)});Application.components.imgSingleView.superclass.initComponent.call(this)}});Ext.define("Application.components.accreditationPanel",{extend:"Ext.panel.Panel",autoHeight:!0,border:!1,style:"margin: 5px 5px 10px; border-width: 1px;",bodyStyle:"padding: 10px 10px 0;",initComponent:function(){var a=this;Ext.apply(this,{labelWidth:300,layout:"form",defaults:{anchor:"100%",allowBlank:!1,defaults:{allowBlank:!1,anchor:"100%"}},items:[{xtype:"textfield",readOnly:!0,value:parseDate(a.accred.date_resolved).format("d.m.Y H:i"),style:"background: transparent; border: none;",fieldLabel:"\u0414\u0430\u0442\u0430 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0430\u043a\u043a\u0440\u0435\u0434\u0438\u0442\u0430\u0446\u0438\u0438"},
{xtype:"textfield",readOnly:!0,style:"background: transparent; border: none;",value:"customer"==a.accredType?a.cmpData.valid_for_cust:a.cmpData.valid_for_suppl,fieldLabel:"\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f \u0430\u043a\u043a\u0440\u0435\u0434\u0438\u0442\u0430\u0446\u0438\u0438"},{xtype:"Application.components.filelistPanel",title:"\u0410\u043a\u043a\u0440\u0435\u0434\u0438\u0442\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b",
withHash:!1,listeners:{beforerender:function(){var b=null;"supplier"==a.accredType&&(b=a.cmpData.accreditation_files_with_reqs.supplier);"customer"==a.accredType&&(b=a.cmpData.accreditation_files_with_reqs.customer);var c=[];if(b)for(var d=0;d<b.length;++d)if(b[d].html.length){c.push({subheader:b[d].req_name+":"});for(var e=0;e<b[d].html.length;++e)c.push(b[d].html[e])}c&&this.setValues(c)}}},{xtype:"Application.components.filelistPanel",title:"\u0414\u043e\u0432\u0435\u0440\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439",
withHash:!1,hidden:!0,listeners:{beforerender:function(){var b=a.cmpData.procuracy_files,c=[];if(void 0!==b&&(this.hidden=!1,b))for(var d=0;d<b.length;++d)c.push(b[d]);c&&this.setValues(c)}}}]});Application.components.accreditationPanel.superclass.initComponent.call(this)}});Ext.define("Application.components.treeWindow",{extend:"Ext.Window",title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435",type:"type",keyName:"type_id",autoSize:!0,loaderConfig:{},initComponent:function(){this.tree_id=Ext.id();this.addEvents("itemselected");this.addEvents("search");this.autoSize&&Ext.apply(this,{width:0.8*Ext.getBody().getWidth(),height:0.9*Ext.getBody().getHeight()});var a={xtype:"Application.components.treeLoader",id:this.tree_id,selection:this.selection,listeners:{scope:this,
selected:function(a){this.fireEvent("itemselected",this.idChange(a));this.close()}}};Ext.apply(a,this.loaderConfig);Ext.apply(this,{bodyStyle:"padding: 10px",layout:"fit",items:a,buttons:[{xtype:"button",text:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c",scope:this,handler:this.selectHandler},{text:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",scope:this,handler:this.closeHandler}]});Application.components.treeWindow.superclass.initComponent.call(this)},idChange:function(a){Ext.isEmpty(a.id)||(a[this.keyName]=
a.id,delete a.id);return a},selectHandler:function(){var a=Ext.getCmp(this.tree_id).getSelectedObject(),b=!1;a?a.leaf||(Main.config.allow_select_okved_top_level||"okved"!=Ext.getCmp(this.tree_id).type&&"okved2"!=Ext.getCmp(this.tree_id).type)&&(Main.config.allow_select_okdp_top_level||"okdp"!=Ext.getCmp(this.tree_id).type)||(b="\u0421\u043b\u0435\u0434\u0443\u0435\u0442 \u0432\u044b\u0431\u0438\u0440\u0430\u0442\u044c \u043f\u0443\u043d\u043a\u0442, \u0430 \u043d\u0435 \u0446\u0435\u043b\u044b\u0439 \u0440\u0430\u0437\u0434\u0435\u043b"):
b="\u0412\u044b \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043b\u0438 \u043f\u0443\u043d\u043a\u0442!";b?Ext.Msg.alert("\u041e\u0448\u0438\u0431\u043a\u0430",b):(this.fireEvent("itemselected",this.idChange(a)),this.close())},closeHandler:function(){this.close()}});Ext.define("Application.components.procedureDataPanel",{extend:"Ext.Panel",autoHeight:!0,initComponent:function(){var a=this,b=Ext.id();this.addEvents("procedureloaded");Ext.apply(this,{labelWidth:300,defaults:{anchor:"100%",defaults:{border:!1,anchor:"100%",labelWidth:300}},bodyCssClass:"subpanel",items:[],listeners:{afterrender:function(){a.procedureAutoLoad&&void 0===a.tplData?RPC.Procedure.load(a.procedure_id,function(b){a.fireEvent("procedureloaded",b.procedure)}):a.fireEvent("procedureloaded",
a.tplData)},procedureloaded:function(c){c={xtype:"panel",id:b,tpl:getProcedureDataTemplate(),data:c};a.insert(0,c);a.doLayout()}}});Application.components.procedureDataPanel.superclass.initComponent.call(this)}});Ext.define("Application.components.nomenclatureTree",{extend:"Ext.tree.Panel",useArrows:!0,autoScroll:!0,animate:!0,containerScroll:!0,type:this.type||"okdp",border:!1,initComponent:function(){var a=this;this.addEvents("nomenclature_selected");this.rootName="okdp"==this.type?"D":"0";var b;b="contragent_categories"==a.type?RPC.Reference.categories:"procedure_subject_codes"==a.type?RPC.Reference.subjectcodes:"procedure_inner_classification"==a.type?RPC.Reference.innerclassification:RPC.Reference.nomenclature;
Ext.apply(this,{loader:new Ext.tree.TreeLoader({directFn:function(c,d){b({node:c,type:a.type},d)},baseParams:{type:this.type,for_combo:!1}}),rootVisible:!1,root:{expanded:!0,id:this.rootName},listeners:{load:function(b){a.unmask();if(b&&b.childNodes)for(var d=0;d<b.childNodes.length;d++){var e=b.childNodes[d];e.leaf&&(e.iconCls="icon-silk-accept");e.name=e.text;0>["contragent_categories","procedure_subject_codes","procedure_inner_classification"].indexOf(a.type)&&(e.text=e.id+" "+e.text)}},dblclick:function(b){b&&
b.leaf&&(a.setNodeData(b),this.fireEvent("nomenclature_selected",b))},render:function(){a.mask("\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430")}}});if(this.selection)this.on("afterrender",function(){this.selectPath(this.selection.path)},this,{once:!0});Application.components.nomenclatureTree.superclass.initComponent.call(this)},setNodeData:function(a){if(a){for(var b=a.name,c=a.parentNode;c&&this.rootName!==c.id;)b=c.name+" - "+b,c=c.parentNode;a.full_name=b;a.path=a.getPath()}},mask:function(a){this.getEl().mask(a,
"x-mask-loading x-move-down")},unmask:function(){this.getEl().unmask()},getSelectedObject:function(){var a=this.getSelectionModel().getSelectedNode();a&&this.setNodeData(a);return a}});Ext.define("Application.components.priceField",{extend:"Application.components.numberField",decimalPrecision:2,minValue:ONE_KOPECK,allowNegative:!1,maxValue:MAX_PRICE,parser:function(a){a=parsePrice(a);return Math.round(100*a)/100},renderer:function(a){return Ext.util.Format.price(a)}});Ext.define("Application.components.actionPanel",{extend:"Ext.panel.Panel",style:"padding-top: 20px",border:!1,autoHeight:!0,defaults:{width:800,style:"padding-bottom: 30px; margin-left: auto; margin-right: auto;"},initComponent:function(){var a=[{xtype:this.cmpType,title:this.title,autoHeight:!0,outerPanel:this}];this.width&&(a[0].width=this.width,delete this.width);this.header=!1;this.preventHeader=!0;this.cmpParams&&Ext.apply(a[0],this.cmpParams);this.items=this.forceHeader?{xtype:"panel",title:this.title,
layout:"fit",items:a}:a;Application.components.actionPanel.superclass.initComponent.call(this)}});Ext.ns("Ext.ux.form");
Ext.define("Ext.ux.form.DateInterval",{extend:"Ext.form.CompositeField",label_from:"\u0441:",label_till:"\u043f\u043e:",format:"d.m.Y",cmp_id:"interval",msgTarget:"side",defaults:{flex:1},initComponent:function(){var a=this;this.items=[{xtype:"displayfield",width:30,value:this.label_from},{xtype:"datefield",format:this.format,ref:"from",name:this.cmp_id+"_from",id:this.cmp_id+"_from_id",listeners:{select:function(b,c){Ext.getCmp(a.cmp_id+"_till_id").setMinValue(c);a.fireEvent("select",c)}}},{xtype:"displayfield",
width:30,style:{textAlign:"right"},value:this.label_till},{xtype:"datefield",format:this.format,ref:"till",name:this.cmp_id+"_till",id:this.cmp_id+"_till_id",listeners:{select:function(b,c){Ext.getCmp(a.cmp_id+"_from_id").setMaxValue(c);a.fireEvent("select",c)}}}];this.getValue=function(){return{date_from:Ext.getCmp(this.cmp_id+"_from_id").getValue(),date_till:Ext.getCmp(this.cmp_id+"_till_id").getValue(),id:this.db_id,number:this.number}};this.setValue=function(a,c,d){Ext.getCmp(this.cmp_id+"_from_id").setValue(a);
Ext.getCmp(this.cmp_id+"_till_id").setValue(c);this.db_id=d};Ext.ux.form.DateInterval.superclass.initComponent.call(this)}});Ext.reg("dateinterval",Ext.ux.form.DateInterval);Ext.form.DateInterval=Ext.ux.form.DateInterval;Ext.define("Application.components.sliderField",{extend:"Ext.form.CompositeField",minValue:0,maxValue:1E3,numberParams:{},sliderParams:{},initComponent:function(){this.ids={slider:Ext.id(),number:Ext.id()};var a=Ext.apply({xtype:"numberfield",msgTarget:"qtip",decimalPrecision:2,allowNegative:!1},this.numberParams);Ext.apply(a,{id:this.ids.number,hideLabel:!0,flex:3,minValue:this.minValue,maxValue:this.maxValue});var b=Ext.apply({xtype:"slider",flex:4,decimalPrecision:1,increment:0.5,plugins:new Ext.slider.Tip({getText:function(a){return a.value+
" %"}})},this.sliderParams);Ext.apply(b,{id:this.ids.slider,hideLabel:!0});this.addEvents("sync");Ext.apply(this,{items:[a,{xtype:"displayfield",value:"0%",style:"text-align: right",flex:1},b,{xtype:"displayfield",value:"100%",flex:1,style:"margin-right: 5px"}],enableAnimation:!0,cls:"cleanbackground",msgTarget:"qtip"});Application.components.sliderField.superclass.initComponent.call(this);this.setupEvents()},getValue:function(){return Ext.getCmp(this.ids.number).getValue()},setValue:function(a){return Ext.getCmp(this.ids.number).setValue(a)},
updateRanges:function(a,b){var c=Ext.getCmp(this.ids.number);a=a||0;b=b||0;this.minValue=a;this.maxValue=b;c.minValue=a;c.maxValue=b;this.enableAnimation=!1;c.fireEvent("change",c,c.getValue());this.enableAnimation=!0;c.isValid();this.getSlider().syncThumb()},setupEvents:function(){Ext.getCmp(this.ids.number).on("change",function(a,b){if(this.maxValue!=this.minValue){var c=Ext.getCmp(this.ids.slider),d=0;b=a.getValue();Ext.isNumber(b)&&(d=100*(b-this.minValue)/(this.maxValue-this.minValue));this.fixedNumber=
!0;c.setValue(d,this.enableAnimation);this.fixedNumber=!1}},this);Ext.getCmp(this.ids.slider).on("change",function(a,b){if(!this.fixedNumber&&this.maxValue!=this.minValue){var c=this.minValue+b/100*(this.maxValue-this.minValue);Ext.getCmp(this.ids.number).setValue(c)}},this);this.on("sync",function(){Ext.getCmp(this.ids.slider).syncThumb()},this)},getSlider:function(){return Ext.getCmp(this.ids.slider)},disable:function(){Application.components.sliderField.superclass.disable.call(this);this.getSlider().disable()},
enable:function(){Application.components.sliderField.superclass.enable.call(this);this.getSlider().enable()}});Ext.define("Application.components.filelistPanel",{extend:"Ext.form.FieldSet",initComponent:function(){var a=Ext.id(),b=Ext.id();this.filePanelId=a;this.empty_panel_id=b;this.linkListId=Ext.id();b=[];Ext.isEmpty(this.files)&&(this.files=[]);Ext.isEmpty(this.withHash)&&(this.withHash=!0);for(var c=0;c<this.files.length;c++)this.files[c].subheader?b.push({border:!1,cls:"spaced-bottom-shallow",html:"<b>"+this.files[c].subheader+"</b>"}):b.push(this.getFileInfoPanel(this.files[c],this.withHash));this.totalFiles=
this.files.length;this.linkListHidden=3>=this.totalFiles;c=[];this.items&&Ext.apply(c,this.items);this.files.length||b.push({border:!1,html:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0443\u0441\u0442",id:this.empty_panel_id});c.push({xtype:"panel",border:!1,id:a,items:b});this.items=c;this.buttons=[{text:"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0438 \u043d\u0430 \u0444\u0430\u0439\u043b\u044b",id:this.linkListId,hidden:this.linkListHidden,handler:this.getFilesLinks,
scope:this}];Application.components.filelistPanel.superclass.initComponent.call(this)},addFileInfo:function(a){var b=Ext.getCmp(this.filePanelId);b.remove(this.empty_panel_id,!0);this.files.push(a);a.subheader?b.add({border:!1,cls:"spaced-bottom-shallow",html:"<b>"+a.subheader+"</b>"}):b.add(this.getFileInfoPanel(a));this.totalFiles++;this.linkListHidden&&3<this.totalFiles&&(Ext.getCmp(this.linkListId).show(),this.linkListHidden=!1);b.doLayout();return this},getFilesLinks:function(){for(var a=[],
b=0;b<this.files.length;b++)if(this.files[b].link){var c=this.files[b].link;/^http(s)?:\/\//.test(c)||(c=Main.app.baseUrl+(0==c.indexOf("/")?"":"/")+c);this.files[b].key&&(c+=(0>c.indexOf("?")?"?":"&")+"key="+this.files[b].key);a.push(c)}var a=a.join("\n"),d=new Ext.Window({title:"\u0421\u0441\u044b\u043b\u043a\u0438 \u043d\u0430 \u0444\u0430\u0439\u043b\u044b",layout:"anchor",width:800,height:500,frame:!0,cls:"x-panel-mc",plugins:[Ext.ux.plugins.LimitSize],defaults:{border:!1},items:[{xtype:"panel",
style:"padding: 5px 2px;",height:30,anchor:"100%",html:"\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0441\u0441\u044b\u043b\u043e\u043a \u043d\u0430 \u0444\u0430\u0439\u043b\u044b \u0432 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0443 \u0434\u043b\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0433\u043e \u0441\u043a\u0430\u0447\u0438\u0432\u0430\u043d\u0438\u044f"},
{xtype:"textarea",autoHeight:!1,readOnly:!0,anchor:"100% -30",value:a,listeners:{render:function(){var a=this.getEl();a.on("click",function(){a.dom.focus();a.dom.select()})}}}],buttons:[{iconCls:"icon-silk-page_copy",text:"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0438 \u0432 \u0431\u0443\u0444\u0435\u0440 \u043e\u0431\u043c\u0435\u043d\u0430",plugins:[Ext.ux.plugins.Clipboard],clipboardText:a,handler:Ext.emptyFn},{text:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",
handler:function(){d.close()}}]});d.show()},getFileInfoPanel:function(a){return getFileInfoPanel(a,{deleteHandler:!1},this.withHash)},setValues:function(a){if(a)for(var b=0;b<a.length;b++)this.addFileInfo(a[b])}});Ext.define("Application.components.okvdField",{extend:"Application.components.autocompleteField",emptyText:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u043b\u0438 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0438\u0437 \u041e\u041a\u0412\u042d\u0414",initComponent:function(){this.directFn=RPC.Reference.okvdSearch;this.storeValueField="okved";Application.components.okvdField.superclass.initComponent.call(this)}});Ext.define("Application.components.LotHistoryPanel",{extend:"Ext.grid.GridPanel",initComponent:function(){var a=getLotHistoryStore(this.lot_id);Ext.apply(this,{store:a,columns:[{header:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",width:150,renderer:function(a,c,d){return d.data.user.username+" ("+d.data.user.last_name+" "+d.data.user.first_name+" "+d.data.user.middle_name+")"}},{header:"\u0414\u0430\u0442\u0430 \u0432\u043d\u0435\u0441\u0435\u043d\u0438\u044f \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439",
width:150,renderer:Ext.util.Format.dateRenderer("d.m.Y H:i"),dataIndex:"date"},{header:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430",width:380,dataIndex:"field"},{header:"\u041d\u043e\u043c\u0435\u0440 \u043b\u043e\u0442\u0430",width:100,dataIndex:"lot_id"},{header:"\u0421\u0442\u0430\u0440\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435",dataIndex:"from",renderer:function(a,c,d){Main.config.show_gmt||
"\u0414\u0430\u0442\u0430 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438"!=d.data.field&&"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f \u043f\u043e\u0434\u0430\u0447\u0438 \u0437\u0430\u044f\u0432\u043e\u043a \u043d\u0430 \u0443\u0447\u0430\u0441\u0442\u0438\u0435"!=d.data.field||"\u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e"==d.data.from||(a=Ext.util.Format.substr(a,0,19));return a},width:200},{header:"\u041d\u043e\u0432\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435",
dataIndex:"to",renderer:function(a,c,d){Main.config.show_gmt||"\u0414\u0430\u0442\u0430 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438"!=d.data.field&&"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f \u043f\u043e\u0434\u0430\u0447\u0438 \u0437\u0430\u044f\u0432\u043e\u043a \u043d\u0430 \u0443\u0447\u0430\u0441\u0442\u0438\u0435"!=d.data.field||"\u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e"==d.data.date||
(a=Ext.util.Format.substr(a,0,19));return a},width:200}],viewConfig:{forceFit:!0}});Application.components.LotHistoryPanel.superclass.initComponent.call(this)}});Application.components.FilesPanel=Ext.extend(Ext.Panel,{initComponent:function(){for(var a=[],b=this,c={withDescr:!0,required:!1},d=0,e=b.file_panels.length;d<e;++d)(function(d){var e=b.file_panels[d];d=b.uploadFilePanel(e,c,b);a.push({title:e.name,xtype:b.is_panel?"panel":"fieldset",frame:b.is_panel?!0:!1,cls:b.is_panel?"spaced-panel":"spaced-fieldset",bodyCssClass:b.is_panel?"subpanel-top-padding":"",items:[{cls:"spaced-panel",style:"font-size: 9px",hidden:void 0===e.descr||null==e.descr||0==e.descr.length,
html:null==e.descr?"":e.descr},{xtype:"panel",id:"files_uploaded_"+(e.req_id||""),cls:"spaced-bottom",border:!1,hideTitle:!0},{xtype:"panel",hideTitle:!0,border:!1,items:[d]},{border:!1,hideTitle:!0,html:ACCEPTED_FILES}],buttons:[{text:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442",hidden:void 0!==b.onlyOne?b.onlyOne:!1,handler:function(){var a=b.uploadFilePanel(e,c,b),d=this.findParentByType("panel");d.insert(d.items.length-1,a);d.doLayout()}}]})})(d);
Ext.apply(this,{frame:!1,border:!1,onlyOne:void 0!==this.onlyOne?this.onlyOne:!1,items:a});Application.components.FilesPanel.superclass.initComponent.call(this)},uploadFilePanel:function(a,b,c){return{xtype:"Application.components.UploadFilePanel",fieldName:a.req_id?"docs["+a.req_id+"][]":"docs[]",descrName:a.req_id?"docs_descr["+a.req_id+"][]":"docs_descr[]",withDescr:void 0!==a.withDescr?a.withDescr:b.withDescr,required:void 0!==a.required?a.required:b.required,requiredMark:a.requiredMark?!0:!1,
allowCancel:void 0!==c.onlyOne?!c.onlyOne:!0}},isFileAttached:function(){var a=!0;this.items.each(function(b){for(var c=!1,d=2;d<b.items.length-1;d++){var e;if((e=2==d?b.items.get(d).items.get(0):b.items.get(d))&&e.isFileAttached()){c=!0;break}}return c?!0:a=!1});return a}});Ext.define("Application.components.imgGalleryDataView",{extend:"Ext.Panel",initComponent:function(){var a=this,b=Ext.id();this.addEvents("itemSelected");this.addEvents("uploadcomplete");this.addEvents("itemsLoaded");this.addEvents("itemDeleted");var c=[],d=new Ext.XTemplate("<ul>",'         <tpl for=".">','<li class="thumb-wrap" id="{id}">',"<strong>{descr}</strong>",'<img src="{thumbLink}" width="80" />','<tpl if="values.main_pic"><span style="color: red;font-weight: bold;">\u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0435 \u0444\u043e\u0442\u043e</span></tpl>',
"</li>","</tpl>","</ul>");this.fileitems||(this.fileitems=[]);this.store=new Ext.data.JsonStore({autoDestroy:!0,storeId:"galeryStore",proxy:new Ext.data.MemoryProxy,idProperty:"id",root:"images",fields:"id name descr file hash size type link thumbLink previewLink main_pic".split(" ")});var e=new Ext.DataView({autoScroll:!0,store:this.store,tpl:d,id:"image-galery",height:370,singleSelect:!0,overClass:"x-view-over",itemSelector:"li.thumb-wrap",style:"border:1px solid #99BBE8; border-top-width: 0",plugins:[],
listeners:{selectionchange:function(a,b){},click:function(){var b=e.getSelectedRecords();a.fireEvent("itemSelected",b[0].data)}}});this.editable&&(b=new Ext.Toolbar({id:b,style:"border:1px solid #99BBE8;"}),b.add("->",{tooltip:"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u043c",icon:"ico/status4.png",handler:function(){var b=e.getSelectedRecords();0!=b.length&&performRPCCall(RPC_tsn.Procedure.setmainpic,[{id:b[0].data.id,procedure_id:a.procedure_id}],null,
function(b){b.success?a.store.loadData(b.files):echoResponseMessage(b)})}},{tooltip:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",icon:"ico/delete.png",handler:function(){var b=e.getSelectedRecords();if(0!=b.length){var c={id:b[0].data.id,type:b[0].data.type};performRPCCall(RPC_tsn.Procedure.removeFile,[c],null,function(d){d.success?(a.store.remove(b[0]),a.store.reload(),a.fireEvent("itemDeleted",c.id)):echoResponseMessage(d)})}}}),c.push(b));c.push(e);this.items=c;this.addListener("uploadcomplete",
function(a,b){this.addRecord(a.file);a.procedure_id&&a.procedure_id!=this.procedure_id&&(this.procedure_id=a.procedure_id)});this.addListener("itemsLoaded",function(a){this.store.loadData(a)});e.addListener("beforerender",function(){var a=new Ext.ux.DataViewTransition({duration:550,idProperty:"id"});e.plugins.push(a)});Application.components.imgGalleryDataView.superclass.initComponent.call(this)},addRecord:function(a){a=new this.store.recordType(a);this.store.insert(0,a);return this},getFileItems:function(){var a=
[];this.store.each(function(b){a.push(b.data)});return a}});Ext.define("Application.components.dateField",{extend:"Ext.form.DateField",enableDateRange:function(a,b){a&&null!=a||(a=new Date);this.setMinValue(a);Main.config.date_disabling&&b&&null!=b&&this.setMaxValue(b)},makeDateDisabling:function(a,b,c){if(c){var d=new Date;a&&(d=parseDate(a));a=Main.config.allow_same_date_enabling?d:d.add(Date.DAY,1);var e=null;c[b+"_from"]&&""!=c[b+"_from"]&&Main.config.date_disabling&&(a=d.add(Date.DAY,1+c[b+"_from"]));c[b+"_to"]&&""!=c[b+"_to"]&&Main.config.date_disabling&&
(e=d.add(Date.DAY,1+c[b+"_to"]));this.enableDateRange(a,e)}},setValue:function(a){Ext.isDate(a)||(a=parseDate(a)||a);Application.components.dateField.superclass.setValue.call(this,a)}});Application.components.UploadFilePanel=Ext.extend(Ext.Panel,{allowCancel:!0,maxUploadSize:MAX_UPLOAD_SIZE,required:!1,requiredDescr:!1,uploadText:"\u041e\u0431\u0437\u043e\u0440",docTypeStore:null,formLabelWidth:!1,formDescriptionLabel:!1,withJustification:!1,initComponent:function(){var a=this;this.fieldName&&(this.fieldname=this.fieldName);void 0!==this.allowBlank&&(this.required=!this.allowBlank);this.fieldname&&!this.descrName&&(this.descrName=this.fieldname+"_descr");if(!this.withDescr||this.allowBlank)this.monitorValid=
!1;this.addEvents("fileselected");var b=function(b){if(a.monitorValid){var c=Ext.getCmp(a.uploadPanelId);b?c.enable():c.disable()}},c=[];this.withJustification&&(this.isJustificationDocument=Ext.id(),c.push({layout:"form",border:!1,hideTitle:!0,labelWidth:a.formLabelWidth||140,items:[{xtype:"checkbox",fieldLabel:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442",name:"is_C_document",
id:this.isJustificationDocument,labelStyle:"width:210px;",listeners:{check:function(b,c){c?(a.descrPanelId&&Ext.getCmp(a.descrPanelId).label.update("<b>\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442</b>"),a.uploadPanelId&&Ext.getCmp(a.uploadPanelId).label.update("<b>\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442-\u043e\u0431\u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u044f</b>")):
(a.descrPanelId&&Ext.getCmp(a.descrPanelId).label.update("\u0424\u0430\u0439\u043b:"),a.uploadPanelId&&Ext.getCmp(a.uploadPanelId).label.update("\u041f\u0443\u0442\u044c \u043a \u0444\u0430\u0439\u043b\u0443:"))},afterrender:function(){}}}]}));this.withDescr&&this.comboDescr?(this.descrPanelId=Ext.id(),this.descrPanelContainerId=Ext.id(),this.descrId=Ext.id(),this.isJustificationDocument=Ext.id(),c.push({layout:"form",border:!1,hideTitle:!0,labelWidth:a.formLabelWidth||140,items:[{xtype:"combo",store:this.docTypeStore?
this.docTypeStore:Application.models.Procedure.getDocTypesStoreFromRPC(),displayField:"name",valueField:"name",editable:!1,triggerAction:"all",anchor:"100%",id:this.descrPanelId,fieldLabel:"\u0424\u0430\u0439\u043b"+(a.required||a.requiredMark?REQUIRED_FIELD:""),allowBlank:!a.required&&!a.requiredDescr,name:this.descrName,listeners:{valid:function(){b(!0)},invalid:function(){b(!1)},select:function(b,c,f){b=this.getValue();f=Ext.getCmp(a.descrId);"\u041d\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043e"==
b||"\u0414\u0440\u0443\u0433\u043e\u0439 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442"==b?(f.setDisabled(!1),f.setVisible(!0)):(f.setDisabled(!0),f.setVisible(!1));a.document_type.setValue(c.id)}}},{xtype:"hidden",ref:"../document_type",name:"document_type",value:null},{xtype:"textfield",anchor:"100%",disabled:!1,hidden:!0,id:this.descrId,fieldLabel:(a.formDescriptionLabel||"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430")+REQUIRED_FIELD,
width:"98.6%",listeners:{valid:function(){b(!0)},invalid:function(){b(!1)}}}]})):this.withDescr&&(this.descrPanelId=Ext.id(),c.push({layout:"form",border:!1,hideTitle:!0,labelWidth:a.formLabelWidth||140,items:[{xtype:"textfield",anchor:"100%",id:this.descrPanelId,fieldLabel:(a.formDescriptionLabel||"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430")+(a.required||a.requiredMark?REQUIRED_FIELD:""),allowBlank:!a.required&&!a.requiredDescr,name:this.descrName,
maxLength:500,listeners:{valid:function(){b(!0)},invalid:function(){b(!1)}}}]}));this.uploadPanelId=Ext.id();c.push({layout:"column",border:!1,items:[{columnWidth:1,xtype:"panel",layout:"form",border:!1,hideTitle:!0,labelWidth:a.formLabelWidth||140,items:[{xtype:"fileuploadfield",id:this.uploadPanelId,fieldLabel:"\u041f\u0443\u0442\u044c \u043a \u0444\u0430\u0439\u043b\u0443"+(a.required||a.requiredMark?REQUIRED_FIELD:""),name:a.fieldname?a.fieldname:void 0,border:!1,allowBlank:!a.required,buttonText:this.uploadText,
width:"100%",disabled:this.monitorValid,listeners:{fileselected:function(){this.checkFile()&&a.fireEvent("fileselected")}},checkFile:function(){var a=this.getFileInputId(),a=document.getElementById(a),b;if(a&&a.files&&a.files[0])b=a.files[0].size;else if(a&&window.ActiveXObject)try{var c=new ActiveXObject("Scripting.FileSystemObject");c&&(b=c.getFile(a.value).size)}catch(g){b=void 0}return b>(void 0!=Main.config.max_file_size?1048576*Main.config.max_file_size:MAX_UPLOAD_SIZE)?(Ext.Msg.alert("\u041e\u0448\u0438\u0431\u043a\u0430",
"\u0420\u0430\u0437\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u0430 "+Ext.util.Format.humanizeSize(b)+", \u044d\u0442\u043e \u0431\u043e\u043b\u044c\u0448\u0435 \u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u043e\u0433\u043e (\u043f\u0440\u0438\u043d\u0438\u043c\u0430\u044e\u0442\u0441\u044f \u0444\u0430\u0439\u043b\u044b \u0440\u0430\u0437\u043c\u0435\u0440\u043e\u043c \u0434\u043e "+(void 0!=Main.config.max_file_size?Main.config.max_file_size+"\u041c\u0431":Ext.util.Format.humanizeSize(MAX_UPLOAD_SIZE))+
")"),this.reset(),!1):!0}}]}]});this.allowCancel&&c[c.length-1].items.push({xtype:"button",cls:"upload_field_buttons_margin",text:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442",handler:function(){a.destroy()}});Ext.apply(this,{hideTitle:!0,border:!1,items:c});Application.components.UploadFilePanel.superclass.initComponent.call(this)},reset:function(){var a=this.getDescrPanel();a&&a.reset();a=this.getFilePanel();a.reset();this.monitorValid&&a.disable()},
getDescrPanel:function(){if(this.descrPanelId){var a=Ext.getCmp(this.descrPanelId);return"\u041d\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043e"==a.getValue()&&this.comboDescr?Ext.getCmp(this.descrId):a}return null},getFilePanel:function(){return Ext.getCmp(this.uploadPanelId)},getDescription:function(){var a=this.getDescrPanel();return a?a.getValue():""},getDescrId:function(){var a=Ext.getCmp(this.descrId);return a?a.getValue():""},getIsJustificationDocument:function(){var a=
Ext.getCmp(this.isJustificationDocument);return a?a.getValue():!1},getDocumentType:function(){return this.document_type?this.document_type.getValue():null},isValid:function(){var a=this.getDescrPanel(),b=!0;a&&(b=a.isValid());Ext.getCmp(this.uploadPanelId).isValid()||(b=!1);return b},isFileAttached:function(){var a=Ext.getCmp(this.uploadPanelId);if(!a)return!1;a=a.getFileInputId();return(a=document.getElementById(a))&&(a.value||a.files&&a.files[0])?!0:!1},updateByDocTypeStore:function(a){Ext.getCmp(this.descrPanelId).bindStore(a)},
getFileName:function(){var a=Ext.getCmp(this.uploadPanelId);if(!a)return!1;a=a.getFileInputId();return(a=document.getElementById(a))&&(a.value||a.files&&a.files[0])?Ext.isEmpty(a.files)?a.value.replace(/^.*[\\\/]/,""):a.files[0].name:!1}});Ext.define("Application.components.sliderPanel",{extend:"Ext.Panel",numberParams:{},sliderParams:{},minValue:1,maxValue:1E3,initComponent:function(){this.ids={slider:Ext.id(),number:Ext.id()};var a=Ext.apply({xtype:"numberfield",msgTarget:"qtip",decimalPrecision:2,allowNegative:!1},this.numberParams);Ext.apply(a,{id:this.ids.number});var b=Ext.apply({xtype:"slider",flex:1,decimalPrecision:1,increment:this.minIncrement||0.5,anchor:!1,plugins:new Ext.slider.Tip({getText:function(a){return a.value+" %"}})},
this.sliderParams);Ext.apply(b,{id:this.ids.slider,hideLabel:!0,width:300});b=new Ext.form.CompositeField({fieldLabel:this.sliderParams.fieldLabel,width:this.sliderParams.width,items:[{xtype:"displayfield",value:this.leftTextValue||"0%",style:"text-align: right"},b,{xtype:"displayfield",value:this.rightTextValue||"100%",style:"margin-right: 5px"}]});this.addEvents("sync");Ext.apply(this,{hideTitle:!0,layout:"vbox",height:60,defaults:{layout:"form",labelWidth:300,defaults:{anchor:"100%"}},items:[{items:[a]},
{items:[b]}],enableAnimation:!0,cls:"cleanbackground",msgTarget:"qtip"});Application.components.sliderPanel.superclass.initComponent.call(this);this.setupEvents()},getValue:function(){return Ext.getCmp(this.ids.slider).getValue()},setValue:function(a){a&&!Ext.isEmpty(a)&&this.enable();a=parseFloat(a);this.basicField&&(Ext.getCmp(this.ids.slider).setValue(a,this.enableAnimation),a=Ext.getCmp(this.basicField).getValue()*a/100);return Ext.getCmp(this.ids.number).setValue(a)},updateRanges:function(a,
b){var c=Ext.getCmp(this.ids.number);a=a||0;b=b||0;this.minValue=a;this.maxValue=b;c.minValue=a;c.maxValue=b;this.enableAnimation=!1;c.fireEvent("change",c,c.getValue());this.enableAnimation=!0;0<c.getValue()&&c.isValid();this.getSlider().syncThumb()},setupEvents:function(){Ext.getCmp(this.ids.number).on("change",function(a,b){if(this.maxValue!=this.minValue){var c=Ext.getCmp(this.ids.slider),d=0;b=a.getValue();Ext.isNumber(b)&&!this.basicField?d=100*(b-this.minValue)/(this.maxValue-this.minValue):
(d=parsePrice(Ext.getCmp(this.basicField).getValue()),d=b/d*100);this.fixedNumber=!0;c.setValue(d,this.enableAnimation);this.fixedNumber=!1}},this);Ext.getCmp(this.ids.slider).on("change",function(a,b){if(!this.fixedNumber&&this.maxValue!=this.minValue){var c=this.minValue+b/100*(this.maxValue-this.minValue);this.basicField&&(c=Ext.getCmp(this.basicField).getValue()*c/1E3);Ext.getCmp(this.ids.number).setValue(c)}},this);this.on("sync",function(){Ext.getCmp(this.ids.slider).syncThumb()},this)},getSlider:function(){return Ext.getCmp(this.ids.slider)},
disable:function(){Application.components.sliderPanel.superclass.disable.call(this);this.getSlider().disable()},enable:function(){Application.components.sliderPanel.superclass.enable.call(this);this.getSlider().enable()}});Application.components.bankdataPanel=Ext.extend(Ext.Panel,{initComponent:function(){var a=this;void 0===a.numIndex&&(a.numIndex=0);Ext.apply(this,{defaults:{anchor:"100%",allowBlank:!1,cls:this.itemsCssClass,readOnly:this.readOnly},labelWidth:200,layout:"form",name:"bank_data",id:"bank_data",items:[{xtype:"textfield",name:"account",vtype:"digits",minLength:20,maxLength:23,emptyText:"20 - 23 \u0446\u0438\u0444\u0440",fieldLabel:"\u0420\u0430\u0441\u0447\u0435\u0442\u043d\u044b\u0439 \u0441\u0447\u0435\u0442"+
REQUIRED_FIELD},{xtype:"textfield",name:"account_lic",allowBlank:!0,fieldLabel:"\u041b\u0438\u0446\u0435\u0432\u043e\u0439 \u0441\u0447\u0435\u0442",minLength:0,maxLength:40,emptyText:"\u043d\u0435 \u0431\u043e\u043b\u0435\u0435 40 \u0446\u0438\u0444\u0440"},{xtype:"textfield",name:"bik",vtype:"digits",minLength:9,maxLength:9,id:"bank_data_bik_"+a.numIndex,emptyText:"9 \u0446\u0438\u0444\u0440",fieldLabel:"\u0411\u0418\u041a"+REQUIRED_FIELD,listeners:{change:function(){9==this.getValue().length&&
RPC.Reference.bik(this.getValue(),function(b,c){if(b.success){var d=b.bank_data;Ext.getCmp("bank_data_account_kor_"+a.numIndex).setValue(d.kor);Ext.getCmp("bank_data_bank_"+a.numIndex).setValue(d.bank);Ext.getCmp("bank_data_bank_addr_"+a.numIndex).setValue(d.bank_addr)}else Ext.MessageBox.alert("\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0441\u0438\u0441\u0442\u0435\u043c\u044b","\u0423\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u0432\u0430\u043c\u0438 \u0411\u0418\u041a \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0432 \u0431\u0430\u0437\u0435 \u0411\u0418\u041a\u043e\u0432. \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e, \u0432\u044b \u0443\u043a\u0430\u0437\u0430\u043b\u0438 \u0435\u0433\u043e \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e.")})}}},
{xtype:"textfield",name:"account_kor",vtype:"digits",minLength:20,maxLength:20,id:"bank_data_account_kor_"+a.numIndex,allowBlank:!0,emptyText:"20 \u0446\u0438\u0444\u0440",fieldLabel:"\u041a\u043e\u0440\u0440\u0435\u0441\u043f\u043e\u043d\u0434\u0435\u043d\u0442\u0441\u043a\u0438\u0439 \u0441\u0447\u0435\u0442"},{xtype:"textfield",name:"bank",id:"bank_data_bank_"+a.numIndex,fieldLabel:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0431\u0430\u043d\u043a\u0430"+REQUIRED_FIELD},
{xtype:"textfield",name:"bank_addr",id:"bank_data_bank_addr_"+a.numIndex,fieldLabel:"\u0410\u0434\u0440\u0435\u0441 \u0431\u0430\u043d\u043a\u0430"+REQUIRED_FIELD},{xtype:"hidden",name:"entry_id"}],getValues:function(){var b={};collectComponentValues(a,b,!0);return b},setValues:function(b){setComponentValues(a,b,!1)}});Application.components.bankdataPanel.superclass.initComponent.call(this)}});Ext.define("Application.components.okdpField",{extend:"Application.components.autocompleteField",emptyText:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u043b\u0438 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0438\u0437 \u041e\u041a\u0414\u041f",initComponent:function(){this.directFn=RPC.Reference.okdpSearch;this.storeValueField="okdp";Application.components.okdpField.superclass.initComponent.call(this)}});Ext.define("Application.components.fullscreenPanel",{extend:"Ext.panel.Panel",frame:!1,border:!0,style:"padding: 15px;",plugins:Ext.ux.plugins.autoresize,initComponent:function(){this.items=[{xtype:this.cmpType,border:!0,frame:!1,title:!1,outerPanel:this}];this.layout="fit";this.cmpParams&&Ext.apply(this.items[0],this.cmpParams);this.cmpEvents&&this.cmpEvents.length&&(this.addEvents(this.cmpEvents),this.on("render",function(){this.getComponent(0).relayEvents(this,this.cmpEvents)},this,{once:!0}));
Application.components.actionPanel.superclass.initComponent.call(this)}});var lotDataInitObject={autoHeight:!0,initComponent:function(){this.mode=this.shortInfo?"withproc-short":"withproc";this.panel_id=Ext.id();this.addEvents("lotloaded");var a=this;Ext.apply(this,{title:"\u041e\u0431\u0449\u0438\u0435 \u0441\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u043e \u043b\u043e\u0442\u0435",labelWidth:300,style:"margin-top: 10px; padding-bottom: 15px;",defaults:{anchor:"100%",defaults:{anchor:"100%"}},items:[{xtype:"panel",autoHeight:!0,id:this.panel_id}],listeners:{lotloaded:function(b){var c=
Application.models.Lot.getLotFields(b.procedure_type,a.mode,b),d=Application.models.Lot.getLotTemplates(),c=Application.models.Lot.getLotPanelItems(b.lot,b,c,d,a.mode),d=Ext.getCmp(a.panel_id);b.paper_form&&d.add({xtype:"fieldset",hideTitle:!0,style:"margin: 5px; background-color: red;border: none; color: #fff",anchor:"100%",border:!1,layout:"anchor",html:"\u041f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u0430 \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u0441\u044f \u043d\u0435 \u0432 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u0444\u043e\u0440\u043c\u0435. \u041f\u043e\u0440\u044f\u0434\u043e\u043a \u043f\u043e\u0434\u0430\u0447\u0438 \u0437\u0430\u044f\u0432\u043e\u043a \u0443\u043a\u0430\u0437\u0430\u043d \u0432 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438 \u043a \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u0435."});
d.add(c);d.doLayout()}}});Application.components.lotDataPanel.superclass.initComponent.call(this)}};Ext.define("Application.components.lotDataPanel",Ext.apply({extend:"Ext.Panel"},lotDataInitObject));Ext.define("Application.components.lotDataFieldSet",Ext.apply({extend:"Ext.form.FieldSet",bodyCssClass:"subpanel"},lotDataInitObject));Ext.define("Application.components.procedureFindCombo",{extend:"Ext.form.ComboBox",fieldLabel:"\u041d\u043e\u043c\u0435\u0440 \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u044b",typeAhead:!1,hideTrigger:!0,selectOnFocus:!0,allowBlank:!0,minChars:1,mode:"remote",displayField:"summary",valueField:"id",hiddenName:"procedure",listEmptyText:"\u041d\u0435\u0442 \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440",tpl:'<tpl for="."><div class="search-item {[xindex % 2 === 0 ? "x-even" : "x-odd"]}">{text}</div></tpl>',
itemSelector:"div.search-item",store:null,storeBaseParams:{},initComponent:function(){Ext.isEmpty(this.name)&&(this.name="procedure");this.hiddenName=this.name;null===this.store&&(this.store=createProcedureShortListStore(this.storeBaseParams));Ext.isString(this.tpl)&&(this.tpl=new Ext.XTemplate(this.tpl.replace("{text}","{"+this.displayField+"}")));Application.components.procedureFindCombo.superclass.initComponent.call(this)}});Ext.define("Application.components.nomenclatureWindow",{extend:"Ext.Window",title:"\u0412\u044b\u0431\u043e\u0440 \u043d\u043e\u043c\u0435\u043d\u043a\u043b\u0430\u0442\u0443\u0440\u044b",constraint:!0,hideAction:"close",autoSize:!0,modal:!0,selection:null,type:this.type||"okdp",initComponent:function(){var a=Ext.id(),b=this;this.autoSize&&(this.width=0.8*Ext.getBody().getWidth(),this.height=0.9*Ext.getBody().getHeight());this.addEvents("nomenclature_selected");this.addEvents("search");Ext.apply(this,
{layout:"fit",items:[{tbar:{xtype:"Application.components.searchToolbar",searchHelp:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0441\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a\u0443 \u043d\u043e\u043c\u0435\u043d\u043a\u043b\u0430\u0442\u0443\u0440",eventTarget:this},id:a,xtype:"Application.components.nomenclatureTree",type:this.type,selection:this.selection,listeners:{nomenclature_selected:function(a){b.fireEvent("nomenclature_selected",a);b.close()}}}],buttons:[{text:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c",
handler:function(){var c=Ext.getCmp(a).getSelectedObject(),d=!1;c?c.leaf||(d="\u0421\u043b\u0435\u0434\u0443\u0435\u0442 \u0432\u044b\u0431\u0438\u0440\u0430\u0442\u044c \u043e\u0431\u044a\u0435\u043a\u0442 \u043d\u043e\u043c\u0435\u043d\u043a\u043b\u0430\u0442\u0443\u0440\u044b, \u0430 \u043d\u0435 \u0446\u0435\u043b\u044b\u0439 \u0440\u0430\u0437\u0434\u0435\u043b"):d="\u0412\u044b \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043b\u0438 \u043e\u0431\u044a\u0435\u043a\u0442 \u043d\u043e\u043c\u0435\u043d\u043a\u043b\u0430\u0442\u0443\u0440\u044b!";
d?Ext.Msg.alert("\u041e\u0448\u0438\u0431\u043a\u0430",d):(b.fireEvent("nomenclature_selected",c),b.close())}},{text:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",handler:function(){b.close()}}],listeners:{search:function(c){if(c){b.query=c;var d=Ext.getCmp(a),e=d.getSelectedObject(),e=e?e.id:null;d.mask("\u041f\u043e\u0438\u0441\u043a\u2026");RPC.Reference.nomenclatureSearch([c,e],b.type,function(a){d.unmask();a.success&&a.result&&(d.selectPath(a.result),a.message="\u0414\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0433\u043e \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0435\u0433\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043a\u043d\u043e\u043f\u043a\u0443 \u00ab\u0418\u0441\u043a\u0430\u0442\u044c\u00bb \u0435\u0449\u0435 \u0440\u0430\u0437");
(new Ext.QuickTip({html:a.message||"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0448\u043b\u043e\u0441\u044c"})).showBy(d.getTopToolbar().getEl())})}}}});Application.components.nomenclatureWindow.superclass.initComponent.call(this)}});Ext.define("Application.components.datetimeField",{extend:"Ext.form.CompositeField",cmp_id:Ext.id(),initComponent:function(){this.items=[{xtype:"Application.components.dateField",altFormats:"c|d.m.Y H:i:s|d.m.Y H:i",id:this.cmp_id+"_date",format:"d.m.Y",width:90},{html:"&nbsp",width:10},{xtype:"timefield",id:this.cmp_id+"_time",format:"H:i",width:60}];this.getValue=function(){var a=null,b=Ext.getCmp(this.cmp_id+"_date").getValue();b&&(a=Ext.getCmp(this.cmp_id+"_time").getValue(),b=parseDate(b),a&&
!Ext.isEmpty(a)?(a=a.split(":"),b.setHours(a[0]),b.setMinutes(a[1])):(b.setHours(0),b.setMinutes(0)),b.setSeconds(0),b.setMilliseconds(0),a=b.format("c"));return a};this.setValue=function(a){a=parseDate(a);Ext.getCmp(this.cmp_id+"_date").setValue(a);Ext.getCmp(this.cmp_id+"_time").setValue(a)};Application.components.datetimeField.superclass.initComponent.call(this)}});Ext.define("Application.components.commissionMemberNameField",{extend:"Application.components.autocompleteField",emptyText:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0424\u0418\u041e \u0447\u043b\u0435\u043d\u0430 \u043a\u043e\u043c\u043c\u0438\u0441\u0441\u0438\u0438",initComponent:function(){this.directFn=RPC.Reference.getCommissionAvailableToAddMembers;this.minChars=1;this.storeValueField="member_fio";Application.components.commissionMemberNameField.superclass.initComponent.call(this)}});Ext.define("Application.components.treeSelector",{extend:"Ext.form.FieldSet",style:"padding-left: 0; padding-right: 0;",name:"type",keyName:"type_id",addText:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435",addButtonText:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",emptyText:"\u042d\u043b\u0435\u043c\u0435\u043d\u0442 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d",textFormat:"{0}: {1}",windowWidth:700,windowHeight:400,windowAutoSize:!0,treeRootName:"0",treeDirectFn:null,treeTextFormat:"{0} {1}",
treeSearch:!1,treeDirectSearchFn:null,treeSearchHelp:"\u041f\u043e\u0438\u0441\u043a",maxItems:0,initComponent:function(){this.tree_id=Ext.id();this.cc_current=Ext.id();this.text_empty=Ext.id();this.add_btn_id=Ext.id();var a=this.title;this.title=null;Ext.apply(this,{layout:"form",anchor:"100%",defaults:{anchor:"100%",allowBlank:!1},autoHeight:!0,frame:!1,labelWidth:200,items:[{xtype:"container",layout:"column",fieldLabel:a,items:[{html:"&nbsp;",columnWidth:1},{xtype:"button",text:this.addButtonText,
id:this.add_btn_id,scope:this,handler:this.addHandler}]},{xtype:"panel",border:!1,id:this.cc_current,items:[{id:this.text_empty,bodyCssClass:"subpanel",cls:"spaced-panel",hidden:!0,html:this.emptyText}],listeners:{scope:this,afterrender:function(){this.emptyTextShow();this.checkMaxItems();this.doLayout()}}}]});Application.components.treeSelector.superclass.initComponent.call(this)},addHandler:function(){(new Application.components.treeWindow({width:this.windowWidth,height:this.windowHeight,autoSize:this.windowAutoSize,
loaderConfig:{type:this.name,rootName:this.treeRootName,directFn:this.treeDirectFn,directSearchFn:this.treeDirectSearchFn,textFormat:this.treeTextFormat,search:this.treeSearch,searchHelp:this.treeSearchHelp},title:this.addText,type:this.name,keyName:this.keyName,listeners:{scope:this,itemselected:function(a){this.addCategory(a);this.emptyTextShow();this.checkMaxItems();this.doLayout()}}})).show()},emptyTextShow:function(){var a=Ext.getCmp(this.cc_current),b=Ext.getCmp(this.text_empty);!1!==this.emptyText&&
1==a.items.length?b.setVisible(!0):b.setVisible(!1)},checkMaxItems:function(){var a=Ext.getCmp(this.add_btn_id),b=Ext.getCmp(this.cc_current);0!=this.maxItems&&b.items.length-1>=this.maxItems?a.setVisible(!1):(a.setVisible(!0),this.doLayout())},getHtmlString:function(a){var b=a.id||a.code;return b?String.format(this.textFormat,b,a.full_name):a.full_name},addCategory:function(a){var b={layout:"column",cls:"spaced-panel",bodyCssClass:"subpanel",border:!0,items:[{columnWidth:1,xtype:"panel",layout:"form",
border:!1,hideTitle:!0,cls:"spaced-cell",html:this.getHtmlString(a)},{xtype:"button",text:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",cls:"spaced-cell",scope:this,handler:function(a){var b=a.findParentByType("panel");a=b.getValue();Main.config.tree_selector_no_remove_message?(b.destroy(),this.emptyTextShow(),this.checkMaxItems()):Ext.Msg.confirm("\u041f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0435","\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u0443 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e '"+
a.name+"'?",function(a){"yes"==a&&(b.destroy(),this.emptyTextShow(),this.checkMaxItems())}.createDelegate(this))}}],name:this.name+"[]",getValue:function(){var b={id:a.id,name:a.text,full_name:a.full_name,path:a.path};b[this.keyName]=a[this.keyName];return b}.createDelegate(this)};Ext.getCmp(this.cc_current).add(b)},removeAllCategories:function(){var a=Ext.getCmp(this.cc_current),b=Ext.getCmp(this.text_empty);a.items.each(function(a){a.getId()!=b.getId()&&a.destroy()})},setValues:function(a){if(a){this.removeAllCategories();
for(var b in a)a.hasOwnProperty(b)&&this.addCategory(a[b]);this.emptyTextShow();this.checkMaxItems();this.doLayout()}}});Ext.define("Application.components.accountDataPanel",{extend:"Ext.panel.Panel",frame:!1,border:!0,initComponent:function(){var a=this;Ext.apply(this,{border:!1,height:84,listeners:{beforerender:function(){a.relayEvents(Main.app,["update_account_info"]);a.relayEvents(Main.app,["deposit_changed"]);a.relayEvents(Main.app,["available_sum_changed"])},update_account_info:function(b){a.show_acc_panel(b)},deposit_changed:function(b){a.show_acc_panel(b.available_sum)},available_sum_changed:function(b){a.show_acc_panel(b)}},
show_acc_panel:function(b){if(isGuest())a.removeAll();else{var c=[],d=Main.config.hide_accreditation_text?"":"\u0410\u043a\u043a\u0440\u0435\u0434\u0438\u0442\u0430\u0446\u0438\u0438 \u043d\u0435\u0442",e="",f="",g="";isCustomerAccred()&&c.push("\u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430");isSupplierAccred()&&c.push("\u0437\u0430\u044f\u0432\u0438\u0442\u0435\u043b\u044f");isExpert()&&c.push("\u044d\u043a\u0441\u043f\u0435\u0440\u0442\u0430");0<c.length&&!Main.config.hide_accreditation_text&&
(d="\u0410\u043a\u043a\u0440\u0435\u0434\u0438\u0442\u0430\u0446\u0438\u044f \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435: "+c.join(", "));isAdmin()?(d="",g=Main.siteTitle,f=" two_rows"):(isCustomer()&&!isSupplier()?(d='<div class="uib-info">'+d+"</div>",f=" three_rows"):(d='<div class="uib-info">'+d+"</div>",e='<div class="uib-info">\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0445 \u0441\u0440\u0435\u0434\u0441\u0442\u0432: '+Ext.util.Format.formatPrice(b)+" \u0440\u0443\u0431.</div>"),
g=Main.contragent.short_name?Main.contragent.short_name:Main.contragent.full_name);0<a.items.length&&a.removeAll();isSupplierAccred()&&Main.config.banner_edocument_show&&a.insert(0,{cls:"topFieldSet user-tariff-box",border:!1,frame:!1,style:"float:left; margin-right: 7px; margin-top: 0px; font-size: 10px; line-height:12px;"+(null==Main.contragent.tariff_id?"background-color: #cc0000; color: #fff; border:1px solid #e1cabe;":"background-color: #f5fdde; border:1px solid #e1e9c9;"),items:[{border:!1,
cls:"tariffTxt uib-u-name",style:"font-size: 11px; ",html:'<div style="text-align:center;">\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u044b\u0439 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u043e\u0431\u043e\u0440\u043e\u0442</div>'},{border:!1,cls:"tariffTxt uib-info",style:"font-size: 9px; ",html:'<div style="text-align:left; line-height: 1em;">\u0412\u0430\u0448\u0438 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b \u043f\u043e \u0442\u043e\u0440\u0433\u0430\u043c<br/>\u0432\u044b\u0441\u0442\u0430\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0432 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u043c \u0432\u0438\u0434\u0435</div>'},
{xtype:"button",width:"100%",style:"margin-top: 3px; width: 98%;",disabled:!1,text:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u043c",handler:function(){document.location.href=Main.config.banner_edocument_url}}]});isSupplierAccred()&&Main.config.service_redirect&&null!=Main.contragent.tariff_id&&a.insert(1,{cls:"topFieldSet user-tariff-box",border:!1,frame:!1,style:"float:left; margin-right: 7px; margin-top: 0px; font-size: 10px; line-height:12px;"+
(null==Main.contragent.tariff_id?"background-color: #cc0000; color: #fff; border:1px solid #e1cabe;":"background-color: #f5fdde; border:1px solid #e1e9c9;"),items:[{border:!1,cls:"tariffTxt uib-u-name",style:"font-size: 11px",html:'<div style="text-align:center;">\u0422\u0430\u0440\u0438\u0444\u043d\u044b\u0439 \u043f\u043b\u0430\u043d '+Main.contragent.tariff_name+"</div>"},{border:!1,cls:"tariffTxt uib-u-name",html:'<div style="text-align:center; margin: 1px 0px 2px">'+(null==Main.contragent.tariff_id?
"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0430\u0440\u0438\u0444\u043d\u044b\u0439 \u043f\u043b\u0430\u043d":"\u0414\u0430\u0442\u0430 \u0438\u0441\u0442\u0435\u0447\u0435\u043d\u0438\u044f: "+Ext.util.Format.localDateOnlyRenderer(Main.contragent.tariff_validity_period))+"<br/></div>"},{xtype:"button",width:"100%",style:"margin-top: 3px; width: 98%;",disabled:!0,text:null==Main.contragent.tariff_id?"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0442\u0430\u0440\u0438\u0444\u043d\u044b\u0439 \u043f\u043b\u0430\u043d":
"\u041f\u0440\u043e\u0434\u043b\u0438\u0442\u044c \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u0442\u0430\u0440\u0438\u0444\u0430",handler:function(){document.location.href="/sync/ordertariff"}}]});a.insert(2,{border:!1,style:"float:left;",cls:"topFieldSet user-info-box"+f,frame:!1,items:[{border:!1,cls:"tariffTxt",html:'<div class="uib-u-name">'+Main.user.full_name+'</div><div class="uib-info">'+(Main.config.veb_custom?Main.user.departmentName:g)+"</div>"+(Main.config.veb_custom?'<div class="uib-info">'+
Main.user.roleNameMaxId+"</div>":d)+e}]})}a.doLayout()}});Application.components.accountDataPanel.superclass.initComponent.call(this)}});Ext.define("Application.components.imgUploadForm",{extend:"Ext.Panel",initComponent:function(){var a=this,b=Ext.id();this.addEvents("uploadcomplete","idchaged");a.procedure_id||(a.procedure_id=a.parent.procedure_id);Ext.apply(this,{bodyCssClass:"subpanel",items:[{xtype:"fieldset",autoHeight:!0,title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u043e\u0442\u043e \u0438\u043b\u0438 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",defaults:{border:!1},items:[{html:"\u041f\u0440\u0438\u043b\u043e\u0436\u0438\u0442\u0435 \u0444\u043e\u0442\u043e \u0412\u0430\u0448\u0435\u0433\u043e \u0442\u043e\u0432\u0430\u0440\u0430. \u041d\u0430\u043b\u0438\u0447\u0438\u0435 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0439 \u0437\u043d\u0430\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u043f\u043e\u0432\u044b\u0448\u0430\u0435\u0442 \u0448\u0430\u043d\u0441\u044b \u043f\u0440\u043e\u0434\u0430\u0442\u044c \u0442\u043e\u0432\u0430\u0440.<br> \u0414\u043b\u044f \u0440\u0430\u0437\u043c\u0435\u0449\u0435\u043d\u0438\u044f \u0444\u0430\u0439\u043b\u043e\u0432 \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0439\u0442\u0435 \u0438\u0445 \u043f\u043e \u043e\u0434\u043d\u043e\u043c\u0443 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u0444\u043e\u0440\u043c\u044b \u043d\u0438\u0436\u0435. \u041f\u0440\u0438\u043d\u0438\u043c\u0430\u044e\u0442\u0441\u044f \u0444\u0430\u0439\u043b\u044b \u0440\u0430\u0437\u043c\u0435\u0440\u043e\u043c \u0434\u043e "+
Ext.util.Format.humanizeSize(PIC_UPLOAD_SIZE)+" \u0432 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445 \u0444\u043e\u0440\u043c\u0430\u0442\u0430\u0445 "+PIC_ACCEPTED_FORMATS+"."},{hideFileList:!0,xtype:"Application.components.multiuploadPanel",uploadHandler:RPC_tsn.Procedure.addFile,deleteHandler:RPC_tsn.Procedure.removeFile,id:b,simultaneousUpload:!0,autoUpload:!0,listeners:{beforeupload:function(b){b.uploadParams.procedure_id=a.procedure_id||0;b.uploadParams.type=1},uploadcomplete:function(b,
d){a.fireEvent("uploadcomplete",b)}}}]}],listeners:{idchanged:function(a){this.procedure_id=a}}});Application.components.imgUploadForm.superclass.initComponent.call(this)}});Ext.define("Application.components.nowayPanel",{extend:"Ext.panel.Panel",autoHeight:!0,frame:!0,bodyCssClass:"locked-access"});Ext.define("Application.components.okpd2Field",{extend:"Application.components.autocompleteField",emptyText:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u043b\u0438 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0438\u0437 \u041e\u041a\u041f\u04142",initComponent:function(){this.directFn=RPC.Reference.okpd2Search;this.storeValueField="okpd2";Application.components.okpd2Field.superclass.initComponent.call(this)}});Application.components.captchaPanel=Ext.extend(Ext.Panel,{hideTitle:!0,layout:"table",layoutConfig:{columns:2},border:!1,captchaId:!1,captchaUrl:"/index/captchaImage?captcha_id={0}&_dc={1}",captchaCodeId:void 0,captchaCodeName:"captcha_id",codeValueId:void 0,codeValueName:"captcha",initComponent:function(){var a=this;this.addEvents("reload");var b='<img style="margin-top: 27px;" src="'+IMAGE_LOADING+'" />';Ext.apply(this,{autoHeight:!0,defaults:{autoHeight:!0,border:!1},items:[{style:"text-align: center; width: 202px; margin: 0 auto;",
items:[{height:70,html:b},{html:"<small>\u0415\u0441\u043b\u0438 \u043a\u043e\u0434 \u043d\u0435\u0447\u0438\u0442\u0430\u0435\u043c, \u043a\u043b\u0438\u043a\u043d\u0438\u0442\u0435 \u043d\u0430 \u0435\u0433\u043e \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0438 \u043b\u0435\u0432\u043e\u0439 \u043a\u043d\u043e\u043f\u043a\u043e\u0439 \u043c\u044b\u0448\u0438.</small>"}],listeners:{render:function(){this.addEvents("captchainit");this.addEvents("captchaclick");this.fireEvent("captchainit",
this)},captchainit:function(){var b=this;RPC.Index.captcha(function(d){a.isDestroyed||a.destroying||(d.success?(a.captchaId=d.message,a.getComponent(1).getComponent(1).setValue(a.captchaId),b.getEl().on("click",function(){b.fireEvent("captchaclick",b)}),b.fireEvent("captchaclick",b)):b.fireEvent.defer(5E3,b,["captchainit",b]))})},captchaclick:function(){var c=(new Date).getTime(),d=String.format(a.captchaUrl,a.captchaId,c),c=new Image;c.src=d;var e=this.getComponent(0);e.update(b);c.onload=function(){e.update('<img src="'+
d+'"/>')}}}},{layout:"form",items:[{xtype:"textfield",name:this.codeValueName,id:this.codeValueId,style:"margin-top: 5px;",anchor:"100%",fieldLabel:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434, \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0435"+REQUIRED_FIELD,allowBlank:!1,msgTarget:this.msgTarget,blankText:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"},
{xtype:"textfield",name:this.captchaCodeName,id:this.captchaCodeId,inputType:"hidden",value:this.captchaId}]}]});Application.components.captchaPanel.superclass.initComponent.call(this);this.on("reload",function(){var a=this.getComponent(0);a.fireEvent("captchainit",a)})}});Ext.define("Application.components.valueField",{extend:"Ext.panel.Panel",labelSeparator:":",initComponent:function(){this.html=this.formatValueString(this.value);Application.components.valueField.superclass.initComponent.call(this)},formatValueString:function(a,b){a&&!Ext.isString(a)&&(a=a.toString());return this.fieldLabel+this.labelSeparator+(a?" <b>"+(b?a:a.escapeHtml())+"</b>":"")},setValue:function(a,b){this.value=a;this.update(this.formatValueString(this.value,b))},getValue:function(){return this.value}});Ext.define("Application.components.nomenclaturePanel",{extend:"Ext.form.FieldSet",initComponent:function(){var a=this;this.addEvents("nomenclatureselected");Ext.apply(this,{style:"padding-top: 0px; padding-bottom: 0px;",items:[],buttons:[{text:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0437\u0438\u0446\u0438\u044e",handler:function(){var b=new Application.components.nomenclatureWindow({type:a.type||"okdp"});a.relayEvents(b,["nomenclature_selected"]);b.show()}}],listeners:{nomenclature_selected:function(b){a.addNomenclature(b);
a.doLayout()}},addNomenclature:function(b){a.add({layout:"column",cls:"spaced-panel",bodyCssClass:"subpanel",border:!0,items:[{columnWidth:1,xtype:"panel",layout:"form",border:!1,hideTitle:!0,cls:"spaced-cell",html:(b.id||b.code)+": "+b.full_name},{xtype:"button",text:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",cls:"spaced-cell",handler:function(){var b=this.findParentByType("panel");a.remove(b)}}],nomenclature:{code:b.id||b.code,name:b.text,full_name:b.full_name,path:b.path},name:"nomenclature[]",
getValue:function(){return this.nomenclature}})},setValue:function(b){if(b){this.items.each(function(b){b.nomenclature&&a.remove(b)});for(var c=0;c<b.length;c++)this.addNomenclature(b[c]);a.doLayout()}}});Application.components.nomenclaturePanel.superclass.initComponent.call(this);autoSetValue(this)}});Ext.define("Application.components.cmpDataView",{extend:"Ext.form.FieldSet",title:"\u0421\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u043e \u0437\u0430\u044f\u0432\u0438\u0442\u0435\u043b\u0435",autoHeight:!0,initComponent:function(){var a=this;this.ids={supplier_type_title:Ext.id(),profile_id:Ext.id()};Ext.apply(this,{labelWidth:300,layout:"form",defaults:{anchor:"100%",style:"background: transparent; border: none;",allowBlank:!1,defaults:{allowBlank:!1,style:"background: transparent; border: none;"}},
items:[{xtype:"textfield",name:"full_name",readOnly:!0,value:a.cmpData.full_name,fieldLabel:"\u041f\u043e\u043b\u043d\u043e\u0435 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438"},{xtype:"textfield",readOnly:!0,name:"inn",value:a.cmpData.inn,fieldLabel:"\u0418\u041d\u041d"},{xtype:"textfield",readOnly:!0,name:"kpp",value:a.cmpData.kpp,fieldLabel:"\u041a\u041f\u041f"},{xtype:"textfield",fieldLabel:"\u0422\u0438\u043f \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438",
allowBlank:!1,value:a.cmpData.supplier_profile_id,id:this.ids.supplier_type_title,name:"supplier_type_title"},{xtype:"textfield",hidden:!0,fieldLabel:"\u0422\u0438\u043f \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438",allowBlank:!1,value:a.cmpData.profile_id,id:this.ids.profile_id,name:"profile_id"},{xtype:"checkbox",readOnly:!0,fieldLabel:"\u0421\u0443\u0431\u044a\u0435\u043a\u0442 \u043c\u0430\u043b\u043e\u0433\u043e \u0438 \u0441\u0440\u0435\u0434\u043d\u0435\u0433\u043e \u043f\u0440\u0435\u0434\u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430",
value:a.cmpData.small_biz,name:"small_biz",disabled:!0},{xtype:"textfield",readOnly:!0,name:"legal_address",value:a.cmpData.legal_address,fieldLabel:"\u042e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0430\u0434\u0440\u0435\u0441"},{xtype:"textfield",readOnly:!0,name:"postal_address",value:a.cmpData.postal_address,fieldLabel:"\u041f\u043e\u0447\u0442\u043e\u0432\u044b\u0439 \u0430\u0434\u0440\u0435\u0441"},{xtype:"textfield",name:"phone",readOnly:!0,id:"phone",value:"+"+a.cmpData.phone,
hidden:a.cmpData.phone?!1:!0,fieldLabel:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u044b\u0439 \u0442\u0435\u043b\u0435\u0444\u043e\u043d"},{xtype:"hidden",name:"contragent_id",value:a.cmpData.id}],listeners:{beforerender:function(){RPC.Company.loadprofiles("supplier",function(b){b=b.profiles;for(var c=b.length,d=Ext.getCmp(a.ids.profile_id),e=0;e<c;e++)b[e][0]&&b[e][0]==d.getValue()&&Ext.getCmp(a.ids.supplier_type_title).setValue(b[e][1])})}}});Application.components.cmpDataView.superclass.initComponent.call(this)}});Ext.ns("Ext.ux.form");
Ext.define("Ext.ux.form.DateIntervalVeb",{extend:"Ext.form.CompositeField",label_from:"\u0441",label_from_text:"\u0441",label_till:"\u043f\u043e",label_till_text:"\u043f\u043e",format:"d.m.Y",cmp_id:"interval",msgTarget:"side",is_text:!1,defaults:{flex:1},initComponent:function(){var a=this;this.items=[{xtype:"displayfield",width:30,value:this.label_from+":",hidden:a.is_text},{xtype:"datefield",editable:!1,format:this.format,fieldLabel:this.label_from,allowBlank:a.ownerCt.hidden||a.is_text,ref:"from",
name:this.cmp_id+"_from",id:this.cmp_id+"_from_id",listeners:{select:function(b,c){Ext.getCmp(a.cmp_id+"_till_id").setMinValue(c);a.fireEvent("select",c)}},hidden:a.is_text},{xtype:"displayfield",width:30,style:{textAlign:"right"},value:this.label_till+":",hidden:a.is_text},{xtype:"datefield",editable:!1,format:this.format,fieldLabel:this.label_till,allowBlank:a.ownerCt.hidden||a.is_text,ref:"till",name:this.cmp_id+"_till",id:this.cmp_id+"_till_id",listeners:{select:function(b,c){Ext.getCmp(a.cmp_id+
"_from_id").setMaxValue(c);a.fireEvent("select",c)}},hidden:a.is_text},{xtype:"displayfield",width:30,style:{textAlign:"right"},value:this.label_from_text+":",hidden:!a.is_text},{xtype:"textarea",ref:"from_text",fieldLabel:this.label_from_text,allowBlank:!a.is_text,name:this.cmp_id+"_from_text",id:this.cmp_id+"_from_text_id",style:"height:30px",hidden:!a.is_text},{xtype:"displayfield",width:30,style:{textAlign:"right"},value:this.label_till_text+":",hidden:!a.is_text},{xtype:"textarea",ref:"till_text",
fieldLabel:this.label_till_text,allowBlank:!a.is_text,name:this.cmp_id+"_till_text",id:this.cmp_id+"_till_text_id",style:"height:30px",hidden:!a.is_text}];this.getValue=function(){return{date_from:Ext.getCmp(this.cmp_id+"_from_id").getValue(),date_till:Ext.getCmp(this.cmp_id+"_till_id").getValue(),date_from_text:Ext.getCmp(this.cmp_id+"_from_text_id").getValue(),date_till_text:Ext.getCmp(this.cmp_id+"_till_text_id").getValue(),id:this.db_id,number:this.number}};this.setValue=function(a,c,d,e,f){Ext.getCmp(this.cmp_id+
"_from_id").setValue(a);Ext.getCmp(this.cmp_id+"_till_id").setValue(c);Ext.getCmp(this.cmp_id+"_from_text_id").setValue(d);Ext.getCmp(this.cmp_id+"_till_text_id").setValue(e);this.db_id=f};this.validateValues=function(){return this.is_text?Ext.getCmp(this.cmp_id+"_from_text_id").validate()&&Ext.getCmp(this.cmp_id+"_till_text_id").validate():Ext.getCmp(this.cmp_id+"_from_id").validate()&&Ext.getCmp(this.cmp_id+"_till_id").validate()};this.onPhaseFulFillmentChange=function(a){a?(Ext.getCmp(this.cmp_id+
"_from_id").allowBlank=!!this.is_text,Ext.getCmp(this.cmp_id+"_till_id").allowBlank=!!this.is_text,Ext.getCmp(this.cmp_id+"_from_text_id").allowBlank=!this.is_text,Ext.getCmp(this.cmp_id+"_till_text_id").allowBlank=!this.is_text):(Ext.getCmp(this.cmp_id+"_from_id").allowBlank=!0,Ext.getCmp(this.cmp_id+"_till_id").allowBlank=!0,Ext.getCmp(this.cmp_id+"_from_text_id").allowBlank=!0,Ext.getCmp(this.cmp_id+"_till_text_id").allowBlank=!0)};Ext.ux.form.DateIntervalVeb.superclass.initComponent.call(this)}});
Ext.reg("dateintervalveb",Ext.ux.form.DateIntervalVeb);Ext.form.DateIntervalVeb=Ext.ux.form.DateIntervalVeb;Ext.define("Application.components.okpdField",{extend:"Application.components.autocompleteField",emptyText:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u043b\u0438 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0438\u0437 \u041e\u041a\u041f\u0414",initComponent:function(){this.directFn=RPC.Reference.okpdSearch;this.storeValueField="okpd";Application.components.okpdField.superclass.initComponent.call(this)}});Ext.define("Application.components.numberField",{extend:"Ext.form.TextField",maskRe:/\d|\s|[,.+\-]/,decimalSeparator:",",decimalPrecision:2,decimalPrecisionMax:null,renderer:function(a){return number_format(a,{dec_point:this.decimalSeparator,decimals:this.decimalPrecision,thousands_sep:" "})},parser:function(a){return parsePrice(a)},allowNegative:!1,allowZero:!0,correctOnBlur:!0,resetOnError:!1,minValue:null,maxValue:null,oldValue:null,setMinValue:function(a){this.minValue=a;return this},setMaxValue:function(a){this.maxValue=
a;return this},initComponent:function(){Application.components.numberField.superclass.initComponent.call(this);if(this.correctOnBlur)this.on("change",this.onChange);null==this.decimalPrecisionMax&&(this.decimalPrecisionMax=this.decimalPrecision)},setValue:function(a){var b=a;this.isValueEmpty(a)||(b=this.parser(a),b=this.renderer(b));return Application.components.numberField.superclass.setValue.call(this,b)},onChange:function(a,b,c){c=b;if(!this.isValueEmpty(b)){c=this.parser(b);if(!a.resetOnError&&
!1===c)return;c=this.renderer(c)}c!=b&&a.setValue(c)},isValueEmpty:function(a){return!1===a||null===a||void 0===a||""===a},getValue:function(){var a=Application.components.numberField.superclass.getValue.call(this);if(this.isValueEmpty(a))return null;a!=this.oldValue&&(this.oldValue=a,this.fireEvent("change",this,a,this.oldValue));return this.parser(a)},reset:function(){Application.components.numberField.superclass.setValue.call(this,"");this.clearInvalid()},validator:function(a){if(this.isValueEmpty(a))return!0;
a=this.parser(a);return null!==this.minValue&&a<this.minValue?"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u044c\u0448\u0435 \u0447\u0435\u043c "+Ext.util.Format.price(this.minValue,{decimalPrecision:this.decimalPrecision}):null!==this.maxValue&&a>this.maxValue?"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043d\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u0447\u0435\u043c "+
Ext.util.Format.price(this.maxValue,{decimalPrecision:this.decimalPrecisionMax}):!1===a?"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043d\u044f\u0442\u044c \u0432\u0430\u0448 \u0432\u0432\u043e\u0434. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0447\u0438\u0441\u043b\u043e, \u043e\u0442\u0434\u0435\u043b\u044f\u044f \u0434\u0435\u0441\u044f\u0442\u0438\u0447\u043d\u044b\u0435 \u0437\u043d\u0430\u043a\u0438 \u0437\u0430\u043f\u044f\u0442\u043e\u0439 \u0438\u043b\u0438 \u0442\u043e\u0447\u043a\u043e\u0439, \u0438 \u0440\u0430\u0437\u0434\u0435\u043b\u044f\u044f \u0442\u044b\u0441\u044f\u0447\u0438 (\u0435\u0441\u043b\u0438 \u043d\u0443\u0436\u043d\u043e) \u043f\u0440\u043e\u0431\u0435\u043b\u0430\u043c\u0438":
!this.allowNegative&&0>a?"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c":this.allowZero||0!=a?!0:"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043d\u0435 \u043d\u0443\u043b\u0435\u0432\u044b\u043c"}});Application.components.phonePanel=Ext.extend(Ext.form.CompositeField,{name:"",cls:"cleanbackground",allowBlank:!0,blankText:"\u043f\u043e\u043b\u0435 \u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e",msgTarget:"under",fieldLabel:"",initComponent:function(){var a=this,b=!1,c=!1,d=Ext.id(),e=Ext.id(),f=Ext.id(),g=Ext.id(),k=!1;"side"===this.msgTarget&&(this.msgTarget=g);this.validator=function(g){var h=Ext.getCmp(d),r=Ext.getCmp(e),l=Ext.getCmp(f),p=[h,r,l];if(a.allowBlank&&""===
h.getValue()&&""===r.getValue()&&""===l.getValue()){if(k)return!0;k=!0;if(b)for(a.validate(),g=0;g<p.length;g++)p[g].validate();else c=!0;k=!1;return!0}k||(k=!0,b?a.validate():c=!0,k=!1);return""===g?a.blankText:!0};var h={xtype:"textfield",hideLabel:!0,width:80,validator:this.validator,readOnly:this.readOnly,style:this.noneditable?"background: transparent; border: none;":"",cls:this.itemsCssClass,allowBlank:!0,vtype:"digits"};if(this.value){if(Ext.isString(this.value)){var l=this.value.split("-");
this.value={cntr_code:l[0]||null,city_code:l[1]||null,number:l[2]||null}}}else this.value={};h=[Ext.apply({},{name:this.name+"[cntr_code]",width:20,id:d,fieldLabel:"\u043a\u043e\u0434 \u0441\u0442\u0440\u0430\u043d\u044b",maxLength:5},h),Ext.apply({},{name:this.name+"[city_code]",width:30,id:e,fieldLabel:"\u043a\u043e\u0434 \u0433\u043e\u0440\u043e\u0434\u0430",maxLength:6},h),Ext.apply({},{name:this.name+"[number]",id:f,fieldLabel:"\u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",
minLength:5,maxLength:100},h)];this.value.cntr_code&&(h[0].value=this.value.cntr_code);this.value.city_code&&(h[1].value=this.value.city_code);this.value.number&&(h[2].value=this.value.number);delete this.value;this.items=[{xtype:"displayfield",value:"+",cls:"x-form-text cleanborder cleanbackground"},h[0],{xtype:"displayfield",value:"(",cls:"x-form-text cleanborder cleanbackground"},h[1],{xtype:"displayfield",value:")",cls:"x-form-text cleanborder cleanbackground"},h[2]];this.msgTarget==g&&this.items.push({xtype:"panel",
anchor:"100%",height:50,cls:"x-form-invalid-msg",id:g});Application.components.phonePanel.superclass.initComponent.call(this);this.on("afterrender",function(){b=!0;c&&this.isValid()},this,{once:!0});this.on("valid",function(a){var b=a.getValue();b&&(9>b.length||101<b.length)&&a.markInvalid("\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044f "+this.fieldLabel.replace(REQUIRED_FIELD,"")+" \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043e\u0442 5 \u0434\u043e 100  \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")})},
getValue:function(){var a=[];this.items.each(function(b){"textfield"==b.xtype&&a.push(b.getValue())});a=a.join("-");"--"==a&&(a=null);return a},setValue:function(a){if(a){Ext.isString(a)&&(a=a.split("-"));var b=0;this.items.each(function(c){"textfield"==c.xtype&&(c.rendered?c.setValue(a[b]):c.value=a[b],b++)})}}});Ext.define("Application.components.autocompleteField",{extend:"Ext.form.ComboBox",hideTrigger:!0,emptyText:"",directFn:!1,minChars:3,storeNameField:"name",storeValueField:"value",storeDisplayField:!1,storeDisplayFieldConvert:!1,loadRecordById:!1,listTpl:!1,storeFields:!1,storeRoot:!1,initComponent:function(){var a;!1!==this.storeDisplayField&&(a=!1===this.storeDisplayFieldConvert?this.storeDisplayField:{name:this.storeDisplayField,convert:this.storeDisplayFieldConvert});var b=["id",this.storeNameField,
this.storeValueField];this.storeFields&&(b=b.concat(this.storeFields));a&&b.push(a);a=new Ext.data.DirectStore({autoDestroy:!0,directFn:this.directFn||RPC.Reference.okvedSearch,totalProperty:"totalCount",root:this.storeRoot||this.storeValueField,remoteSort:!0,autoLoad:!1,idProperty:"id",fields:b,baseParams:{plain:!0}});Ext.apply(this,{store:a,valueField:this.storeValueField,displayField:!1!=this.storeDisplayField?this.storeDisplayField:this.storeValueField,mode:"remote",forceSelection:!0,itemSelector:"div.search-item",
tpl:this.listTpl?this.listTpl:new Ext.XTemplate('<tpl for="."><div class="search-item {[xindex % 2 === 0 ? "x-even" : "x-odd"]}"><b>{values.'+this.storeValueField+"}</b> {values."+this.storeNameField+"}</div></tpl>")});Application.components.autocompleteField.superclass.initComponent.call(this)},findRecord:function(a,b,c){var d;if(void 0!==b&&null!==b){var e=""+b;0<this.store.getCount()&&this.store.each(function(b){if(b.data[a]==e)return d=b,!1});d||void 0!==c&&!c||this.loadRecord(a,b)}return d},
loadRecord:function(a,b){var c=this,d=""+b,e=this.loadRecordById?1:this.minChars;a===this.valueField&&d.length>=e&&this.value!==b&&this.isAlreadyFind(d)&&(e=this.getParams4Find(a,d),this.loadRecordById&&(e.loadById=!0),this.store.loading||this.store.load({params:e,callback:function(){c.store.loading=!1;c.setValue(d)}}),this.store.loading=!0)},isAlreadyFind:function(a){return!this.store.baseParams.query||-1===a.indexOf(this.store.baseParams.query)},getParams4Find:function(a,b){var c=this.store.baseParams;
c.query=b;return c}});Ext.define("Application.components.percentField",{extend:"Application.components.numberField",decimalPrecision:1,parser:function(a){Ext.isString(a)&&(a=a.replace("%",""));a=parsePrice(a);var b=Math.pow(10,this.decimalPrecision);return Math.round(a*b)/b},renderer:function(a){var b=Ext.util.Format.numberFormat.decimalSeparator;a+=" %";"."!=b&&(a=a.replace(".",b));return a}});Ext.define("Application.components.HistoryPanel",{extend:"Ext.grid.GridPanel",initComponent:function(){var a=getProcedureHistoryStore(this.procedure_id);Ext.apply(this,{store:a,columns:[{header:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",width:150,renderer:function(a,c,d){return d.data.user.username+" ("+d.data.user.last_name+" "+d.data.user.first_name+" "+d.data.user.middle_name+")"}},{header:"\u0414\u0430\u0442\u0430 \u0432\u043d\u0435\u0441\u0435\u043d\u0438\u044f \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439",
width:150,renderer:Ext.util.Format.dateRenderer("d.m.Y H:i"),dataIndex:"date"},{header:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430",width:380,dataIndex:"field"},{header:"\u041d\u043e\u043c\u0435\u0440 \u043b\u043e\u0442\u0430",width:100,dataIndex:"lot_id"},{header:"\u0421\u0442\u0430\u0440\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435",dataIndex:"from",renderer:function(a,c,d){Main.config.show_gmt||
"\u0414\u0430\u0442\u0430 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438"!=d.data.field&&"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f \u043f\u043e\u0434\u0430\u0447\u0438 \u0437\u0430\u044f\u0432\u043e\u043a \u043d\u0430 \u0443\u0447\u0430\u0441\u0442\u0438\u0435"!=d.data.field||"\u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e"==d.data.from||(a=Ext.util.Format.substr(a,0,19));return a},width:200},{header:"\u041d\u043e\u0432\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435",
dataIndex:"to",renderer:function(a,c,d){Main.config.show_gmt||"\u0414\u0430\u0442\u0430 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438"!=d.data.field&&"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f \u043f\u043e\u0434\u0430\u0447\u0438 \u0437\u0430\u044f\u0432\u043e\u043a \u043d\u0430 \u0443\u0447\u0430\u0441\u0442\u0438\u0435"!=d.data.field||"\u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e"==d.data.date||
(a=Ext.util.Format.substr(a,0,19));return a},width:200}],viewConfig:{forceFit:!0}});Application.components.HistoryPanel.superclass.initComponent.call(this)}});Ext.define("Application.components.okved2Field",{extend:"Application.components.autocompleteField",emptyText:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u043b\u0438 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0438\u0437 \u041e\u041a\u0412\u042d\u04142",initComponent:function(){this.directFn=RPC.Reference.okved2Search;this.storeValueField="okved2";Application.components.okved2Field.superclass.initComponent.call(this)}});Ext.define("Application.components.contragentField",{extend:"Application.components.autocompleteField",emptyText:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430",initComponent:function(){this.directFn=RPC.Reference.contragentSearch;this.storeValueField="contragents";this.storeNameField="short_name";this.minChars=2;this.listTpl=new Ext.XTemplate('<tpl for="."><div class="search-item {[xindex % 2 === 0 ? "x-even" : "x-odd"]}">{values.'+
this.storeValueField+"}; {values."+this.storeNameField+"}</div></tpl>");Application.components.contragentField.superclass.initComponent.call(this)}});Application.components.SignatureForm=Ext.extend(Ext.form.FormPanel,{frame:!1,border:!1,useFormHandler:!0,forceEds:!1,noeds:!1,signName:this.signatureTextName||"signature_text",signAllowBlank:void 0===this.signatureAllowBlank?!0:this.signatureAllowBlank,isAutoSign:!1,id:"signature_form",signButtonId:this.signButtonIdent||Ext.id(),initComponent:function(){var a=this;a.signName=this.signatureTextName||"signature_text";a.signAllowBlank=void 0===this.signatureAllowBlank?!0:this.signatureAllowBlank;a.signButtonId=
this.signButtonIdent||Ext.id();var b=a.hideSignatureData||!1;a.defaultLayout=a.defaultLayout||"anchor";a.showFieldset=a.showFieldset||!1;a.labelWidth=a.labelWidth||200;a.isWriteable=a.isWriteable||!1;a.signatureButtonText=a.signatureButtonText||Translate._("\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c");this.addEvents("dataSelected");this.addEvents("hideSignData");this.addEvents("showSignData");var c=[];void 0!==this.items&&(Ext.isArray(this.items)?c.push.apply(c,this.items):c.push(this.items));
c.push({xtype:"textarea",style:"margin: 5px 5px 2px",name:this.signName,id:this.signName,fieldLabel:t("\u0412\u043d\u0438\u043c\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u043f\u0435\u0440\u0435\u0447\u0438\u0442\u0430\u0439\u0442\u0435 \u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u043e\u0434\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u043c\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"),hidden:b,height:this.signatureTextHeight?this.signatureTextHeight:600,readOnly:!a.isWriteable,
value:this.signatureText,allowBlank:this.signAllowBlank,blankText:this.signAllowBlank?null:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"},{xtype:"hidden",name:"signature"},{xtype:"hidden",name:"perform_step_move",id:"perform_step_move"});var c=a.showFieldset?new Ext.form.FieldSet({style:"padding: 12px 10px 10px 10px;",defaults:{blankText:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f",
allowBlank:!1,xtype:"textfield",anchor:"100%"},items:c}):c,d=[];void 0!==this.buttons&&(Ext.isArray(this.buttons)?d.push.apply(d,this.buttons):d.push(this.buttons));d.push({ref:"../buttonBack",text:"\u041d\u0430\u0437\u0430\u0434",hidden:a.backUrl?!1:!0,handler:function(){redirect_to(a.backUrl)},scope:this},{ref:"../buttonSign",text:a.signatureButtonText,scope:this,formBind:!0,id:this.signButtonId,hidden:b,handler:function(){a.signForm(this,a.signName,a.success_fn)}});a.extraButtons&&Main.config.show_more_signature_buttons&&
d.push([{xtype:"button",text:"\u0423\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u0438 \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u0437\u0430\u043a\u0443\u043f\u043a\u0443",formBind:!0,scope:this,handler:function(){a.signForm(this,a.signName,function(){redirect_to("po/procedure/new")})}},{xtype:"button",text:"\u0421\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432\u044b\u043f\u0438\u0441\u043a\u0443 \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044e",
formBind:!0,scope:this,pseudo:"to_formed",handler:function(){var b=this.getForm().findField("procedure_id").getValue();a.signForm(this,a.signName,function(){Application.models.Po_Procedure.shiftSteps([b],1,function(){b&&window.open("/po/report/toSupervisorReport/ids/"+b)});redirect_to("po/procedure/my")})}}]);Ext.apply(this,{title:a.title?a.title:t("\u0412\u043d\u0438\u043c\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u043f\u0435\u0440\u0435\u0447\u0438\u0442\u0430\u0439\u0442\u0435 \u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u043e\u0434\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u043c\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"),
labelWidth:a.labelWidth,frame:!0,autoScroll:!0,fileUpload:!0,layout:a.defaultLayout,defaults:{anchor:"100%"},items:c,buttons:d,listeners:{dataSelected:function(a){Ext.getCmp(this.signButtonId).setDisabled(a)},hideSignData:function(){Ext.getCmp(this.signButtonId).hide();Ext.getCmp(this.signName).hide()},showSignData:function(a){Ext.getCmp(this.signButtonId).show();var b=Ext.getCmp(this.signName);b.show();b.setValue(a)},afterrender:function(){var a=this.additional||[];if(a.length)for(var b=0;b<a.length;){var c=
a[b];this.add({xtype:"hidden",name:c.nm,value:c.val});b++}}}});Application.components.SignatureForm.superclass.initComponent.call(this);this.form.api={submit:this.api};this.form.waitMsgTarget=!0;this.isAutoSign&&this.addListener("procedureInfoLoad",function(a){a.buttonSign.el.dom.click()},this)},signForm:function(a,b,c){var d=this,e=a.getForm().getValues(),f=e[b],g=!1,k=function(a){Main.config.save_is_only_information_message&&a.success?(Ext.Msg.show({title:t(a.title||"\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b \u0438 \u0441\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e"),
msg:t(a.message||a.msg),icon:Ext.MessageBox.INFO}),function(){Ext.MessageBox.hide()}.defer(2E3)):echoResponseMessage(a);if(a.success||a.result&&a.result.success)(a.reloadPrivileges||a.result&&a.result.reloadPrivileges)&&Main.reloadPrivileges(),c?c(a):a.redirect_url?redirect_to(a.redirect_url):a.result.redirect_url&&redirect_to(a.result.redirect_url)};if("capicom"==Main.signaturePlugin){if("none"==Main.eds.mode&&!d.forceEds||d.noeds)g="a";else if(g=signData(e[b],1),!checkSignatureResult(g))return!1;
var h=function(a,b,c){d.useFormHandler?(b.getForm().findField("signature").setValue(a),b.getForm().isValid()?b.getForm().submit({waitMsg:"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435",success:function(a,b){k(b)},failure:function(a,b){b&&b.result&&b.result.message&&echoResponseMessage(b)}}):Ext.Msg.alert("\u041e\u0448\u0438\u0431\u043a\u0430","\u041d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u044b \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u043b\u044f")):
(c.signature=a,c.perform_step_move=Ext.getCmp("perform_step_move").getValue(),performRPCCall(b.api,[c],{mask:!0,wait_text:"\u041e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043b\u044f\u0435\u043c \u043f\u043e\u0434\u043f\u0438\u0441\u044c..."},function(a){k(a)}))};if(window.Main&&Main.eds&&("none"==Main.eds.mode||isCustomer()&&!Main.eds.crypt_customer||isSupplier()&&!Main.eds.crypt_supplier))return g="null signature: "+f,h(g,a,e),!0}else"cryptopro"==Main.signaturePlugin?"none"==Main.eds.mode&&!d.forceEds||
d.noeds?g="a":CryptoPlugin.signMessage({message:e[b],success:function(c){if(!checkSignatureResult(e[b]))return!1;g=c.message_signed;d.useFormHandler?(a.getForm().findField("signature").setValue(g),a.getForm().isValid()?a.getForm().submit({waitMsg:"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435",success:function(a,b){k(b)},failure:function(a,b){b&&b.result&&b.result.message&&echoResponseMessage(b)}}):Ext.Msg.alert("\u041e\u0448\u0438\u0431\u043a\u0430",
"\u041d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u044b \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u043b\u044f")):(e.signature=g,performRPCCall(a.api,[e],{mask:!0,wait_text:"\u041e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043b\u044f\u0435\u043c \u043f\u043e\u0434\u043f\u0438\u0441\u044c..."},function(a){k(a)}));return!1},failure:function(a){Ext.MessageBox.alert("\u041e\u0448\u0438\u0431\u043a\u0430",a.message.substr(1));return!1}}):g="a";"a"==
g&&(d.useFormHandler?(a.getForm().findField("signature").setValue(g),a.getForm().isValid()?a.getForm().submit({waitMsg:"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435",success:function(a,b){k(b)},failure:function(a,b){b&&b.result&&b.result.message&&echoResponseMessage(b)}}):Ext.Msg.alert("\u041e\u0448\u0438\u0431\u043a\u0430","\u041d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u044b \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u043b\u044f")):
(e.signature=g,performRPCCall(a.api,[e],{mask:!0,wait_text:"\u041e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043b\u044f\u0435\u043c \u043f\u043e\u0434\u043f\u0438\u0441\u044c..."},function(a){k(a)})))},addExtraButtons:function(){var a=this;this.extraAdded||(this.addButton({xtype:"button",text:"\u041d\u0430\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0438 \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u043f\u043e\u0442\u0440\u0435\u0431\u043d\u043e\u0441\u0442\u044c",formBind:!0},
function(){this.signForm(this,a.signName,function(){redirect_to("po/procedure/new")})},this),this.addButton({xtype:"button",text:"\u0421\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432\u044b\u043f\u0438\u0441\u043a\u0443 \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044e",formBind:!0,hidden:!0,pseudo:"to_formed"},function(){var b=this.getForm().findField("procedure_id").getValue();this.signForm(this,a.signName,function(a){var d=function(){b&&(performAjaxRPCCall("/po/report/toSupervisorReport/ids/"+
b,{},{download:!0,wait_disable:!0}),redirect_to("po/procedure/my"))};a.procedure_data.from_department_id?d():Application.models.Po_Procedure.shiftSteps([b],1,d)})},this));this.extraAdded=!0;this.doLayout()}});Application.components.PromptForm=Ext.extend(Ext.form.FormPanel,{initComponent:function(){function a(a,c,f){c=a.getForm().getValues();if(!checkSignatureResult("a"))return!1;var g=function(a){echoResponseMessage(a);f?f():a.redirect_url?redirect_to(a.redirect_url):a.result.redirect_url&&redirect_to(a.result.redirect_url)};b.useFormHandler?(a.getForm().findField("signature").setValue("a"),a.getForm().submit({waitMsg:"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435",
success:function(a,b){g(b)}})):(c.signature="a",performRPCCall(a.api,[c],{mask:!0,wait_text:"\u041e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043b\u044f\u0435\u043c \u043f\u043e\u0434\u043f\u0438\u0441\u044c..."},function(a){g(a)}));return!0}var b=this,c=[];void 0!==this.items&&(Ext.isArray(this.items)?c.push.apply(c,this.items):c.push(this.items));c.push({xtype:"textarea",id:"signature_text",name:"signature_text",hideLabel:!0,anchor:"100%",autoScroll:!0,readOnly:!0},{xtype:"hidden",name:"signature"});
Ext.apply(this,{width:500,frame:!0,items:[c],buttons:[{text:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",handler:function(){b.curWindow.close()},scope:this},{text:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c",scope:this,formBind:!0,handler:function(){a(this,"signature_text",function(){b.curWindow.close()})}}]});Application.components.PromptForm.superclass.initComponent.call(this);this.form.api={submit:b.api};this.form.waitMsgTarget=!0}});Application.components.PluginSelector=Ext.extend(Ext.Window,{initComponent:function(){var a=this;Ext.apply(this,{bodyStyle:"padding: 6px 0 6px 6px",title:"\u0412\u044b\u0431\u043e\u0440 \u043f\u043b\u0430\u0433\u0438\u043d\u0430 \u042d\u0426\u041f",width:400,resizable:!1,modal:!0,frame:!0,items:[{xtype:"htmleditor",id:"plugin-info",width:375,readOnly:!0,value:'\u041a\u0440\u0438\u043f\u0442\u043e-\u041f\u0440\u043e Browser Plug-In \u043f\u043e\u0437\u0432\u043e\u043b\u0438\u0442 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0438\u0437 \u043b\u044e\u0431\u043e\u0433\u043e \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0430 \u043b\u044e\u0431\u043e\u0439 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u044b (<a href="/resources/cryptopro/cadesplugin.exe">\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c</a>). \u0414\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0432 Firefox \u0432\u0435\u0440\u0441\u0438\u0438 52 \u0438 \u0432\u044b\u0448\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c <a href="/resources/cryptopro/firefox_cryptopro_extension_latest.xpi">\u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0435 \u0434\u043b\u044f \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0430</a>.',
listeners:{render:function(){Ext.getCmp("plugin-info").getToolbar().hide()}}},{xtype:"radiogroup",id:"plugin-selected",width:375,columns:[1,1],border:!1,vertical:!0,items:[{boxLabel:"\u041a\u0440\u0438\u043f\u0442\u043e-\u041f\u0440\u043e Browser Plug-In",name:"pluginradiogrp",inputValue:"cryptopro",checked:a.isCurrentPlugin("cryptopro")}]}],buttons:[{text:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c",handler:function(){var b=Ext.getCmp("plugin-selected").getValue().inputValue;a.updatePlugin(b);a.destroy()},
scope:this},{text:"\u041e\u0442\u043c\u0435\u043d\u0430",handler:function(){a.destroy()},scope:this}]});Application.components.PluginSelector.superclass.initComponent.call(this)},updatePlugin:function(a){Main.signaturePlugin=a;Main.signaturePluginByDefault=!1;Ext.util.Cookies.set("ext-current-plugin",a)},isCurrentPlugin:function(a){return Main.signaturePlugin==a}});Application.components.PopupInfoForm=Ext.extend(Ext.form.FormPanel,{initComponent:function(){var a=this;Ext.apply(this,{bodyCssClass:"subpanel-top-padding",bodyStyle:"padding-right: 6px",width:a.cmp_width||500,frame:!0,items:[{xtype:"label",html:a.cmp_html||""}],buttons:[{text:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",handler:function(){a.curWindow.close()},scope:this}]});Application.components.PopupInfoForm.superclass.initComponent.call(this)}});Application.components.AssignForm=Ext.extend(Ext.form.FormPanel,{initComponent:function(){function a(a,b){var e=a.getForm().getValues();if(!checkSignatureResult("a"))return!1;e.signature="a";performRPCCall(a.api,[e],{mask:!0,wait_text:"\u041d\u0430\u0437\u043d\u0430\u0447\u0430\u0435\u043c \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430"},function(a){a.message="\u0420\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0448\u043b\u043e \u0443\u0441\u043f\u0435\u0448\u043d\u043e";
echoResponseMessage(a);b()});return!0}var b=this;Ext.apply(this,{layout:"form",bodyCssClass:"subpanel-top-padding",bodyStyle:"padding-right: 6px",width:700,frame:!0,title:"\u0412\u044b\u0431\u043e\u0440 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430 \u041e\u041e\u0417",labelWidth:350,items:[{xtype:"combo",fieldLabel:"\u0412\u044b\u0431\u043e\u0440 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430 \u041e\u041e\u0417"+REQUIRED_FIELD,name:"user_id",hiddenName:"user_id",autoSelect:!1,
allowBlank:!1,editable:!1,triggerAction:"all",typeAhead:!0,isRequired:!0,width:300,listWidth:300,enableKeyEvents:!0,mode:"local",store:b.users,value:b.user_id},{xtype:"textfield",fieldLabel:"\u0420\u0430\u0437\u0440\u044f\u0434\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0438\u0437\u0432\u0435\u0449\u0435\u043d\u0438\u044f \u0438 \u0437\u0430\u043a\u0443\u043f\u043e\u0447\u043d\u043e\u0439 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438",name:"rank_number",width:300,
allowBlank:!0},{xtype:"hidden",name:"procedure_id",value:void 0==b.procedure_id?b.procedureIdList:b.procedure_id}],buttons:[{text:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",handler:function(){b.success_fn()},scope:this},{text:"\u041d\u0430\u0437\u043d\u0430\u0447\u0438\u0442\u044c",scope:this,formBind:!0,handler:function(){b.getForm().isValid()?a(this,b.success_fn):Ext.Msg.alert("\u041e\u0448\u0438\u0431\u043a\u0430","\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u0435!")}}]});
Application.components.PopupInfoForm.superclass.initComponent.call(this);this.form.api={submit:b.api}}});Application.components.DepartmentAgreeForm=Ext.extend(Ext.form.FormPanel,{initComponent:function(){function a(a,b){var e=a.getForm().getValues();if(!checkSignatureResult("a"))return!1;e.signature="a";performRPCCall(a.api,[e],{mask:!0,wait_text:"\u041f\u0440\u0438\u0441\u0432\u0430\u0438\u0432\u0430\u043d\u0438\u0435..."},function(a){a.message="\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e";echoResponseMessage(a);b()});
return!0}var b=this;Ext.apply(this,{bodyCssClass:"subpanel-top-padding",bodyStyle:"padding-right: 6px",width:600,frame:!0,title:"\u0412\u044b\u0431\u043e\u0440 \u0441\u043e\u0433\u043b\u0430\u0441\u0443\u044e\u0449\u0435\u0433\u043e \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f",items:[{xtype:"combo",fieldLabel:"\u0412\u044b\u0431\u043e\u0440 \u0441\u043e\u0433\u043b\u0430\u0441\u0443\u044e\u0449\u0435\u0433\u043e \u043f\u043e\u0434\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044f",
name:"department_id",hiddenName:"department_id",autoSelect:!1,allowBlank:!1,editable:!1,triggerAction:"all",typeAhead:!0,isRequired:!0,listWidth:550,enableKeyEvents:!0,mode:"local",store:b.departments,value:b.depatment_id,autoWidth:!0,width:400},{xtype:"hidden",name:"old_department_id",value:b.depatment_id}],buttons:[{text:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",handler:function(){b.success_fn()},scope:this},{text:"\u041d\u0430\u0437\u043d\u0430\u0447\u0438\u0442\u044c",scope:this,formBind:!0,
handler:function(){b.getForm().isValid()?a(this,b.success_fn):Ext.Msg.alert("\u041e\u0448\u0438\u0431\u043a\u0430","\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u0435!")}}]});Application.components.PopupInfoForm.superclass.initComponent.call(this);this.form.api={submit:b.api}}});Application.components.SignaturePanel=Ext.extend(Ext.Panel,{frame:!0,border:!1,autoHeight:!0,initComponent:function(){Ext.apply(this,{labelAlign:"top",autoScroll:!0,layout:"form",defaults:{anchor:"100%"},items:[{xtype:"fieldset",cls:"shallowsubpanel",layout:"form",style:"margin: 10px",defaults:{anchor:"100%"},title:t("\u0412\u043d\u0438\u043c\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u043f\u0435\u0440\u0435\u0447\u0438\u0442\u0430\u0439\u0442\u0435 \u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u043e\u0434\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u043c\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"),
items:[{xtype:"textarea",style:"margin: 5px",name:this.cmptype+"_signature_text",hideLabel:!0,id:this.cmptype+"_signature_text",height:600,readOnly:!0}]}],getValues:function(){var a={};collectComponentValues(this,a,!0);return a}});Application.components.SignaturePanel.superclass.initComponent.call(this)}});Ext.ns("Ext.ux.form");
Ext.ux.form.FileUploadField=Ext.extend(Ext.form.TextField,{buttonText:"Browse...",buttonOnly:!1,buttonOffset:3,readOnly:!0,autoSize:Ext.emptyFn,initComponent:function(){Ext.ux.form.FileUploadField.superclass.initComponent.call(this);this.addEvents("fileselected")},onRender:function(a,b){Ext.ux.form.FileUploadField.superclass.onRender.call(this,a,b);this.wrap=this.el.wrap({cls:"x-form-field-wrap x-form-file-wrap"});this.el.addClass("x-form-file-text");this.el.dom.removeAttribute("name");this.createFileInput();
var c=Ext.applyIf(this.buttonCfg||{},{text:this.buttonText});this.button=new Ext.Button(Ext.apply(c,{renderTo:this.wrap,cls:"x-form-file-btn"+(c.iconCls?" x-btn-icon":""),handler:function(){if(!Ext.isIE)return this.getEl().dom.click(),!1},scope:this}));this.buttonOnly&&(this.el.hide(),this.wrap.setWidth(this.button.getEl().getWidth()));this.bindListeners();this.resizeEl=this.positionEl=this.wrap},bindListeners:function(){this.fileInput.on({scope:this,mouseenter:function(){this.button.addClass(["x-btn-over",
"x-btn-focus"])},mouseleave:function(){this.button.removeClass(["x-btn-over","x-btn-focus","x-btn-click"])},mousedown:function(){this.button.addClass("x-btn-click")},mouseup:function(){this.button.removeClass(["x-btn-over","x-btn-focus","x-btn-click"])},change:function(){var a=this.fileInput.dom.value;this.setValue(a);this.fireEvent("fileselected",this,a)}})},createFileInput:function(){this.fileInput=this.wrap.createChild({id:this.getFileInputId(),name:this.name||this.getId(),cls:"x-form-file",tag:"input",
type:"file",size:1})},reset:function(){this.fileInput.remove();this.createFileInput();this.bindListeners();Ext.ux.form.FileUploadField.superclass.reset.call(this)},getFileInputId:function(){return this.id+"-file"},onResize:function(a,b){Ext.ux.form.FileUploadField.superclass.onResize.call(this,a,b);this.wrap.setWidth(a);this.buttonOnly||(a=this.wrap.getWidth()-this.button.getEl().getWidth()-this.buttonOffset,this.el.setWidth(a))},onDestroy:function(){Ext.ux.form.FileUploadField.superclass.onDestroy.call(this);
Ext.destroy(this.fileInput,this.button,this.wrap)},onDisable:function(){Ext.ux.form.FileUploadField.superclass.onDisable.call(this);this.doDisable(!0)},onEnable:function(){Ext.ux.form.FileUploadField.superclass.onEnable.call(this);this.doDisable(!1)},doDisable:function(a){this.fileInput.dom.disabled=a;this.button.setDisabled(a)},preFocus:Ext.emptyFn,alignErrorIcon:function(){this.errorIcon.alignTo(this.wrap,"tl-tr",[2,0])}});Ext.reg("fileuploadfield",Ext.ux.form.FileUploadField);
Ext.form.FileUploadField=Ext.ux.form.FileUploadField;Ext.apply(Ext.form.VTypes,{password:function(a,b){if(b.initialPasswordField){var c=Ext.getCmp(b.initialPasswordField);this.passwordText="\u0412\u0432\u0435\u0434\u0435\u043d\u043d\u044b\u0435 \u0412\u0430\u043c\u0438 \u043f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442";return a==c.getValue()}this.passwordText="\u041f\u0430\u0440\u043e\u043b\u044c \u043d\u0435 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043a\u043e\u0440\u043e\u0447\u0435 5 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 \u0438 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u043d\u0443 \u0446\u0438\u0444\u0440\u0443 \u0438\u043b\u0438 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u0438\u043c\u0432\u043e\u043b (!@#$%^&*()-_=+)";
var c=a.match(/[0-9!@#\$%\^&\*\(\)\-_=\+]+/i),d=5<=a.length;return c&&d},passwordText:"\u041f\u0430\u0440\u043e\u043b\u044c \u043d\u0435 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043a\u043e\u0440\u043e\u0447\u0435 5 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 \u0438 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u043d\u0443 \u0446\u0438\u0444\u0440\u0443 \u0438\u043b\u0438 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u0438\u043c\u0432\u043e\u043b (!@#$%^&*()-_=+)"});
Ext.apply(Ext.form.VTypes,{phone:function(a,b){return/^[+]?[0-9()\-\s]*$/.test(a)},phoneText:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b, \u043a\u0440\u0443\u0433\u043b\u044b\u0435 \u0441\u043a\u043e\u0431\u043a\u0438, \u0442\u0438\u0440\u0435 \u0438 \u043f\u0435\u0440\u0432\u044b\u0439 \u0441\u0438\u043c\u0432\u043e\u043b \u043f\u043b\u044e\u0441"});
Ext.apply(Ext.form.VTypes,{money:function(a,b){return/^[0123456789\.\s]*$/.test(a)},moneyText:"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b \u0438 \u0442\u043e\u0447\u043a\u0443, \u043e\u0442\u0434\u0435\u043b\u044f\u044e\u0449\u0443\u044e \u0434\u0440\u043e\u0431\u043d\u0443\u044e \u0447\u0430\u0441\u0442\u044c \u043e\u0442 \u0446\u0435\u043b\u043e\u0439"});
Ext.apply(Ext.form.VTypes,{digits:function(a,b){return/^[1234567890]*$/.test(a)},digitsText:"\u0412\u0432\u043e\u0434\u0438\u0442\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b \u0431\u0435\u0437 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432 \u0438 \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0437\u043d\u0430\u043a\u043e\u0432"});
function validateINN(a){if(""==a)return!0;var b=checkSumINN(a);return!1!==b&&b==a.substr(a.length-b.length)?!0:!1}Ext.apply(Ext.form.VTypes,{inn:function(a,b){return validateINN(a)},innText:"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0418\u041d\u041d"});
Ext.apply(Ext.form.VTypes,{email:function(a){a=String(a);var b=a.lastIndexOf("@");if(0>b)return!1;var c=a.substr(b+1);a=a.substr(0,b);var b=a.length,d=c.length;return 1>b||64<b||1>d||255<d||"."==a.charAt(0)||"."==a.charAt(b-1)||0<=a.indexOf("..")||!/^[A-Za-z0-9.\-]+$/.test(c)||0<=c.indexOf("..")||!/^(\\.|[A-Za-z0-9!#%&`_=\\/$\'*+?^{}|~.-])+$/.test(a.replace("\\\\",""))&&!/^"(\\"|[^"])+"$/.test(a.replace("\\\\",""))?!1:!0}});Ext.apply(Ext.util.Format,{numberFormat:{decimalSeparator:",",decimalPrecision:2,groupingSeparator:" ",groupingSize:3,hideNullDecimal:!1,currencySymbol:""},getFormattedPriceFloat:function(a){return""!=Ext.getCmp(a).getValue()?parseFloat(Ext.getCmp(a).getValue().replace(/[^\d\,\.]/g,"").replace(",",".")):0},getFormattedValueFloat:function(a){return""!=a?parseFloat(a.replace(/[^\d\,\.]/g,"").replace(",",".")):0},preparePriceForSubmit:function(a){(a=Ext.getCmp(a))&&a.setValue(a.getValue().replace(/[^\d\,\.]/g,
"").replace(",","."))},formatPriceOnTheFly:function(a){var b=Ext.get(a).dom,c=0;if(document.selection)b.focus(),c=document.selection.createRange(),c.moveStart("character",-b.value.length),c=c.text.length;else if(b.selectionStart||"0"==b.selectionStart)c=b.selectionStart;a=Ext.getCmp(a);b=a.getValue();if(""!=b){for(var b=b.replace(/[^\d\,\.]/g,"").replace(".",",").split(","),d=b[0],e="",f=1;f<b.length;++f)e+=b[f];d=Ext.util.Format.formatPrice(d,Ext.util.Format.numberFormat);1<b.length&&(d+=","+e.substring(0,
2));a.getValue()!=d&&a.setValue(d);a.selectText(c,c)}},makePriceFormat:function(a){},comboRenderer:function(a,b){return function(c,d,e){return(c=a.findRecord(a.valueField,c))?c.get(a.displayField):b?e.get(b):a.valueNotFoundText}},formatPrice:function(a,b,c){b=Ext.apply(Ext.apply({},Ext.util.Format.numberFormat),b);var d,e;if(null==a)return"";if("\u0411\u0435\u0437 \u041d\u0414\u0421"===a)return a;"number"!==typeof a&&(a=String(a),b.currencySymbol&&(a=a.replace(b.currencySymbol,"")),b.groupingSeparator&&
(a=a.replace(RegExp(b.groupingSeparator,"g"),"")),"."!==b.decimalSeparator&&(a=a.replace(b.decimalSeparator,".")),a=parseFloat(a));var f=0>a;a=Math.abs(a).toFixed(b.decimalPrecision);var g=a.indexOf(".");0<=g?"."!==b.decimalSeparator&&(d=a.slice(0,g),e=a.slice(g+1),b.hideNullDecimal?(a=d,0<parseInt(e)&&(a=a+b.decimalSeparator+e)):a=d+b.decimalSeparator+e):g=a.length;if(b.groupingSeparator)for(;g>b.groupingSize;)g-=b.groupingSize,a=a.slice(0,g)+b.groupingSeparator+a.slice(g);b.currencySymbol&&(a=b.currencySymbol+
a);f&&(a="-"+a);c&&Ext.isString(c)&&(a+=" "+c);return a},formatOffersStep:function(a){return Ext.util.Format.formatPrice(a,{decimalPrecision:4})},bool:function(a){return a?"\u0414\u0430":"\u041d\u0435\u0442"},localDateRenderer:function(a){a=parseDate(a);if(!a)return"";var b=Ext.util.Format.date(a,"Z"),b=Number(b)/3600;return Main.config.show_gmt?Ext.util.Format.date(a,"d.m.Y H:i")+" [GMT&nbsp;"+(-0<=b?"+":"-")+b+"]":Ext.util.Format.date(a,"d.m.Y H:i")},localDateOnlyRenderer:function(a){return(a=parseDate(a))?
Ext.util.Format.date(a,"d.m.Y"):""},localDateText:function(a){return Ext.util.Format.localDateRenderer(a).replace("&nbsp;"," ")},localMonthYearOnlyRenderer:function(a){return(a=parseDate(a))?Ext.util.Format.date(a,"m.Y"):""},humanizeSize:function(a){for(var b=["\u0431","\u043a\u0431","\u041c\u0431","\u0413\u0431","\u0422\u0431"],c=0;1024<=a&&c<b.length-1;c++)a/=1024;return Math.round(100*a)/100+" "+b[c]},declencionRus:function(a,b,c,d){a=Number(a);a%=100;void 0===c&&void 0===d&&Ext.isArray(b)&&(c=
b[1],d=b[2],b=b[0]);if(10<a&&20>a)return d;a%=10;return 1==a?b:2<=a&&4>=a?c:d},formatInterval:function(a,b){var c=["\u0434\u0435\u043d\u044c","\u0434\u043d\u044f","\u0434\u043d\u0435\u0439"],d=["\u0447\u0430\u0441","\u0447\u0430\u0441\u0430","\u0447\u0430\u0441\u043e\u0432"],e=["\u043c\u0438\u043d\u0443\u0442\u0443","\u043c\u0438\u043d\u0443\u0442\u044b","\u043c\u0438\u043d\u0443\u0442"],f=["\u0441\u0435\u043a\u0443\u043d\u0434\u0443","\u0441\u0435\u043a\u0443\u043d\u0434\u044b","\u0441\u0435\u043a\u0443\u043d\u0434"],
g=["\u0441\u0435\u0439\u0447\u0430\u0441","\u0440\u043e\u0432\u043d\u043e"];b?(b.isMs&&(a/=1E3),"nominative"==b.langCase&&(e[0]="\u043c\u0438\u043d\u0443\u0442\u0430",f[0]="\u0441\u0435\u043a\u0443\u043d\u0434\u0430")):b={};var k=Math.floor(a/86400),h=[];a=Math.floor(a)%86400;0<k&&h.push(k+" "+Ext.util.Format.declencionRus(k,c));c=Math.floor(a/3600);a=Math.floor(a)%3600;0<c&&(!b.lowPrecision||0==k)&&h.push(c+" "+Ext.util.Format.declencionRus(c,d));d=Math.floor(a/60);a=Math.floor(a)%60;0<d&&0==k&&
(!b.lowPrecision||2>=c)&&h.push(d+" "+Ext.util.Format.declencionRus(d,e));b.lowPrecision?0==c&&0==d&&(h=["\u043c\u0435\u043d\u044c\u0448\u0435 \u043c\u0438\u043d\u0443\u0442\u044b"]):(a=Math.floor(a),0==c&&0==k&&(0!=a?h.push(a+" "+Ext.util.Format.declencionRus(a,f)):0==d?h.push(g[0]):h.push(g[1])));return h.join(" ")},digitalInterval:function(a,b){if(isNaN(a))return"--:--";b&&(a/=1E3);var c=0>a?"-":"";a=Math.abs(a);var d="";3600<a&&(d+=lz(Math.floor(a/3600))+":",a=Math.floor(a)%3600);return d=c+d+
lz(Math.floor(a/60))+":"+lz(Math.floor(a)%60)},account:function(a){a=Main.config.etp_id+String.leftPad(a.toString(),7,"0");return a+(checkSumINN(a+"0")||"X")},countryFlag:function(a){if(!a)return"";a=a.toLowerCase();return'<i class="b-fg b-fg_'+a+'"><img src="/images/flags/fg.png"/></i>'},nl2br:function(a){return a?(""+a).replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br />$2"):""}});
(function(a){var b={bool:["boolRenderer"],formatPrice:["price"],formatInterval:["interval"]},c;for(c in b)if(b.hasOwnProperty(c))for(var d=0;d<b[c].length;d++)a[b[c][d]]=a[c]})(Ext.util.Format);Ext.ns("Main.stores");function getCountriesStore(){return getStore("Countries",{storeId:"Countries",directFn:RPC.Reference.list,paramsAsHash:!0,autoLoad:!1,idProperty:"iso_nr",root:"rows",totalProperty:"totalCount",fields:["iso_nr","name","alpha2","alpha3","eng_title"],sortInfo:{field:"rus_title",direction:"ASC"},baseParams:{extrafields:["alpha2","alpha3","eng_title"],reftype:"IsoCountries",idfield:"iso_nr",namefield:"rus_title"},remoteSort:!0})}
function getRegionStore(){return getStore("regions",{storeId:"regions",directFn:RPC.Reference.list,paramsAsHash:!0,autoLoad:!1,idProperty:"id",root:"rows",totalProperty:"totalCount",fields:["id","name"],sortInfo:{field:"name_full",direction:"ASC"},baseParams:{reftype:"Regions",idfield:"id",namefield:"name_full"},remoteSort:!0})}
function createOkatoStore(){return new Ext.data.DirectStore({directFn:RPC.Reference.okato,paramsAsHash:!0,root:"rows",totalProperty:"totalCount",fields:["name"],sortInfo:{field:"code",direction:"ASC"},baseParams:{limit:"10"},remoteSort:!0})}function createZonesStore(a,b){return new Ext.data.DirectStore({directFn:RPC.Reference.zones,paramsAsHash:!0,root:"rows",totalProperty:"totalCount",fields:["name","id"],sortInfo:{field:"name",direction:"ASC"},baseParams:{reftype:a,params:b},remoteSort:!0})}
function createRegionsStore(a){a=new Ext.data.DirectStore({directFn:RPC.Reference.regionslist,paramsAsHash:!0,root:"rows",totalProperty:"totalCount",fields:["name"],sortInfo:{field:"name",direction:"ASC"},baseParams:{params:a},remoteSort:!0,autoLoad:!0});a.addListener("load",function(){var a=new Ext.data.Record.create([{name:"\u0412\u0441\u0435"}]);this.insert(0,new a({name:"\u0412\u0441\u0435"}))});return a}
function createBankAccountStore(){return new Ext.data.DirectStore({directFn:RPC.Bankaccount.list,paramsAsHash:!0,root:"rows",idProperty:"id",totalProperty:"totalCount",fields:"id contragent_id account account_lic bik ogrn account_kor bank bank_addr receiver inn kpp actual".split(" "),sortInfo:{field:"id",direction:"ASC"},remoteSort:!0,autoLoad:!0})}
function createLogStore(a,b){var c=RPC.Log.index;"procedure"==a&&(c=RPC.Log.procedurelog);return new Ext.data.DirectStore({directFn:c,paramsAsHash:!0,autoSave:!0,root:"entries",idProperty:"id",totalProperty:"totalCount",fields:["id","pseudo","username",{name:"timestamp",type:"date",dateFormat:"c"},"status","message","company","lot_number","event_eds","department","procedure_id","ip_address"],sortInfo:{field:"timestamp",direction:"DESC"},baseParams:{logtype:a,procedure_id:b},remoteSort:!0})}
function createEtpStore(a,b,c){return new Ext.data.DirectStore({directFn:RPC.Log.etplog,paramsAsHash:!0,autoSave:!0,root:"entries",idProperty:"id",totalProperty:"totalCount",fields:["id",{name:"date_created",type:"date",dateFormat:"c"},"type","response_message","success","message_body","response_body","decoded_response_body","decoded_message_body"],sortInfo:{field:"date_created",direction:"DESC"},baseParams:{filter_key:a,filter_value:b,etp_place:c},remoteSort:!0})}
function createOosStore(a,b){return new Ext.data.DirectStore({directFn:RPC.Log.ooslog,paramsAsHash:!0,autoSave:!0,root:"entries",idProperty:"id",totalProperty:"totalCount",fields:["id","event",{name:"date_created",type:"date",dateFormat:"c"},"response","guid","details","direction_to","url_oos","url_xml","url_xml_confirm"],sortInfo:{field:"id",direction:"ASC"},baseParams:{filter_key:a,filter_value:b},remoteSort:!0})}
function createUserStore(a,b){return new Ext.data.DirectStore({directFn:eval(a),paramsAsHash:!0,autoSave:!0,root:"rows",idProperty:"id",totalProperty:"totalCount",fields:["id","username","user_email","user_job","status","first_name","middle_name","last_name","certificate","secret_phraze","user_type","is_online","user_phone","department_count",{name:"date_added",type:"date",dateFormat:"c"},{name:"date_last_update",type:"date",dateFormat:"c"},"company","contragent_id","status_name","department_name",
"rolesNames"],sortInfo:{field:"date_added",direction:"ASC"},baseParams:merge_options(b,{limit:50}),remoteSort:!0})}
function createAdminUserStore(a,b){return new Ext.data.DirectStore({directFn:eval(a),paramsAsHash:!0,autoSave:!0,root:"rows",idProperty:"id",totalProperty:"totalCount",fields:["id","user_email","user_job","status","first_name","middle_name","last_name",{name:"date_added",type:"date",dateFormat:"c"},"status_name","accred_id"],sortInfo:{field:"date_added",direction:"ASC"},baseParams:merge_options(b,{limit:50}),remoteSort:!0})}
function createAccreditationStore(a){return new Ext.data.DirectStore({directFn:RPC.Accreditation.index,paramsAsHash:!0,autoSave:!0,root:"rows",idProperty:"id",totalProperty:"totalCount",fields:"id contragent_id inn kpp date full_name email".split(" "),sortInfo:{field:"date",direction:"ASC"},baseParams:{type:a,limit:"50"},remoteSort:!0})}
function createFileTypesStore(){return getStore("file_type_store",{paramsAsHash:!0,autoSave:!1,autoLoad:!0,remoteSort:!0,api:{read:RPC.Reference.documentTypeList,create:RPC.Reference.documentTypeUpsert,update:RPC.Reference.documentTypeUpsert,destroy:RPC.Reference.documentTypeRemove},writer:new Ext.data.JsonWriter({encode:!1,writeAllFields:!0}),root:"rows",idProperty:"id",totalProperty:"totalCount",fields:["id","name","use_count"],sortInfo:{field:"id",direction:"ASC"}})}
function createAccreditationDeclinedStore(a){return getStore("accreditation_declined",{storeId:"accreditation_declined",directFn:RPC.Accreditation.declined,paramsAsHash:!0,autoDestroy:!0,idProperty:"id",root:"rows",totalProperty:"totalCount",fields:"id contragent_id inn full_name reason_declined operator_name".split(" "),baseParams:{type:a}})}
function createUserAccreditationStore(){return new Ext.data.DirectStore({directFn:RPC.Accreditation.users,paramsAsHash:!0,autoSave:!0,root:"rows",idProperty:"id",totalProperty:"totalCount",fields:"id first_name middle_name last_name user_email role status date user_job".split(" "),sortInfo:{field:"date",direction:"ASC"},baseParams:{limit:"50"},remoteSort:!0})}
function getProfileStore(a){return new Ext.data.DirectStore({storeId:"profile_types_"+a,directFn:RPC.Company.loadprofiles,paramsAsHash:!0,baseParams:{cmp_group:a},idProperty:"id",root:"profiles",totalProperty:"totalCount",fields:["id","name"]})}
function getContragentStore(){return new Ext.data.DirectStore({storeId:"contragent_list",directFn:RPC.Company.search,paramsAsHash:!0,autoLoad:!0,idProperty:"rowid",baseParams:{add_blank:0},fields:"rowid inn kpp ogrn full_name display_field small_biz address_legal address_postal phone".split(" ")})}
function getContragentStoreByInn(a){return new Ext.data.DirectStore({storeId:"profile_types",directFn:RPC.Company.search,paramsAsHash:!0,autoLoad:!1,params:{inn:a},fields:"rowid inn kpp ogrn full_name display_field small_biz address_legal address_postal".split(" ")})}
function getContragentStoreByName(){return new Ext.data.DirectStore({directFn:RPC.Company.searchByNameForRepresentatives,paramsAsHash:!0,totalProperty:"totalCount",fields:["rowid","full_name"],baseParams:{limit:"10"},remoteSort:!0})}
function getApiResourcesStore(){return getStore("api_resources",{autoLoad:!0,api:{read:RPC.Acl.apiResourcesIndex,create:RPC.Acl.apiResourcesUpdate,update:RPC.Acl.apiResourcesUpdate,destroy:RPC.Acl.apiResourcesDelete},sortInfo:{field:"url",direction:"ASC"},writer:new Ext.data.JsonWriter({encode:!1,writeAllFields:!0}),idProperty:"id",autoSave:!1,paramsAsHash:!0,root:"resources",fields:["id","module","controller","action","descr",{name:"log",type:"bool"},{name:"url",convert:function(a,b){return b.module+
"/"+b.controller+"/"+b.action}}]})}function getGuiResourcesStore(){return getStore("gui_resources",{autoLoad:!0,api:{read:RPC.Acl.guiResourcesIndex,create:RPC.Acl.guiResourcesUpdate,update:RPC.Acl.guiResourcesUpdate,destroy:RPC.Acl.guiResourcesDelete},sortInfo:{field:"url",direction:"ASC"},writer:new Ext.data.JsonWriter({encode:!1,writeAllFields:!0}),idProperty:"id",autoSave:!1,paramsAsHash:!0,root:"resources",fields:["id","url","descr","icon","menupath",{name:"weight",type:"int"}]})}
function getMenuResourcesStore(){return getStore("menu_resources",{autoLoad:!0,api:{read:RPC.Acl.menuResourcesIndex,create:RPC.Acl.menuResourcesUpdate,update:RPC.Acl.menuResourcesUpdate,destroy:RPC.Acl.menuResourcesDelete},sortInfo:{field:"menupath",direction:"ASC"},writer:new Ext.data.JsonWriter({encode:!1,writeAllFields:!0}),idProperty:"id",autoSave:!1,paramsAsHash:!0,root:"resources",fields:["id","url","icon","menupath",{name:"weight",type:"int"}]})}
function getRolesStore(){return getStore("roles",{autoLoad:!0,api:{read:RPC.Acl.roleIndex,create:RPC.Acl.roleUpdate,update:RPC.Acl.roleUpdate,destroy:RPC.Acl.roleDelete},writer:new Ext.data.JsonWriter({encode:!1,writeAllFields:!0}),idProperty:"id",autoSave:!1,paramsAsHash:!0,root:"roles",fields:"id name code actual user_role operator_role customer_role supplier_role".split(" ")})}
function getCurrencyStore(){return getStore("currency",{autoLoad:!0,directFn:RPC.Reference.currency,sortInfo:{field:"description",direction:"ASC"},idProperty:"id",root:"currency",fields:"id name description country_id alpha2 alpha3".split(" ")})}
function getCurrencyRatesStore(){return getStore("currency_rates",{autoLoad:!0,directFn:RPC_po.Reference.currencyRates,sortInfo:{field:"id",direction:"DESC"},idProperty:"id",root:"currency_rates",fields:"id name rate nominal rate_date currency_id description".split(" ")})}
function getLotStore(a){return new Ext.data.DirectStore({autoLoad:!0,directFn:RPC.Lot.list,sortInfo:{field:"id",direction:"ASC"},baseParams:{procedure:a},idProperty:"id",paramsAsHash:!0,root:"lots",fields:["id","subject","guarantee_application","lot_customers","start_price"]})}function getTimezonesStore(){return getStore("timezones",{directFn:RPC.Index.timezones,paramsAsHash:!0,autoLoad:!0,root:"rows",idProperty:"phptz",fields:["phptz","name"]})}
function createRepresentationRightsStore(a){return new Ext.data.DirectStore({autoLoad:!0,directFn:RPC.Company.representationRightsList,root:"rows",sortInfo:{field:"id",direction:"ASC"},baseParams:{requests:a},idProperty:"id",paramsAsHash:!0,fields:"id date valid_for full_name status representative_id contragent_id".split(" ")})}
function createRepresentedRightsStore(a){return new Ext.data.DirectStore({autoLoad:!0,directFn:RPC.Company.representedRightsList,root:"rows",sortInfo:{field:"id",direction:"ASC"},baseParams:{requests:a},idProperty:"id",paramsAsHash:!0,fields:"id date valid_for full_name status representative_id contragent_id".split(" ")})}
function createApplicStore(a,b,c){var d=["id","status","lot_id","procedure_id","procedure_title","lot_status","lot_number","order_number_assigned","status_text","frm",{name:"date_added",type:"date",dateFormat:"c"},{name:"time_added",type:"date",dateFormat:"c"}],e;for(e in c)c.hasOwnProperty(e)&&d.push(c[e]);return new Ext.data.DirectStore({directFn:a,paramsAsHash:!0,root:"rows",idProperty:"id",totalProperty:"totalCount",autoSave:!0,fields:d,sortInfo:{field:"date_added",direction:"DESC"},baseParams:b,
remoteSort:!0})}function createMailLogStore(a){return new Ext.data.DirectStore({directFn:RPC.Log.maillist,paramsAsHash:!0,root:"entries",idProperty:"id",totalProperty:"totalCount",autoSave:!0,fields:["id",{name:"datetime_sent",type:"date",dateFormat:"c"},"subject","contragent_fullname","user_fullname","contragent_id","user_id","title","procedure_id"],sortInfo:{field:"datetime_sent",direction:"DESC"},baseParams:a,remoteSort:!0})}
function createCompanyByType(a){return new Ext.data.DirectStore({directFn:RPC.Admin.getcompanies,paramsAsHash:!0,root:"entries",idProperty:"id",fields:["id","full_name","inn"],sortInfo:{field:"full_name",direction:"ASC"},baseParams:{type:a},remoteSort:!0})}
function createProcLotStore(a){return new Ext.data.DirectStore({directFn:RPC.Admin.getproclot,paramsAsHash:!0,root:"entries",idProperty:"id",fields:["id","procedure_id","proc_lot_descr"],sortInfo:{field:"proc_lot_descr",direction:"ASC"},baseParams:a})}
function createCompanyStore(a,b){var c={type:a,limit:"50"};b&&Ext.apply(c,b);return new Ext.data.DirectStore({directFn:RPC.Company.list,paramsAsHash:!0,autoSave:!0,root:"entries",idProperty:"id",totalProperty:"totalCount",stateful:!1,fields:["id","guid","full_name","customer_profile_name","supplier_profile_name","status","inn","kpp","rnp",{name:"date_added"},"block_reason","account","small_biz"],sortInfo:{field:"id",direction:"ASC"},baseParams:c,remoteSort:!0})}
function treatmentByOptions(a,b,c){for(var d=[],e=a.length;e--;){var f=a[e],g=c.indexOf(f[b]);f[b]&&g!==NO_MAGIC_NUMBER_MINUS_ONE&&(d[g]=f)}return d}function createProfilesStore(a){return new Ext.data.DirectStore({directFn:RPC.Company.loadprofiles,paramsAsHash:!0,reader:new Ext.data.ArrayReader({idIndex:0,fields:[{mapping:"id",name:"id",id:"id"},{mapping:"name",name:"name",id:"name"}],root:"profiles"}),baseParams:{cmp_group:a}})}
function createEvadedSuppliersStore(a){return new Ext.data.DirectStore({directFn:RPC.Company.evadedList,paramsAsHash:!0,autoSave:!0,root:"suppliers",idProperty:"lot_idid",totalProperty:"totalCount",fields:"id lot_id procedure_id inn full_name customer registry_number guarantee customer_fee subject show_links blocks_count supplier_id".split(" "),sortInfo:{field:"full_name",direction:"ASC"},baseParams:{type:a,limit:"50"},remoteSort:!0})}
function createContragentApplicationsListStore(a){return new Ext.data.DirectStore({directFn:RPC.Finance.operations,paramsAsHash:!0,reader:new Ext.data.JsonReader({idProperty:"id",messageProperty:"message",fields:[{name:"id",mapping:"id"},{name:"supplier",mapping:"supplier_id"},{name:"text",convert:function(a,c){return c.registry_number+", \u043b\u043e\u0442 \u2116"+c.lot_number}},{name:"regNum",mapping:"registry_number"},{name:"lotNum",mapping:"lot_number"},{name:"procedureId",mapping:"procedure_id"},
{name:"lotId",mapping:"lot_id"}],root:"applications"}),autoLoad:!0,remoteSort:!1,baseParams:{supplier:a,request:"LIST"}})}function createBannedContragentsStore(){return new Ext.data.DirectStore({directFn:RPC.Company.banList,paramsAsHash:!0,autoSave:!0,root:"rows",idProperty:"id",totalProperty:"totalCount",fields:["id","full_name","inn","kpp"],sortInfo:{field:"full_name",direction:"ASC"},baseParams:{limit:"50"},remoteSort:!0})}
function createExpireContragentsStore(){return new Ext.data.DirectStore({directFn:RPC.Company.expireList,paramsAsHash:!0,autoSave:!0,root:"rows",idProperty:"id",totalProperty:"totalCount",fields:["id","full_name","inn","kpp",{name:"valid_for",type:"date",dateformat:"c"}],sortInfo:{field:"full_name",direction:"ASC"},baseParams:{limit:"50"},remoteSort:!0})}
function createProcedureShortListStore(a){return new Ext.data.DirectStore({directFn:RPC.Procedure.getShortList,paramsAsHash:!0,reader:new Ext.data.JsonReader({idProperty:"id",fields:[{name:"id",mapping:"id"},{name:"regNum",mapping:"registry_number"},{name:"title",mapping:"title"},{name:"lots",mapping:"lots_id"},{name:"summary",convert:function(a,c){return c.registry_number+" ("+c.title+")"}}],root:"procedures"}),sortInfo:{field:"registry_number",direction:"ASC"},remoteSort:!0,baseParams:Ext.apply({limit:20},
a||{})})}
function createFiscalDocsGridStore(a){return new Ext.data.DirectStore({directFn:RPC.Admin.searchdocs,paramsAsHash:!0,remoteSort:!0,autoLoad:!0,reader:new Ext.data.JsonReader({root:"docs",idProperty:"id",totalProperty:"totalCount",fields:["id","full_name","price","registry_number","customer","number",{name:"date_forwarded",type:"date",dateFormat:"Y-m-d"},{name:"date_signed",type:"date",dateFormat:"Y-m-d"},"inn","kpp","prefer_stamped_docs","supplier_id","account","customer_id","number",{name:"date_generated",type:"date",
dateFormat:"Y-m-d"}]}),sortInfo:{field:"number",direction:"DESC"},listeners:{load:function(a,c,d){}}})}
function getGuaranteeAdvanceTypesStore(){return getStore("guarantee_advance_types",{fields:["id","name"],data:[[1,"\u0414\u043e \u0437\u0430\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"],[2,"\u0421 \u043c\u043e\u043c\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"]]},"ArrayStore")}
function getMonthNamesStore(){return getStore("month_names",{id:0,fields:[{name:"id",type:"integer"},{name:"name",type:"string"}],data:[[1,"\u042f\u043d\u0432\u0430\u0440\u044c"],[2,"\u0424\u0435\u0432\u0440\u0430\u043b\u044c"],[3,"\u041c\u0430\u0440\u0442"],[4,"\u0410\u043f\u0440\u0435\u043b\u044c"],[5,"\u041c\u0430\u0439"],[6,"\u0418\u044e\u043d\u044c"],[7,"\u0418\u044e\u043b\u044c"],[8,"\u0410\u0432\u0433\u0443\u0441\u0442"],[9,"\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c"],[10,"\u041e\u043a\u0442\u044f\u0431\u0440\u044c"],
[11,"\u041d\u043e\u044f\u0431\u0440\u044c"],[12,"\u0414\u0435\u043a\u0430\u0431\u0440\u044c"]]},"ArrayStore")}function getStore(a,b,c){var d=Ext.StoreMgr.get(a);d||(c||(c="DirectStore"),b.listeners=b.listeners||{},b.listeners.load||(b.listeners={load:function(a,b,c){a.loaded=!0}}),d=new Ext.data[c](b),Ext.StoreMgr.add(a,d));return d}
function getLotHistoryStore(a){return new Ext.data.DirectStore({directFn:RPC.Lot.history,paramsAsHash:!0,groupField:"lot_id",remoteSort:!0,autoLoad:!0,baseParams:{lot:a},reader:new Ext.data.JsonReader({root:"entries",totalProperty:"totalCount",fields:["field","from","lot_id","to","user",{name:"date",type:"date",dateFormat:"c"}]})})}
function getProcedureHistoryStore(a){return new Ext.data.DirectStore({directFn:RPC.Procedure.history,paramsAsHash:!0,groupField:"lot_id",remoteSort:!0,autoLoad:!0,baseParams:{procedure:a},reader:new Ext.data.JsonReader({root:"entries",totalProperty:"totalCount",fields:["field","from","lot_id","to","user",{name:"date",type:"date",dateFormat:"c"}]})})}
function createInvitesLogStore(){return new Ext.data.DirectStore({directFn:RPC.Log.inviteslog,paramsAsHash:!0,root:"rows",idProperty:"id",totalProperty:"totalCount",fields:["id","subject",{name:"date_sent",type:"date",dateFormat:"c"},"username"],sortInfo:{field:"date_sent",direction:"DESC"},remoteSort:!0})}
function createUserRolesStore(){return new Ext.data.DirectStore({directFn:RPC.User.loaduserroles,paramsAsHash:!0,reader:new Ext.data.ArrayReader({idIndex:0,fields:["id","name"],root:"userroles"})})}
function createFiscalDoscStore(a){return new Ext.data.DirectStore({directFn:RPC.Finance.fiscaldocslist,paramsAsHash:!0,root:"docs",idProperty:"id",totalProperty:"totalCount",autoSave:!0,fields:["id","registry_number","price","customer","number","date_forwarded","date_signed","date_signed","date_forwarded",{name:"date_generated",type:"date",dateFormat:"Y-m-d"}],sortInfo:{field:"id",direction:"DESC"},baseParams:a,remoteSort:!0})}
function createEtpPeersStore(){return new Ext.data.DirectStore({directFn:RPC.Admin.etppeerslist,paramsAsHash:!0,root:"entries",idProperty:"id",totalProperty:"totalCount",fields:["id","name","code","endpoint","type"],sortInfo:{field:"id",direction:"ASC"},remoteSort:!0})}
function getOkeiSimpleStore(){return getStore("okeiSimpleStore",{id:0,storeId:"okeiSimpleStore",fields:["id","name"],data:[[6,"\u041c"],[3,"\u041c\u041c"],[4,"\u0421\u041c"],[5,"\u0414\u041c"],[8,"\u041a\u041c (\u0422\u042b\u0421 \u041c)"],[18,"\u041f\u041e\u0413 \u041c"],[19,"\u0422\u042b\u0421 \u041f\u041e\u0413 \u041c"],[20,"\u0423\u0421\u041b \u041c"],[39,"\u0414\u042e\u0419\u041c"],[55,"\u041c2"],[59,"\u0413\u0410"],[61,"\u041a\u041c2"],[113,"\u041c3"],[114,"\u0422\u042b\u0421 \u041c3"],[112,
"\u041b"],[116,"\u0414\u041a\u041b"],[163,"\u0413"],[166,"\u041a\u0413"],[168,"\u0422"],[169,"\u0422\u042b\u0421 \u0422"],[171,"\u041c\u041b\u041d \u0422"],[673,"\u0422\u042b\u0421 \u041a\u041e\u041c\u041f\u041b"],[616,"\u0411\u041e\u0411"],[625,"\u041b\u0418\u0421\u0422"],[642,"\u0415\u0414"],[736,"\u0420\u0423\u041b"],[778,"\u0423\u041f\u0410\u041a"],[796,"\u0428\u0422"],[798,"\u0422\u042b\u0421 \u0428\u0422"],[839,"\u041a\u041e\u041c\u041f\u041b"],[868,"\u0411\u0423\u0422"],[876,"\u0423\u0421\u041b \u0415\u0414"]]},
"ArrayStore")}function getContractDocumentTypesStore(){return getStore("contractDocumentTypes",{autoLoad:!0,autoSave:!1,remoteSort:!1,sortInfo:{field:"id",direction:"ASC"},api:{read:RPC.Reference.getContractDocumentTypes},idProperty:"id",root:"list",totalProperty:"totalCount",fields:["id","name"]})}
function getOkeiStore(){return getStore("okeiStore",{directFn:RPC.Reference.list,paramsAsHash:!0,idProperty:"id",root:"rows",totalProperty:"totalCount",fields:["id",{name:"code",type:"string"},"name"],sortInfo:{field:"symbol",direction:"ASC"},baseParams:{table:"list",reftype:"Okei",idfield:"code",namefield:"symbol",notempty:!0},remoteSort:!0})}
function getPurchaseMethodStore(a,b,c){var d=["purchaseMethodStore"];d.push(b||"active");a&&d.push("electronic");return getStore(d.join("_"),{storeId:"purchaseMethodStore",directFn:RPC.Reference.purchasemethod,autoLoad:!1,paramsAsHash:!0,autoDestroy:!1,idProperty:"id",baseParams:{is_electronic:a,contragent_id:b||null,limitByVocabProcedureTypes:c||null},root:"rows",totalProperty:"totalCount",fields:["id","code","name","order_clause_id"],sortInfo:{field:"order_clause_id",direction:"ASC"},remoteSort:!0})}
function getWeekStore(a){a||(a=10);for(var b=[[0,"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e"]],c=0,c=1;c<=a;c++)b.push([c,c+" \u043d\u0435\u0434."]);return getStore("weekStore"+a,{id:0,storeId:"weekStore"+a,fields:["id","name"],data:b},"ArrayStore")}
function getConditionStore(){return getStore("conditionStore",{storeId:"conditionStore",directFn:RPC.Reference.list,paramsAsHash:!0,autoDestroy:!0,idProperty:"id",root:"rows",totalProperty:"totalCount",fields:["id","name"],sortInfo:{field:"name",direction:"ASC"},baseParams:{limit:"10",reftype:"Condition",idfield:"id",namefield:"name"},remoteSort:!0})}
function getNomenclatureStore(){return getStore("okpStore",{storeId:"okpStore",directFn:RPC.Reference.nomenclature,paramsAsHash:!0,autoDestroy:!0,idProperty:"id",root:"rows",totalProperty:"totalCount",fields:["id","text"],baseParams:{type:"okp",node:"0",for_combo:!0}})}
function createHolidaysStore(){return new Ext.data.DirectStore({directFn:RPC.Admin.holidayslist,paramsAsHash:!0,root:"entries",idProperty:"id",totalProperty:"totalCount",fields:["id","date","is_workday"],sortInfo:{field:"date",direction:"ASC"},remoteSort:!0})}
function createOffersLogStore(a){return new Ext.data.DirectStore({directFn:RPC.Log.offerslog,paramsAsHash:!0,autoSave:!0,root:"data",idProperty:"id",totalProperty:"totalCount",fields:["id","supplier","price",{name:"date_added",convert:function(a){return parseDate(a)}}],baseParams:{lot_id:a},remoteSort:!0})}
function createShareAccessStore(a){return new Ext.data.DirectStore({api:{read:RPC.User.getorguserslist,create:RPC.User.updateorguserslist,update:RPC.User.updateorguserslist},autoLoad:!0,autoDestroy:!0,autoSave:!1,paramsAsHash:!0,root:"data",idProperty:"id",totalProperty:"totalCount",fields:["id","user","choose"],baseParams:{user_id:a},remoteSort:!0,listeners:{}})}
function createShareProcAccessStore(a){return new Ext.data.DirectStore({api:{read:RPC.User.getprocuserslist,create:RPC.User.updateprocuserslist,update:RPC.User.updateprocuserslist},autoLoad:!0,autoDestroy:!0,autoSave:!1,paramsAsHash:!0,root:"data",idProperty:"id",totalProperty:"totalCount",fields:["id","user","choose"],baseParams:{proc_id:a},remoteSort:!0,listeners:{}})}
function createIntentionsStore(a){var b=["lot_id","registry_number","procedure_title","lot_number"];0<=["my","list"].indexOf(a)&&b.push({name:"date_added",type:"date",dateFormat:"c"});"list"==a&&b.push("supplier_inn","supplier_name");"procs"==a&&b.push("intentions_count");return new Ext.data.DirectStore({directFn:RPC.Applic.intentionslist,paramsAsHash:!0,autoSave:!0,root:"rows",idProperty:"id",totalProperty:"totalCount",fields:b,baseParams:{list_type:a},remoteSort:!0})}
function createDepartmentsStore(a,b){a||(a={});b||(b={});var c={directFn:RPC.User.departmentlist,baseParams:a,paramsAsHash:!0,autoSave:!0,root:"rows",idProperty:"id",totalProperty:"totalCount",fields:["id","name","code"],remoteSort:!0};Ext.apply(c,b);return new Ext.data.DirectStore(c)}
function createDepartmentsForSearchStore(){var a={directFn:RPC.User.departmentlistforsearch,baseParams:{limit:100,isActual:1},paramsAsHash:!0,autoSave:!0,root:"rows",idProperty:"id",totalProperty:"totalCount",fields:["id","name"],sortInfo:{field:"name",direction:"ASC"},remoteSort:!0,autoLoad:!0};Ext.apply(a);return new Ext.data.DirectStore(a)}
function createUserOozStore(){return new Ext.data.DirectStore({directFn:RPC.User.getAllOOZUnit,baseParams:{no_transform:!0,isActual:0},paramsAsHash:!0,autoSave:!0,root:"rows",idProperty:"user_id",fields:["user_id","user"],sortInfo:{field:"user"},remoteSort:!0,autoLoad:!0})}
function createUserListByRoleStore(a){return new Ext.data.DirectStore({directFn:RPC.User.getUserListByRole,baseParams:{role_id:a},paramsAsHash:!0,autoSave:!0,root:"rows",idProperty:"id",fields:["id","user"],sortInfo:{field:"user"},remoteSort:!0,autoLoad:!0})}
function createFunRukForSearchStore(a){a={directFn:RPC_po.Reference.frFioSearch,baseParams:{limit:100,isActual:1,query:"",status:a?a:null},paramsAsHash:!0,autoSave:!0,root:"fr_fio",idProperty:"fr_fio",totalProperty:"totalCount",fields:["id","fr_fio"],storeValueField:"fr_fio",remoteSort:!0,autoLoad:!0};Ext.apply(a);return new Ext.data.DirectStore(a)}
function createUsersForSearchStore(){var a={directFn:RPC.Reference.getCommissionAvailableToAddMembers,baseParams:{limit:100,isActual:1},paramsAsHash:!0,autoSave:!0,root:"member_fio",idProperty:"id",totalProperty:"totalCount",fields:["id","member_fio","user_job","department_name","user_phone"],sortInfo:{field:"name",direction:"ASC"},remoteSort:!0,autoLoad:!0};Ext.apply(a);return new Ext.data.DirectStore(a)}
function createUsersShortStore(a){return getStore("users_short_store",{storeId:"users_short_store",directFn:RPC.Admin.getusersshortinfo,paramsAsHash:!0,root:"entries",idProperty:"id",totalProperty:"totalCount",fields:["id","user_fio","user_company","user_job"],sortInfo:{field:"user_fio",direction:"ASC"},baseParams:{company_id:a},remoteSort:!0})}
function createExpertsStore(a){return new Ext.data.DirectStore({directFn:RPC.User.expertslist,paramsAsHash:!0,autoSave:!0,root:"rows",idProperty:"id",totalProperty:"totalCount",fields:["id","company","inn","status","user_id"],sortInfo:{field:"company",direction:"ASC"},baseParams:{status:a?a:null},remoteSort:!0})}
function createSmspStorage(){return getStore("smsp_resources",{autoLoad:!0,autoSave:!1,remoteSort:!0,api:{read:RPC.Smsp.list,create:RPC.Smsp.edit,update:RPC.Smsp.edit,destroy:RPC.Smsp.remove},sortInfo:{field:"okpd2",direction:"ASC"},root:"rows",idProperty:"id",totalProperty:"totalCount",paramsAsHash:!0,writer:new Ext.data.JsonWriter({encode:!1,writeAllFields:!0}),fields:["id","okpd2","okpd2_id","name"]})}
function createRequirementsStorage(){return getStore("requirements_resources",{autoLoad:!0,autoSave:!1,remoteSort:!0,api:{read:RPC.Requirements.list,create:RPC.Requirements.create,update:RPC.Requirements.edit,destroy:RPC.Requirements.remove},root:"rows",idProperty:"id",totalProperty:"totalCount",paramsAsHash:!0,writer:new Ext.data.JsonWriter({encode:!1,writeAllFields:!0}),fields:["id","name","actual","code","count"]})}
function createBudgetArticleDirectoriesStorage(){return getStore("budget_article_directories",{autoLoad:!0,autoSave:!1,remoteSort:!0,api:{read:RPC.Budgetarticledirectories.list,create:RPC.Budgetarticledirectories.upsert,update:RPC.Budgetarticledirectories.upsert,destroy:RPC.Budgetarticledirectories.remove},sortInfo:{field:"code",direction:"ASC"},root:"rows",idProperty:"id",totalProperty:"totalCount",paramsAsHash:!0,writer:new Ext.data.JsonWriter({encode:!1,writeAllFields:!0}),fields:["id","code",
"name"]})}
function createDepartmentStorage(a){return getStore("accountable_department_list_"+a,{autoLoad:!0,autoSave:!1,remoteSort:!0,api:{read:RPC_po.Department.list,create:RPC_po.Department.edit,update:RPC_po.Department.edit,destroy:RPC_po.Department.removeLogical},sortInfo:{field:"name",direction:"ASC"},baseParams:{userId:a},root:"rows",idProperty:"id",totalProperty:"totalCount",paramsAsHash:!0,writer:new Ext.data.JsonWriter({encode:!1,writeAllFields:!0}),fields:"id department_code new_id name fr_fio fr_fio_id users_count is_deleted".split(" ")})}
function createDepartmentAgreeStorage(){return getStore("accountable_department_agree_list",{autoLoad:!0,autoSave:!1,remoteSort:!0,api:{read:RPC_po.Department.listAgree,create:RPC_po.Department.createAgree,update:RPC_po.Department.editAgree,destroy:RPC_po.Department.removeAgree},sortInfo:{field:"name",direction:"ASC"},root:"rows",idProperty:"id",totalProperty:"totalCount",paramsAsHash:!0,writer:new Ext.data.JsonWriter({encode:!1,writeAllFields:!0}),fields:"id department_code new_id name fr_fio fr_fio_id".split(" ")})}
function createMessageStorage(){return new Ext.data.DirectStore({autoLoad:!0,autoSave:!1,remoteSort:!0,api:{read:RPC.Message.list,create:RPC.Message.edit,update:RPC.Message.edit,destroy:RPC.Message.remove},sortInfo:{field:"date_edit",direction:"ASC"},root:"rows",idProperty:"id",totalProperty:"totalCount",paramsAsHash:!0,writer:new Ext.data.JsonWriter({encode:!1,writeAllFields:!0}),fields:"id content date_add date_edit date_start date_end type user_fio department_name".split(" ")})}
function getDepartmentCodesStorage(){var a=[];getStore("department_codes",{autoLoad:!0,directFn:RPC_po.Department.getCodes,root:"rows",idProperty:"id",fields:["id","code"]}).load({callback:function(b,c,d){if(!0==d)for(var e in b)b.hasOwnProperty(e)&&(a[b[e].id]=b[e].data.code);else console.log("Error occurd during getting department codes")}});return a}
function createAgreementStorage(a){return getStore("agreement_resources",{autoLoad:!0,autoSave:!1,remoteSort:!0,sortInfo:{field:"id",direction:"ASC"},api:{read:RPC_po.Procedure.loadagreementcomments},root:"rows",idProperty:"id",totalProperty:"totalCount",baseParams:{limit:25,start:0,procedure_id:a},fields:"id user_id user_name first_name middle_name last_name department_name comment type step_title date_add".split(" ")})}
function createContractExecuteDocumentStorage(a){return getStore("execute_document_".lot_id,{autoLoad:!1,autoSave:!1,remoteSort:!0,sortInfo:{field:"id",direction:"ASC"},api:{read:RPC_cm.Contract.loadExecuteDocuments,destroy:RPC_cm.Contract.removeExecuteDocument},root:"documents",idProperty:"id",totalProperty:"totalCount",baseParams:{lot_id:a},writer:new Ext.data.JsonWriter({encode:!1}),fields:"id document_code document_name is_publish_to_oos is_oos_published document_number document_date file_name description position count okei_symbol contract_stage_number is_removable".split(" ")})}
function createProcedureLotProductsStorage(a){return getStore("lots_units_name_"+a,{autoLoad:!0,autoSave:!1,remoteSort:!1,sortInfo:{field:"id",direction:"ASC"},api:{read:RPC.Reference.getLotsProductName},root:"list",idProperty:"id",totalProperty:"totalCount",baseParams:{lot_id:a},fields:["id","name"]})}
function getMeetingCommentsStore(a){return getStore("commission_comments_store_"+a,{autoLoad:!0,autoSave:!1,remoteSort:!1,sortInfo:{field:"id",direction:"ASC"},api:{read:RPC_po.Commission.getListMeetingComment},root:"comments",idProperty:"id",totalProperty:"totalCount",baseParams:{commission_id:a},fields:[{name:"id"},{name:"type"},{name:"comment"},{name:"first_name"},{name:"middle_name"},{name:"last_name"},{name:"date"}]})}
function getRequestCommentsStore(a){return getStore("request_comments_store_"+a,{autoLoad:!0,autoSave:!1,remoteSort:!1,sortInfo:{field:"id",direction:"ASC"},api:{read:RPC.Procedure.getListRequestComment},root:"comments",idProperty:"id",totalProperty:"totalCount",baseParams:{request_id:a},fields:[{name:"id"},{name:"type"},{name:"comment"},{name:"first_name"},{name:"middle_name"},{name:"last_name"},{name:"date"}]})}
function createVocabProcedureStepsStore(){return new Ext.data.DirectStore({directFn:RPC.Admin.vocabprocedurestepslist,paramsAsHash:!0,root:"rows",idProperty:"id",totalProperty:"totalCount",fields:["id","pseudo","full_name"],sortInfo:{field:"status",direction:"desc"},remoteSort:!0})}
function createVocabSupplyPeriodicityStore(a){a||(a={});return getStore("vocab_supply_periodicity_list",{autoLoad:!0,autoSave:!1,remoteSort:!0,api:{read:RPC.Periodicity.list,create:RPC.Periodicity.edit,update:RPC.Periodicity.edit,destroy:RPC.Periodicity.remove},sortInfo:{field:"name",direction:"ASC"},root:"rows",idProperty:"id",totalProperty:"totalCount",paramsAsHash:!0,baseParams:a,writer:new Ext.data.JsonWriter({encode:!1,writeAllFields:!0}),fields:["id","name","actual"]})}
function getSmspInfoStore(){return new Ext.data.DirectStore({storeId:"smsp_info",directFn:RPC.Reference.getSmspInfo,paramsAsHash:!0,autoLoad:!0,remoteSort:!0,idProperty:"id",root:"rows",fields:["id","info"],sortInfo:{field:"id",direction:"ASC"}})}
function createVocabVatStorage(){return getStore("vocab_vat",{autoLoad:!0,autoSave:!1,remoteSort:!0,api:{read:RPC.Vocabvat.list,create:RPC.Vocabvat.upsert,update:RPC.Vocabvat.upsert,destroy:RPC.Vocabvat.remove},sortInfo:{field:"code",direction:"ASC"},root:"rows",idProperty:"id",totalProperty:"totalCount",paramsAsHash:!0,writer:new Ext.data.JsonWriter({encode:!1,writeAllFields:!0}),fields:["id","name","value"]})};Ext.ns("Ext.ux.helpers");Ext.ux.helpers.textEdit=function(){return new Ext.form.TextField};Ext.ux.helpers.timeEdit=function(){return new Ext.form.TimeField({increment:30,format:"H:i"})};Ext.ux.helpers.numberEdit=function(){return new Ext.form.NumberField({allowNegative:!1,allowDecimals:!1})};Ext.ux.helpers.dateEdit=function(){return new Application.components.dateField({format:"d.m.Y",altFormats:"c|d.m.Y H:i:s|d.m.Y H:i"})};
Ext.ux.helpers.dateTimeEdit=function(){return new Application.components.dateField({format:"d.m.Y H:i",altFormats:"c|d.m.Y H:i:s|d.m.Y H:i"})};
function redirectActionHandler(a,b){var c=new Ext.Template(a);b&&(b=new Ext.Template(b));return function(a,e){!a.getAt&&a.getStore&&(a=a.getStore());var f=a.getAt(e);if(f){var g=c.apply(f.data);b?Ext.Msg.confirm("\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435",b.apply(f.data),function(a){"yes"==a&&redirect_to(g)}):redirect_to(g)}}}function hrefAction(a){var b=new Ext.Template(a);return function(a,d,e){a=b.apply(e.data);return href_to(a)}};(function(){function a(a){var b=null;if(K[a])return K[a];void 0!=window.ActiveXObject&&(b=new ActiveXObject("CAPICOM."+a))&&(K[a]=b);return b}function b(a){var b="0123456789ABCDEF".split("");return b[parseInt(a/16)]+b[parseInt(a%16)]}function c(c,d,e,f){if(1==f.convert_to_utf8){e=a("Utilities");f=f.text;for(var g,h="",k=0;k<f.length;k++)g=f.charCodeAt(k),127>=g?h+=b(g):(128<=g&&2047>=g?h+=b(g>>6&31|192):(h+=b(g>>12|224),h+=b(g>>6&63|128)),h+=b(g&63|128));f=h;f.length%4&&(f+="00");c.Content=e.HexToBinary(f)}else c.Content=
f.text;return c.Sign(d,!1,E)}function d(a,b,d){return("object"!=typeof oCAPICOM||null==oCAPICOM.object)&&window.crypto&&window.crypto.signText?(a=window.crypto.signText(a,"ask"),a.match(/^error:/)&&(a=a.substr(6),a={userCancel:"The requested operation has been cancelled by the user.",noMatchingCert:"\u0412 \u0432\u0430\u0448\u0435\u043c \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0435 \u043d\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e \u043d\u0438 \u043e\u0434\u043d\u043e\u0433\u043e \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0433\u043e \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u0430 \u042d\u041f."}[a]||
a,a="!"+a),a):f(c,d,{convert_to_utf8:b,text:a})}function e(a){var b=a.IsValid();b.CheckFlag=M;if(!b.Result)return"! \u0421\u0440\u043e\u043a \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u0430 \u0438\u0441\u0442\u0435\u043a \u0438\u043b\u0438 \u043d\u0435 \u043d\u0430\u0441\u0442\u0443\u043f\u0438\u043b";if(window.Main&&Main.eds&&Main.eds.client_norev)return!0;b.CheckFlag=L;if(!b.Result)return'! \u041d\u0430 \u0432\u0430\u0448\u0435\u043c \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u0435 \u0432 \u0440\u0435\u0435\u0441\u0442\u0440\u0435 \u0434\u043e\u0432\u0435\u0440\u0435\u043d\u043d\u044b\u0445 \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0432 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u043a\u043e\u0440\u043d\u0435\u0432\u043e\u0439 \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442 \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u044f\u044e\u0449\u0435\u0433\u043e \u0446\u0435\u043d\u0442\u0440\u0430, \u0432\u044b\u0434\u0430\u0432\u0448\u0435\u0433\u043e \u0432\u0430\u043c \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0443\u044e \u043f\u043e\u0434\u043f\u0438\u0441\u044c. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u0432 \u0432\u0430\u0448 \u0423\u0426 \u0434\u043b\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0430\u0446\u0438\u0438 \u043f\u043e \u0443\u0441\u0442\u0440\u0430\u043d\u0435\u043d\u0438\u044e \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b. \u0415\u0441\u043b\u0438 \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442 \u0431\u044b\u043b \u043f\u043e\u043b\u0443\u0447\u0435\u043d \u0432 \u0423\u0426 \u0415\u042d\u0422\u041f, \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u043a \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435: <a href="http://www.roseltorg.ru/reestr_uc/" target="_blank">http://www.roseltorg.ru/reestr_uc/</a>.<br/>\n\u0414\u043b\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u043a\u043e\u0440\u043d\u0435\u0432\u043e\u0433\u043e \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u0430 \u0438\u0437 \u0443\u0436\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u043e\u0433\u043e \u043b\u0438\u0447\u043d\u043e\u0433\u043e \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u0430 \u042d\u041f:<ul class="normal-text"><li>\u0428\u0430\u0433 1. \u041e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e F5</li><li>\u0428\u0430\u0433 2. \u041f\u0440\u0435\u0434\u043f\u0440\u0438\u043c\u0438\u0442\u0435 \u0435\u0449\u0435 \u043e\u0434\u043d\u0443 \u043f\u043e\u043f\u044b\u0442\u043a\u0443 \u043f\u043e\u0434\u043f\u0438\u0441\u0438, \u0447\u0442\u043e\u0431\u044b \u043e\u0442\u043a\u0440\u044b\u043b\u0441\u044f \u0441\u043f\u0438\u0441\u043e\u043a \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0432, \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u0445 \u043d\u0430 \u0412\u0430\u0448\u0435\u043c \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u0435.</li><li>\u0428\u0430\u0433 3. \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430 \u043d\u0443\u0436\u043d\u044b\u0439 \u0432\u0430\u043c \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442 \u0438 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 \u043d\u0435\u0433\u043e.</li><li>\u0428\u0430\u0433 4. \u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 \u043a\u043d\u043e\u043f\u043a\u0443 \u00ab\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u0430\u00bb.</li><li>\u0428\u0430\u0433 5. \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u043a\u043b\u0430\u0434\u043a\u0443 \u00ab\u041f\u0443\u0442\u044c \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438\u00bb.</li><li>\u0428\u0430\u0433 6. \u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043f\u043e\u0434\u0441\u0432\u0435\u0447\u0435\u043d\u043d\u044b\u0439 \u043a\u0440\u0430\u0441\u043d\u044b\u043c \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442 \u0438 \u043d\u0430\u0436\u0430\u0442\u044c \u043d\u0430 \u043d\u0435\u0433\u043e.</li><li>\u0428\u0430\u0433 7. \u0414\u0430\u043b\u0435\u0435 \u043d\u0430\u0436\u0430\u0442\u044c \u043a\u043d\u043e\u043f\u043a\u0443 \u00ab\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u0430\u00bb.</li><li>\u0428\u0430\u0433 8. \u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u043f\u043e\u0448\u0430\u0433\u043e\u0432\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b: \u00ab\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u00bb \u2192 \u00ab\u0414\u0430\u043b\u0435\u0435\u00bb \u2192 \u00ab\u041f\u043e\u043c\u0435\u0441\u0442\u0438\u0442\u044c \u0432\u0441\u0435 \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u044b \u0432 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435\u00bb \u2192 \u00ab\u041e\u0431\u0437\u043e\u0440\u00bb \u2192 \u00ab\u0414\u043e\u0432\u0435\u0440\u0435\u043d\u043d\u044b\u0435 \u043a\u043e\u0440\u043d\u0435\u0432\u044b\u0435 \u0446\u0435\u043d\u0442\u0440\u044b \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438\u00bb \u2192 \u00ab\u041e\u043a\u00bb \u2192 \u00ab\u0414\u0430\u043b\u0435\u0435\u00bb \u2192 \u00ab\u0413\u043e\u0442\u043e\u0432\u043e\u00bb \u2192 \u00ab\u0414\u0430\u00bb \u2192 \u0438 \u00ab\u041e\u043a\u00bb \u0434\u043e \u043a\u043e\u043d\u0446\u0430 \u0437\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u043c\u044b\u0445 \u043a\u043e\u043c\u0430\u043d\u0434.</li></ul>';
b.CheckFlag=y;if(!b.Result)return"! \u041f\u043e\u0434\u043f\u0438\u0441\u044c \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u0430 \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u0430. \u0423\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u044c\u0442\u0435\u0441\u044c \u0432 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u0438 \u043d\u043e\u0441\u0438\u0442\u0435\u043b\u044f \u0441 \u043a\u043b\u044e\u0447\u0435\u043c \u0438\u043b\u0438 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u0435\u0440\u0435\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442";
b.CheckFlag=I;if(!b.Result){if(a=a.IssuerName)a=a.toString(),(b=a.match(/O=([^,]+)/))&&b[1]&&(a=b[1],'"'==a.charAt(0)&&(a=a.substr(1,a.length-2).replace(/""/g,'"')));return"! <br/><b>\u0421\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442 \u043e\u0442\u043e\u0437\u0432\u0430\u043d \u0438\u043b\u0438 \u043d\u0435\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u0435\u043d</b>.<br/>\n\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u0432 \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u044f\u044e\u0449\u0438\u0439 \u0446\u0435\u043d\u0442\u0440, \u0432\u044b\u0434\u0430\u0432\u0448\u0438\u0439 \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442, \u0434\u043b\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0430\u0446\u0438\u0438 \u043f\u043e \u0443\u0441\u0442\u0440\u0430\u043d\u0435\u043d\u0438\u044e \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b.<br/>\n"+
(a?"\u0418\u0437\u0434\u0430\u0442\u0435\u043b\u044c \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u0430: <b>"+a+"</b>":"")}return!0}function f(b,c,d){var f="",g;try{if(!0!=l())return g=z?z:!window.Ext||Ext.isIE||window.ActiveXObject?"\u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 CAPICOM \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u0430, \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0438\u0437-\u0437\u0430 \u043d\u0438\u0437\u043a\u0438\u0445 \u043f\u0440\u0430\u0432 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043d\u0430 \u0434\u0430\u043d\u043d\u043e\u0439 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e\u0439 \u043c\u0430\u0448\u0438\u043d\u0435.":
"\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430 \u042d\u041f \u0432 \u0432\u0430\u0448\u0435\u043c \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0435 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442. \u0414\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u0439 \u042d\u041f \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c \u0431\u0440\u0430\u0443\u0437\u0435\u0440 \u0441 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u043e\u0439 ActiveX, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 Internet Explorer.",
"! "+g;if(!C){var h=a("Store");h.Open(m,x,p);var k=h.Certificates,k=k.Select("\u0421\u043f\u0438\u0441\u043e\u043a \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0432","\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442 \u0434\u043b\u044f \u043f\u043e\u0434\u043f\u0438\u0441\u0438 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430:");C=k.Item(1)}if(!C)return"! \u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442 \u0434\u043b\u044f \u043f\u043e\u0434\u043f\u0438\u0441\u0438";
var r=e(C);if(!0!==r)return r||"! \u0421\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442 \u043e\u0442\u043e\u0437\u0432\u0430\u043d \u0438\u043b\u0438 \u043d\u0435\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u0435\u043d";var q=a("SignedData"),s=a("Signer");s.Certificate=C;f=b(q,s,c,d);if(!f)return C=!1,"! \u041f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c"}catch(u){C=!1,f=c?"! "+u:"! \u0418\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435: "+
u}return f}function g(b,c){var d;return!c&&(d=a("Utilities"))?d.Base64Decode(b):B.decode(b)}function k(a){return B.encode(a)}function h(b,c,d,e){a("Utilities");if(e.co_sign)return b.Content=g(e.data),e=g(e.co_sign),b.Verify(e,G),b.CoSign(c,E);d=g(e.data,e.bugfix);b.Content=d;return b.Sign(c,e.detached,E)}function l(){z=null;if("object"==typeof oCAPICOM&&null!=oCAPICOM.object){for(var b=["Utilities","Store","SignedData","Signer"],c,d,e=0;e<b.length;e++){d="\u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 CAPICOM \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u0430, \u043e\u0434\u043d\u0430\u043a\u043e \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u043e\u0434\u043d\u043e\u043c\u0443 \u0438\u0437 \u0435\u0435 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u043e\u0432 ("+
b[e]+").\n\u0412\u0435\u0440\u043e\u044f\u0442\u043d\u043e \u0412\u044b \u0438\u043b\u0438 \u0412\u0430\u0448 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 \u0437\u0430\u043f\u0440\u0435\u0442\u0438\u043b\u0438 \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u044d\u0442\u043e\u043c\u0443 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0443.\n\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u0435 \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0443. \u0422\u0430\u043a\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u043c\u043e\u0436\u0435\u0442 \u0432\u043e\u0437\u043d\u0438\u043a\u0430\u0442\u044c \u043f\u043e \u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u0438\u0437 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u043e\u0432 \u043f\u043e \u043e\u0447\u0435\u0440\u0435\u0434\u0438 (\u0434\u043e 4-\u0445 \u0440\u0430\u0437). \u0414\u043b\u044f \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0449\u0435\u043d\u0438\u044f \u0442\u0430\u043a\u0438\u0445 \u043e\u0448\u0438\u0431\u043e\u043a \u0432\u043d\u0435\u0441\u0438\u0442\u0435 \u044d\u0442\u043e\u0442 \u0441\u0430\u0439\u0442 \u0432 \u0441\u043f\u0438\u0441\u043e\u043a \u0434\u043e\u0432\u0435\u0440\u0435\u043d\u043d\u044b\u0445.";
try{c=a(b[e])}catch(f){d+="\n\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u043e\u0441\u0442\u0438 \u043e\u0448\u0438\u0431\u043a\u0438: "+f+"",c=null}if(!c)return z=d,!1}return!0}return!1}function q(a){function b(a,c,d,e){var f=0,g;for(g=0;4>g;g++)f+=a[g]+c[e+g],d[g]=f&255,f>>=8;for(g=0;8>g;g++)a=d[g>>1]&(g&1?240:15),d[g>>1]^=a,a>>=g&1?4:0,a=A[g][a],d[g>>1]|=a<<(g&1?4:0);a=d[3];d[3]=d[2];d[2]=d[1];d[1]=d[0];d[0]=a;a=d[0]>>5;for(g=1;4>g;g++)c=d[g]>>5,d[g]=255&(d[g]<<3|a),a=c;d[0]=255&(d[0]<<3|a)}function c(a,
b){var d;for(d=0;24>d;d++)b[d]=a[d+8];for(d=0;8>d;d++)b[d+24]=a[d]^a[d+8]}function d(a,b){for(var c=0;32>c;c++){var e=b,f=c,g=a,h=c&3,k=c>>2;k++;e[f]=g[(h<<3)+k-1]}}function e(a,b){for(var c,d;b--;){d=[0,0];d[0]^=a[0];d[1]^=a[1];d[0]^=a[2];d[1]^=a[3];d[0]^=a[4];d[1]^=a[5];d[0]^=a[6];d[1]^=a[7];d[0]^=a[24];d[1]^=a[25];d[0]^=a[30];d[1]^=a[31];for(c=0;30>c;c++)a[c]=a[c+2];a[30]=d[0];a[31]=d[1]}}function f(a,g,h){var k=[];k[0]=u.zero(p);k[1]=u.zero(p);k[2]=[0,255,0,255,0,255,0,255,255,0,255,0,255,0,255,
0,0,255,255,0,255,0,0,255,255,0,0,0,255,255,0,255];k[3]=u.zero(p);var r=[],n=[],m=[],l=[],D=[],w,A;u.copy(r,a);u.copy(n,g);for(w=0;32>w;w++)m[w]=r[w]^n[w];l[0]=u.zero(p);l[1]=u.zero(p);l[2]=u.zero(p);l[3]=u.zero(p);d(m,l[0]);for(A=1;4>A;A++){c(r,D);for(w=0;32>w;w++)r[w]=D[w]^k[A][w];c(n,D);c(D,n);for(w=0;32>w;w++)m[w]=r[w]^n[w];d(m,l[A])}k=u.zero(p);for(w=0;32>w;w+=8){r=a;n=l[w>>3];m=k;D=w;A=[];for(var x=[],v=void 0,N=void 0,q=void 0,v=0;4>v;v++)A[v]=r[D+v];for(v=0;4>v;v++)x[v]=r[D+v+4];for(N=0;3>
N;N++)for(v=0;32>v;v+=4){q=[];b(A,n,q,v);for(F=0;4>F;F++)q[F]^=x[F];u.copy(x,A);u.copy(A,q)}for(v=28;0<=v;v-=4){q=[];b(A,n,q,v);for(F=0;4>F;F++)q[F]^=x[F];u.copy(x,A);u.copy(A,q)}for(v=0;4>v;v++)m[D+v]=x[v];for(v=0;4>v;v++)m[D+v+4]=A[v]}e(k,12);for(w=0;32>w;w++)k[w]^=g[w];e(k,1);for(w=0;32>w;w++)k[w]^=a[w];e(k,61);u.copy(h,k)}var g,h,k,r,m=0,l=0,p=32,v,x,F,w=u.isString(a)?u.str2bin(a):a,D=w.length,A=[[10,4,5,6,8,1,3,7,13,12,14,0,9,2,11,15],[5,15,4,0,2,13,11,9,1,7,6,3,12,14,10,8],[7,15,12,14,9,4,1,
0,3,11,5,2,6,10,8,13],[4,10,7,12,0,15,2,8,14,1,6,5,13,11,9,3],[7,6,4,11,9,12,2,10,1,8,0,14,15,13,3,5],[7,6,2,4,13,9,15,0,10,1,5,11,8,14,12,3],[13,14,4,1,7,0,5,10,3,12,8,15,6,2,9,11],[1,3,10,9,5,11,4,15,8,6,7,14,13,0,2,12]];g=u.zero(p);h=u.zero(p);a=u.zero(p);k=u.zero(p);for(r=u.zero(p);l<D||m;)if(l<D?a[m++]=w[l++]:a[m++]=0,32==m){for(x=v=m=0;32>x;x++)v+=a[x]+g[x],g[x]=v&255,v>>=8;f(h,a,k);u.copy(h,k)}v=D<<3;for(x=0;32>x;x++)r[x]=v&255,v>>=8;f(h,r,k);u.copy(h,k);f(h,g,k);return u.bin2hex(k)}function s(a){var b=
4294967295,c;"string"===typeof a&&(a=u.str2bin(a));"function"===typeof u.crcTable&&(u.crcTable=u.crcTable());for(c=0;c<a.length;c++)b=u.crcTable[(b^a[c])&255]^b>>>8;return~b}var r={},m=2,p=0,x="My",E=0,G=0,I=495,y=4,M=2,L=1,C=!1,K={},z=null,B={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var b="",c,d,e,f,g,h,k=0;for(a=B._utf8_encode(a);k<a.length;)c=a.charCodeAt(k++),d=a.charCodeAt(k++),e=a.charCodeAt(k++),f=c>>2,c=(c&3)<<4|d>>4,g=(d&15)<<2|e>>6,h=
e&63,isNaN(d)?g=h=64:isNaN(e)&&(h=64),b=b+this._keyStr.charAt(f)+this._keyStr.charAt(c)+this._keyStr.charAt(g)+this._keyStr.charAt(h);return b},decode:function(a){var b="",c,d,e,f,g,h=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");h<a.length;)c=this._keyStr.indexOf(a.charAt(h++)),d=this._keyStr.indexOf(a.charAt(h++)),f=this._keyStr.indexOf(a.charAt(h++)),g=this._keyStr.indexOf(a.charAt(h++)),c=c<<2|d>>4,d=(d&15)<<4|f>>2,e=(f&3)<<6|g,b+=String.fromCharCode(c),64!=f&&(b+=String.fromCharCode(d)),64!=g&&
(b+=String.fromCharCode(e));return B._collapseBytes(b)},_collapseBytes:function(a){var b="",c=a.length,d,e,f;for(d=0;d<c;d+=2)d+1<c?(e=a.charCodeAt(d),f=a.charCodeAt(d+1),e=String.fromCharCode(e+(f<<8)),b+=e):(e=a.charCodeAt(d),b+=String.fromCharCode(e));return b},_utf8_encode:function(a){for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):(127<d&&2048>d?b+=String.fromCharCode(d>>6|192):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128)),b+=String.fromCharCode(d&
63|128))}return b},_utf8_decode:function(a){for(var b="",c=0,d=0,e=0,f=0;c<a.length;)d=a.charCodeAt(c),128>d?(b+=String.fromCharCode(d),c++):191<d&&224>d?(f=a.charCodeAt(c+1),b+=String.fromCharCode((d&31)<<6|f&63),c+=2):(e=a.charCodeAt(c+1),f=a.charCodeAt(c+2),b+=String.fromCharCode((d&15)<<12|(e&63)<<6|f&63),c+=3);return b}},u={binl2str:function(a,b){for(var c="",d=(1<<b)-1,e=0;e<32*a.length;e+=b)c+=String.fromCharCode(a[e>>5]>>>e%32&d);return c},str2binl:function(a,b){for(var c=[],d=(1<<b)-1,e=
0;e<a.length*b;e+=b)c[e>>5]|=(a.charCodeAt(e/b)&d)<<e%32;return c},str2bin:function(a){for(var b=[],c=0;c<a.length;c++)b[c]=a.charCodeAt(c);return b},binl2hex:function(a,b){for(var c=b?"0123456789ABCDEF":"0123456789abcdef",d="",e=0;e<4*a.length;e++)d+=c.charAt(a[e>>2]>>e%4*8+4&15)+c.charAt(a[e>>2]>>e%4*8&15);return d},bin2hex:function(a,b){for(var c=b?"0123456789ABCDEF":"0123456789abcdef",d="",e=0;e<a.length;e++)d+=c.charAt(a[e]>>4&15)+c.charAt(a[e]&15);return d},zero:function(a){for(var b=[],c=0;c<
a;c++)b.push(0);return b},copy:function(a,b){for(var c=b.length,d=0;d<c;d++)a[d]=b[d]},isString:function(a){return"[object String]"==Object.prototype.toString.call(a)},crcTable:function(){var a=[],b,c,d;for(c=0;256>c;b=++c){for(d=0;8>d;d++)b=b&1?3988292384^b>>>1:b>>>1;a[c]=b}return a}},P=function(a,b,c,d){function e(a,b){var c=(a&65535)+(b&65535);return(a>>16)+(b>>16)+(c>>16)<<16|c&65535}function f(a,b,c,d,g,h){a=e(e(b,a),e(d,h));return e(a<<g|a>>>32-g,c)}function g(a,b,c,d,e,h,k){return f(b&c|~b&
d,a,b,e,h,k)}function h(a,b,c,d,e,g,k){return f(b&d|c&~d,a,b,e,g,k)}function k(a,b,c,d,e,g,h){return f(c^(b|~d),a,b,e,g,h)}function r(a,b){a[b>>5]|=128<<b%32;a[(b+64>>>9<<4)+14]=b;for(var c=1732584193,d=-271733879,m=-1732584194,l=271733878,p=0;p<a.length;p+=16)var x=c,q=d,s=m,u=l,c=g(c,d,m,l,a[p+0],7,-680876936),l=g(l,c,d,m,a[p+1],12,-389564586),m=g(m,l,c,d,a[p+2],17,606105819),d=g(d,m,l,c,a[p+3],22,-1044525330),c=g(c,d,m,l,a[p+4],7,-176418897),l=g(l,c,d,m,a[p+5],12,1200080426),m=g(m,l,c,d,a[p+6],
17,-1473231341),d=g(d,m,l,c,a[p+7],22,-45705983),c=g(c,d,m,l,a[p+8],7,1770035416),l=g(l,c,d,m,a[p+9],12,-1958414417),m=g(m,l,c,d,a[p+10],17,-42063),d=g(d,m,l,c,a[p+11],22,-1990404162),c=g(c,d,m,l,a[p+12],7,1804603682),l=g(l,c,d,m,a[p+13],12,-40341101),m=g(m,l,c,d,a[p+14],17,-1502002290),d=g(d,m,l,c,a[p+15],22,1236535329),c=h(c,d,m,l,a[p+1],5,-165796510),l=h(l,c,d,m,a[p+6],9,-1069501632),m=h(m,l,c,d,a[p+11],14,643717713),d=h(d,m,l,c,a[p+0],20,-373897302),c=h(c,d,m,l,a[p+5],5,-701558691),l=h(l,c,d,
m,a[p+10],9,38016083),m=h(m,l,c,d,a[p+15],14,-660478335),d=h(d,m,l,c,a[p+4],20,-405537848),c=h(c,d,m,l,a[p+9],5,568446438),l=h(l,c,d,m,a[p+14],9,-1019803690),m=h(m,l,c,d,a[p+3],14,-187363961),d=h(d,m,l,c,a[p+8],20,1163531501),c=h(c,d,m,l,a[p+13],5,-1444681467),l=h(l,c,d,m,a[p+2],9,-51403784),m=h(m,l,c,d,a[p+7],14,1735328473),d=h(d,m,l,c,a[p+12],20,-1926607734),c=f(d^m^l,c,d,a[p+5],4,-378558),l=f(c^d^m,l,c,a[p+8],11,-2022574463),m=f(l^c^d,m,l,a[p+11],16,1839030562),d=f(m^l^c,d,m,a[p+14],23,-35309556),
c=f(d^m^l,c,d,a[p+1],4,-1530992060),l=f(c^d^m,l,c,a[p+4],11,1272893353),m=f(l^c^d,m,l,a[p+7],16,-155497632),d=f(m^l^c,d,m,a[p+10],23,-1094730640),c=f(d^m^l,c,d,a[p+13],4,681279174),l=f(c^d^m,l,c,a[p+0],11,-358537222),m=f(l^c^d,m,l,a[p+3],16,-722521979),d=f(m^l^c,d,m,a[p+6],23,76029189),c=f(d^m^l,c,d,a[p+9],4,-640364487),l=f(c^d^m,l,c,a[p+12],11,-421815835),m=f(l^c^d,m,l,a[p+15],16,530742520),d=f(m^l^c,d,m,a[p+2],23,-995338651),c=k(c,d,m,l,a[p+0],6,-198630844),l=k(l,c,d,m,a[p+7],10,1126891415),m=k(m,
l,c,d,a[p+14],15,-1416354905),d=k(d,m,l,c,a[p+5],21,-57434055),c=k(c,d,m,l,a[p+12],6,1700485571),l=k(l,c,d,m,a[p+3],10,-1894986606),m=k(m,l,c,d,a[p+10],15,-1051523),d=k(d,m,l,c,a[p+1],21,-2054922799),c=k(c,d,m,l,a[p+8],6,1873313359),l=k(l,c,d,m,a[p+15],10,-30611744),m=k(m,l,c,d,a[p+6],15,-1560198380),d=k(d,m,l,c,a[p+13],21,1309151649),c=k(c,d,m,l,a[p+4],6,-145523070),l=k(l,c,d,m,a[p+11],10,-1120210379),m=k(m,l,c,d,a[p+2],15,718787259),d=k(d,m,l,c,a[p+9],21,-343485551),c=e(c,x),d=e(d,q),m=e(m,s),l=
e(l,u);return[c,d,m,l]}c=c||!1;d=d||8;var m=u.str2binl,l=u.binl2str,p=u.binl2hex;return b?l(r(m(a,d),a.length*d),d):p(r(m(a,d),a.length*d),c)};window.Ext&&(Ext.util.MD5=P,Ext.util.GOST=q,Ext.util.CRC32=s,Ext.util.Base64={encode:k,decode:g});r.IsCAPICOMInstalled=l;r.SignText=d;r.SignFile=function(a,b,c,d,e){void 0==d&&(d=!0);return f(h,c,{data:a,co_sign:b,detached:d,bugfix:e||!1})};r.signData=function(a,b,c){var e="",f="";""==a?e="!\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442 \u043f\u043e\u0434\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u043c\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435!":
(f=d(a,b,c),""==f?e="!\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u043f\u043e\u0434\u043f\u0438\u0441\u044c!":"!"==f.charAt(0)&&(e=-1!=f.indexOf("The requested operation has been cancelled by the user.")?"!\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u043e\u0442\u043c\u0435\u043d\u0435\u043d\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c.":-1!=f.indexOf("The signer's certificate is not valid for signing")?"!\u0421\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442 \u043d\u0435\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u0435\u043d! \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0438\u0441\u0442\u0435\u043a \u0441\u0440\u043e\u043a \u0435\u0433\u043e \u0433\u043e\u0434\u043d\u043e\u0441\u0442\u0438 \u043b\u0438\u0431\u043e \u043d\u0430 \u0432\u0430\u0448\u0435\u043c \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u0435 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442 \u0438\u043b\u0438 \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u044b \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430 \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u042d\u041f. \u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u043a \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u0443 \u0432\u0430\u0448\u0435\u0433\u043e \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u0430 \u0438 \u0421\u041a\u0417\u0418.":
"!"+f.substr(1)));e&&(window.Ext&&(e=e.replace(/\n/g,"<br/>\n")),f=e);return f};window.Crypto=r;(function(){for(var a in r)r.hasOwnProperty(a)&&(window[a]=r[a])})()})();function checkSum(a,b,c,d){c=c||11;d=d||10;var e=0,f;for(f=0;f<a.length;f+=1)b.length>f&&(e+=parseInt(a.charAt(f),10)*b[f]);return e=e%c%d}function validateBankCorAccount(a,b){if(0<a.length&&6<b.length){var c="0"+b.substr(4,2)+a;if(0!=checkSum(c,[7,1,3,7,1,3,7,1,3,7,1,3,7,1,3,7,1,3,7,1,3,7,1],10))return!1}return!0}
function validateBankAccount(a,b){if(0<a.length&&6<b.length){var c=b.substr(b.length-3)+a;if(0!=checkSum(c,[7,1,3,7,1,3,7,1,3,7,1,3,7,1,3,7,1,3,7,1,3,7,1],10))return!1}return!0}function checkSignatureResult(a,b){if(!a||"!"==a.charAt(0)){var c=a?a.substr(1):"\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u042d\u041f";window.Ext?Ext.MessageBox.alert("\u041e\u0448\u0438\u0431\u043a\u0430",c,b):alert("\u041e\u0448\u0438\u0431\u043a\u0430: "+c);return!1}return!0}
function getSignature(a,b){if(window.Main&&Main.eds&&"none"==Main.eds.mode)return"null signature: "+a;var c=signData(a,1);return checkSignatureResult(c,b)?c:!1}
function getSignatureEx(a,b,c){function d(){var d=getSignature(a,c);!1!==d&&b&&b(d)}window.Main&&Main.eds&&Main.eds.warn_usage?window.Ext?Ext.MessageBox.confirm("\u041f\u043e\u0434\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u043f\u043e\u0434\u043f\u0438\u0441\u0438",'\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u0412 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0438 \u0441 \u043f.1 \u0441\u0442.6 \u0424\u0417 \u0420\u0424 \u043e\u0442 6 \u0430\u043f\u0440\u0435\u043b\u044f 2011 \u0433. N 63-\u0424\u0417 "\u041e\u0431 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0434\u043f\u0438\u0441\u0438", \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043a\u0432\u0430\u043b\u0438\u0444\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0439 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0434\u043f\u0438\u0441\u044c\u044e \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u044e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u0438 \u0437\u043d\u0430\u0447\u0438\u043c\u044b\u043c \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435\u043c, \u0432\u043b\u0435\u043a\u0443\u0449\u0438\u043c \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0441\u0442\u044c \u0437\u0430 \u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u043d\u043e\u0441\u0442\u044c \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u043e\u0439 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0434\u043f\u0438\u0441\u044c\u044e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438! \u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u0438\u0435?',function(a){"yes"==
a?d():c&&c(1)}):window.confirm('\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u0412 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0438 \u0441 \u043f.1 \u0441\u0442.6 \u0424\u0417 \u0420\u0424 \u043e\u0442 6 \u0430\u043f\u0440\u0435\u043b\u044f 2011 \u0433. N 63-\u0424\u0417 "\u041e\u0431 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0434\u043f\u0438\u0441\u0438", \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043a\u0432\u0430\u043b\u0438\u0444\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0439 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0434\u043f\u0438\u0441\u044c\u044e \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u044e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u0438 \u0437\u043d\u0430\u0447\u0438\u043c\u044b\u043c \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435\u043c, \u0432\u043b\u0435\u043a\u0443\u0449\u0438\u043c \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0441\u0442\u044c \u0437\u0430 \u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u043d\u043e\u0441\u0442\u044c \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u043e\u0439 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0434\u043f\u0438\u0441\u044c\u044e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438! \u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u0438\u0435?')?
d():c&&c(1):d()};Ext.ns("Main.templates");
function getProcedureDataTemplate(){return new Ext.XTemplate('<table class="tpltbl"><tr><th>\u041d\u043e\u043c\u0435\u0440 \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u044b:</th><td><tpl if=\'registry_number\'>{registry_number}</tpl><tpl if=\'!registry_number\'>{id}</tpl></td></tr><tr><th>\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u044b:</th><td>{title}</td></tr><tr><th>\u0424\u043e\u0440\u043c\u0430 \u0442\u043e\u0440\u0433\u043e\u0432:</th><td>{procedure_type_vocab}<tpl if="values.with_prequalification"> c \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435\u043c \u043a\u0432\u0430\u043b\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u043e\u0442\u0431\u043e\u0440\u0430</tpl></td></tr><tr><th>\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0442\u043e\u0440:</th><td>{org_full_name}</td></tr><tr><th>\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0442\u043e\u0440\u0430:</th><td>{contact_phone}, {contact_email}</td></tr><tr><th>\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u043e\u0435 \u043b\u0438\u0446\u043e:</th><td>{contact_person}</td></tr><tr><th>\u0414\u0430\u0442\u0430 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438 \u0438\u0437\u0432\u0435\u0449\u0435\u043d\u0438\u044f:</th><td>{[fm.localDateOnlyRenderer(values.date_published)]}</td></tr><tpl if="values.date_end_registration"><tr><th>\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f \u043f\u043e\u0434\u0430\u0447\u0438 \u0437\u0430\u044f\u0432\u043e\u043a:</th><td>{[fm.localDateText(values.date_end_registration)]}</td></tr></tpl><tpl if="values.date_applic_opened && Application.models.Procedure.isStatusExists(values.procedure_type, 3) && [PROCEDURE_TYPE_QUOTATION_REQ].indexOf(values.procedure_type)==-1"><tr><th>\u0414\u0430\u0442\u0430 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438 \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0430 \u0432\u0441\u043a\u0440\u044b\u0442\u0438\u044f \u043a\u043e\u043d\u0432\u0435\u0440\u0442\u043e\u0432:</th><td>{[fm.localDateText(values.date_applic_opened)]}</td></tr></tpl><tpl if="values.date_end_first_part_review"><tr><th>\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u0438\u044f:</th><td>{[fm.localDateText(values.date_end_first_part_review)]}</td></tr></tpl></table>')}
function getRequestInfoTemplate(){return new Ext.XTemplate('<table class="tpltbl"><tr><th>\u0422\u0435\u043a\u0441\u0442 \u0437\u0430\u043f\u0440\u043e\u0441\u0430:</th><td>{request_message}</td></tr><tr><th><tpl if="supplier_name">\u0423\u0447\u0430\u0441\u0442\u043d\u0438\u043a, \u043f\u043e\u043b\u0443\u0447\u0438\u0432\u0448\u0438\u0439 \u0437\u0430\u043f\u0440\u043e\u0441</tpl></th><td><tpl if="supplier_name">{supplier_name}</tpl></td></tr><tr><th>\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0435 \u043a \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b:</th><td><tpl if="values.request_docs">{request_docs}</tpl><tpl if="!values.request_docs">\u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442</tpl></td></tr><tpl if="response_message || status==4"><tr><th><tpl if="response_message && status != 4">\u0422\u0435\u043a\u0441\u0442 \u0440\u0430\u0437\u044a\u044f\u0441\u043d\u0435\u043d\u0438\u044f</tpl><tpl if="status==4">\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u044f \u0434\u043b\u044f \u043e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u044f</tpl>:</td><td><tpl if="response_message">{response_message}</tpl><tpl if="status==4 && cancel_reason">{cancel_reason}</tpl><tpl if="!response_message && !cancel_reason">\u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442</tpl></td></tr><tr><th>\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0435 \u043a \u0440\u0430\u0437\u044a\u044f\u0441\u043d\u0435\u043d\u0438\u044e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b:</th><td><tpl if="values.response_docs">{response_docs}</tpl><tpl if="!values.response_docs">\u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442</tpl></td></tr></tpl></table>')}
function getExplainInfoTemplate(){return new Ext.XTemplate('<table class="tpltbl"><tr><th>\u0422\u0435\u043a\u0441\u0442 \u0440\u0430\u0437\u044a\u044f\u0441\u043d\u0435\u043d\u0438\u044f:</td><td><tpl if="response_message">{response_message}</tpl><tpl if="!response_message">\u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442</tpl></td></tr><tr><th>\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0435 \u043a \u0440\u0430\u0437\u044a\u044f\u0441\u043d\u0435\u043d\u0438\u044e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b:</th><td>{response_docs}</td></tr>')}
function getFileDownloadTemplate(){return new Ext.XTemplate('<tpl if="values.short_name!==undefined"><a title="{name}" target="_blank" href="{link}">{short_name}</a></tpl><tpl elseif="values.short_name===undefined"> <a target="_blank" href="{link}">{name}</a></tpl>')}
function getLotDataTemplate(){return new Ext.XTemplate('<table class="tpltbl"><tr><th>\u0420\u0435\u0435\u0441\u0442\u0440\u043e\u0432\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u044b</th><td>{procedure_registry_number}</td></tr><tr><th>\u041d\u043e\u043c\u0435\u0440 \u043b\u043e\u0442\u0430</th><td>{number}</td></tr><tpl if="!shortInfo"><tpl if="values.lot_customers!=null"><tr><th>\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0438, \u0441 \u043a\u043e\u0442\u043e\u0440\u044b\u043c\u0438 \u0437\u0430\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440</th><td><tpl for="lot_customers">{#}. {full_name}. \u0410\u0434\u0440\u0435\u0441 \u043c\u0435\u0441\u0442\u043e\u043d\u0430\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f: {address}\n</tpl></td></tr></tpl></tpl><tr><th>\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430</th><td>{subject}</td></tr><tr><th>\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u0430\u044f \u0446\u0435\u043d\u0430</th><td>{start_price}</td></tr><tr><th>\u0412\u0430\u043b\u044e\u0442\u0430</th><td>{currency_vocab}</td></tr><tpl if="!shortInfo"><tpl if="values.nomenclature!=null"><tr><th>\u041d\u043e\u043c\u0435\u043d\u043a\u043b\u0430\u0442\u0443\u0440\u0430 \u043b\u043e\u0442\u0430</th><td><tpl for="nomenclature">{full_name}; </tpl></td></tr></tpl><tpl if="values.lot_units!=null"><tr><th colspan="2">\u041f\u0435\u0440\u0435\u0447\u0435\u043d\u044c \u043f\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u043c\u044b\u0445 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u043c\u044b\u0445 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u043c\u044b\u0445 \u0443\u0441\u043b\u0443\u0433</th></tr><tr><td colspan="2"><table class="tplsubtbl"><tr><td width="30%">\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435</td><td width="10%">\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e</td><td width="40%">\u0425\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438</td></tr><tpl for="lot_units"><tr><td>{name}</td><td>{quantity}</td><td><tpl if="values.requirements.length!=0"><tpl for="requirements">{#}. {requirement} ({type_vocab}): {value}\n</tpl></td></tr></tpl><tpl if="values.requirements.length==0">\u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u044b</tpl></tpl></table></tpl><tpl if="values.lot_delivery_places!=null"><tr><th>\u041c\u0435\u0441\u0442\u043e \u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438</th><td><tpl for="lot_delivery_places">\u041e\u0431\u044a\u0435\u043c \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438: {quantity}<br>\u0410\u0434\u0440\u0435\u0441 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438: {address}<br>\u0423\u0441\u043b\u043e\u0432\u0438\u044f \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438: {term}<br><br></tpl></td></tr></tpl><tr><th>\u0420\u0430\u0437\u043c\u0435\u0440 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u0437\u0430\u044f\u0432\u043a\u0438 \u043d\u0430 \u0443\u0447\u0430\u0441\u0442\u0438\u0435</th><td><tpl if="values.guarantee_application==null">\u043d\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f</tpl><tpl if="values.guarantee_application!=null">{guarantee_application}</tpl></td></tr><tr><th>\u0420\u0430\u0437\u043c\u0435\u0440 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430</th><td><tpl if="values.guarantee_contract==null">\u043d\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f</tpl><tpl if="values.guarantee_contract!=null">{guarantee_contract}</tpl></td></tr><tr><th>\u0420\u0430\u0437\u043c\u0435\u0440 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0430 \u0430\u0432\u0430\u043d\u0441\u0430</th><td><tpl if="values.guarantee_advance==null">\u043d\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f</tpl><tpl if="values.guarantee_advance!=null">{guarantee_advance}</tpl></td></tr><tr><th>\u0420\u0430\u0437\u043c\u0435\u0440 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u0439\u043d\u044b\u0445 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432</th><td><tpl if="values.guarantee_warranty==null">\u043d\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f</tpl><tpl if="values.guarantee_warranty!=null">{guarantee_warranty}</tpl></td></tr><tpl if="values.lot_doc_requirements!=null"><tr><th>\u0422\u0440\u0435\u0431\u0443\u0435\u043c\u0430\u044f \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f</th><td><tpl for="lot_doc_requirements">{#}. {requirement} (\u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: {reason}), {application_part}-\u044f \u0447\u0430\u0441\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0438<br></tpl></td></tr></tpl></tpl></table>')}
function getTsnApplicSignatureTemplate(){return new Ext.XTemplate('\u0417\u0410\u042f\u0412\u041a\u0410 \u041d\u0410 \u0423\u0427\u0410\u0421\u0422\u0418\u0415 \u0412 \u041f\u0420\u041e\u0426\u0415\u0414\u0423\u0420\u0415\n\n\u0420\u0435\u0435\u0441\u0442\u0440\u043e\u0432\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u044b: {registry_number}\n\u0424\u043e\u0440\u043c\u0430 \u0442\u043e\u0440\u0433\u043e\u0432: {procedure_type_vocab}<tpl if="values.procedure.with_prequalification"> c \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435\u043c \u043a\u0432\u0430\u043b\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u043e\u0442\u0431\u043e\u0440\u0430</tpl>\n\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u044b: {title}\n\n\u0421\u0412\u0415\u0414\u0415\u041d\u0418\u042f \u041e \u041b\u041e\u0422\u0415\n\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430: {lot_unit_name}\n\u0412\u0430\u043b\u044e\u0442\u0430: {currency_vocab}\n\u0415\u0434\u0438\u043d\u0438\u0446\u0430 \u0438\u0437\u043c\u0435\u0440\u0435\u043d\u0438\u044f: {okei_id}\n\n\u0417\u0410\u042f\u0412\u041a\u0410\n<tpl if="quantity">\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e: {values.form.quantity}\n</tpl><tpl if="price">\u0426\u0435\u043d\u0430: {values.form.price} {currency_vocab_short}\n</tpl>')}
function getTsnApplicCancelSignatureTemplate(){return new Ext.XTemplate("\u0417\u0430\u044f\u0432\u0438\u0442\u0435\u043b\u044c {values.contragent.full_name} \u0443\u0434\u0430\u043b\u044f\u0435\u0442 \u0447\u0435\u0440\u043d\u043e\u0432\u0438\u043a \u0437\u0430\u044f\u0432\u043a\u0438.\n\u0420\u0435\u0435\u0441\u0442\u0440\u043e\u0432\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u044b: {values.procedure.registry_number}\n\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u044b: {values.procedure.title}\n\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0447\u0435\u0440\u043d\u043e\u0432\u0438\u043a\u0430 \u0437\u0430\u044f\u0432\u043a\u0438: {[Ext.util.Format.date(new Date(), 'd.m.Y H:i')]}")}
function getTsnProcedureSignatureTemplate(){return new Ext.XTemplate('\u0418\u0417\u0412\u0415\u0429\u0415\u041d\u0418\u0415 \u041e \u041f\u0420\u041e\u0412\u0415\u0414\u0415\u041d\u0418\u0418 \u0422\u041e\u0420\u0413\u041e\u0412\n\n\u0424\u043e\u0440\u043c\u0430 \u0442\u043e\u0440\u0433\u043e\u0432: {procedure_type_vocab}\n<tpl if="values.with_prequalification"> c \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435\u043c \u043a\u0432\u0430\u043b\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u043e\u0442\u0431\u043e\u0440\u0430</tpl>\n\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u044b: {title}\n\n\u0414\u0410\u041d\u041d\u042b\u0415 \u041e\u0411 \u041e\u0420\u0413\u0410\u041d\u0418\u0417\u0410\u0422\u041e\u0420\u0415\n\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0442\u043e\u0440\u0430: {org_full_name}\n\u041c\u0435\u0441\u0442\u043e\u043d\u0430\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0442\u043e\u0440\u0430: {org_postal_address}\n\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u044b\u0439 \u0442\u0435\u043b\u0435\u0444\u043e\u043d: {contact_phone}\n\u0410\u0434\u0440\u0435\u0441 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0447\u0442\u044b: {contact_email}\n\u0424.\u0418.\u041e.\u043a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u043e\u0433\u043e \u043b\u0438\u0446\u0430: {contact_person}\n<tpl if="values.date_published!==undefined">\u0414\u0430\u0442\u0430 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438: {[fm.localDateOnlyRenderer(values.date_published)]}\n</tpl>\n\u0421\u0412\u0415\u0414\u0415\u041d\u0418\u042f \u041e \u041b\u041e\u0422\u0415\n\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430: {lot_unit_name}\n\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u0430\u044f \u0446\u0435\u043d\u0430: <tpl if="values.start_price">{[fm.price(values.start_price)]}</tpl><tpl if="!values.start_price">\u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e</tpl>\n\u0412\u0430\u043b\u044e\u0442\u0430: {currency_vocab}\n\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e: {quantity}\n\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e: {[this.processNotRequired(values.min_quantity)]}\n\u0415\u0434\u0438\u043d\u0438\u0446\u0430 \u0438\u0437\u043c\u0435\u0440\u0435\u043d\u0438\u044f: {okei_id}\n\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430: {lot_unit_description}\n<tpl if="values.nomenclature!=undefined">\u041d\u043e\u043c\u043d\u043a\u043b\u0430\u0442\u0443\u0440\u043d\u044b\u0435 \u0433\u0440\u0443\u043f\u043f\u044b:\n<tpl for="nomenclature">{full_name}\n</tpl></tpl><tpl if="values.buyer_requirements">\n\u0422\u0420\u0415\u0411\u041e\u0412\u0410\u041d\u0418\u042f \u041a \u041f\u041e\u041a\u0423\u041f\u0410\u0422\u0415\u041b\u042f\u041c\n{buyer_requirements}\n</tpl><tpl if="values.address_string!=undefined">\n \u0410\u0414\u0420\u0415\u0421 \u041c\u0415\u0421\u0422\u041e\u041d\u0410\u0425\u041e\u0416\u0414\u0415\u041d\u0418\u042f \u0422\u041e\u0412\u0410\u0420\u0410\n{[this.processNotRequired(values.address_string)]}\n</tpl><tpl if="values.evaluation_criteries">\n\u041a\u0420\u0418\u0422\u0415\u0420\u0418\u0418 \u041e\u0426\u0415\u041d\u041a\u0418 \u0417\u0410\u042f\u0412\u041e\u041a\n{evaluation_criteries}\n</tpl><tpl if="values.discount_period!=0">\n\u041d\u0410\u0421\u0422\u0420\u041e\u0419\u041a\u0418 \u0410\u0412\u0422\u041e\u041c\u0410\u0422\u0418\u0427\u0415\u0421\u041a\u041e\u0419 \u041f\u0415\u0420\u0415\u041e\u0426\u0415\u041d\u041a\u0418:\n\u0421\u0440\u043e\u043a \u0434\u043e \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u043f\u0435\u0440\u0435\u043e\u0446\u0435\u043d\u043a\u0438 {discount_period} \u043d\u0435\u0434.\n\u0420\u0430\u0437\u043c\u0435\u0440 \u0434\u0438\u0441\u043a\u043e\u043d\u0442\u0430 \u043f\u0435\u0440\u0435\u043e\u0446\u0435\u043d\u043a\u0438 {discount_percent}%\n</tpl><tpl if="values.lot_unit_pictures.length!=0">\n\u0418\u0417\u041e\u0411\u0420\u0410\u0416\u0415\u041d\u0418\u042f \u0422\u041e\u0412\u0410\u0420\u0410 \n<tpl for="lot_unit_pictures">{#}. {descr} - {name}  (\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0413\u041e\u0421\u0422 \u042034.11-94: {hash})\n</tpl></tpl><tpl if="values.lot_unit_documents.length!=0">\n\u0414\u041e\u041a\u0423\u041c\u0415\u041d\u0422\u0410\u0426\u0418\u042f \u041a \u0422\u041e\u0412\u0410\u0420\u0423 \n<tpl for="lot_unit_documents">{#}. {descr} - {name}  (\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0413\u041e\u0421\u0422 \u042034.11-94: {hash})\n</tpl></tpl><tpl if="values.lot_documentation.length!=0">\n\u041f\u0420\u041e\u0415\u041a\u0422 \u0414\u041e\u0413\u041e\u0412\u041e\u0420\u0410 \u0418 \u0421\u041e\u041f\u0420\u041e\u0412\u041e\u0414\u0418\u0422\u0415\u041b\u042c\u041d\u0410\u042f \u0414\u041e\u041a\u0423\u041c\u0415\u041d\u0422\u0410\u0426\u0418\u042f \u041f\u041e \u041b\u041e\u0422\u0423 \n<tpl for="lot_documentation">{#}. {descr} - {name}  (\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0413\u041e\u0421\u0422 \u042034.11-94: {hash})\n</tpl></tpl>',{processNotRequired:function(a){return Ext.isEmpty(a)||
"null"==a?"\u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e":a}})}
function getProcedureSignatureTemplate(a){var b="\u041f\u043e\u0440\u044f\u0434\u043e\u043a \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u0438\u044f \u0437\u0430\u044f\u0432\u043e\u043a: {application_stages} \u044d\u0442\u0430\u043f(\u0430)\n",c='<tpl if="values.guarantee_advance">\u0420\u0430\u0437\u043c\u0435\u0440 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0430 \u0430\u0432\u0430\u043d\u0441\u0430: {guarantee_advance}\n</tpl>',d=
'<tpl if="values.guarantee_warranty">\u0420\u0430\u0437\u043c\u0435\u0440 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u0439\u043d\u044b\u0445 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432: {guarantee_warranty}\n</tpl>';a&&(a==Application.models.Procedure.type_ids.contest&&(b="",date_end_first_parts_review_text="\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u0438\u044f \u0437\u0430\u044f\u0432\u043e\u043a"),
a==Application.models.Procedure.type_ids.quotation&&(b=""),a==Application.models.Procedure.type_ids.pricelist&&(b=""),a==Application.models.Procedure.type_ids.quotation&&(date_applic_opened_text="\u0414\u0430\u0442\u0430 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u0438\u044f \u0437\u0430\u044f\u0432\u043e\u043a"));Main.config.advance_guarantee_configurable||a!=Application.models.Procedure.type_ids.auction_up&&a!=Application.models.Procedure.type_ids.auction_down&&a!=Application.models.Procedure.type_ids.contest||
(c='<tpl if="values.guarantee_advance_set">\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0430 \u0430\u0432\u0430\u043d\u0441\u0430 \u0432 \u0440\u0430\u0437\u043c\u0435\u0440\u0435 \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 \u0441\u0443\u043c\u043c\u044b \u0430\u0432\u0430\u043d\u0441\u043e\u0432\u044b\u0445 \u043f\u043b\u0430\u0442\u0435\u0436\u0435\u0439<tpl if="guarantee_advance_type==1"> \u0434\u043e \u0437\u0430\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430</tpl><tpl if="guarantee_advance_type==2"> \u0441 \u043c\u043e\u043c\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430</tpl>\n</tpl>');
"percent"==Main.config.warranty_guarantee_type?d='<tpl if="values.guarantee_warranty">\u0420\u0430\u0437\u043c\u0435\u0440 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u0439\u043d\u044b\u0445 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432: {guarantee_warranty} %\n</tpl>':"text"==Main.config.warranty_guarantee_type&&(d='<tpl if="values.guarantee_warranty_text">\u0420\u0430\u0437\u043c\u0435\u0440 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u0439\u043d\u044b\u0445 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u0441\u0442\u0432: {guarantee_warranty_text}\n</tpl>');
b='\u0418\u0417\u0412\u0415\u0429\u0415\u041d\u0418\u0415 \u041e \u041f\u0420\u041e\u0412\u0415\u0414\u0415\u041d\u0418\u0418 \u041f\u0420\u041e\u0426\u0415\u0414\u0423\u0420\u042b {[this.procedureClass(this.procedure_type)]}\n\n\u0424\u043e\u0440\u043c\u0430 \u0442\u043e\u0440\u0433\u043e\u0432: {procedure_type_vocab}<tpl if="values.price_increase"> (\u043d\u0430 \u043f\u043e\u0432\u044b\u0448\u0435\u043d\u0438\u0435)</tpl><tpl if="values.with_prequalification"> c \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435\u043c \u043a\u0432\u0430\u043b\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u043e\u0442\u0431\u043e\u0440\u0430</tpl>\n<tpl if="values.purchase_method_name">\u0421\u043f\u043e\u0441\u043e\u0431 \u0437\u0430\u043a\u0443\u043f\u043a\u0438 \u043f\u043e \u043a\u043b\u0430\u0441\u0441\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u0443 \u0415\u0418\u0421: {purchase_method_name}\n</tpl>\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u044b: {title}\n\n\u0414\u0410\u041d\u041d\u042b\u0415 \u041e\u0411 \u041e\u0420\u0413\u0410\u041d\u0418\u0417\u0410\u0422\u041e\u0420\u0415\n\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0442\u043e\u0440\u0430: {org_full_name}\n\u0422\u0438\u043f \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0442\u043e\u0440\u0430: {org_customer_type}\n\u041c\u0435\u0441\u0442\u043e\u043d\u0430\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0442\u043e\u0440\u0430: {org_postal_address}\n\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u044b\u0439 \u0442\u0435\u043b\u0435\u0444\u043e\u043d: {contact_phone}\n<tpl if="Main.config.procedure_contact_fax && values.contact_fax">\u0424\u0430\u043a\u0441: {contact_fax}\n</tpl>\u0410\u0434\u0440\u0435\u0441 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0447\u0442\u044b: {contact_email}\n\u0424.\u0418.\u041e.\u043a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u043e\u0433\u043e \u043b\u0438\u0446\u0430: {contact_person}\n<tpl if="Main.config.review_applics_city && values.review_applics_city">\u041c\u0435\u0441\u0442\u043e \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u0438\u044f \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0439: {review_applics_city}\n</tpl>\n\u0421\u0412\u041e\u0419\u0421\u0422\u0412\u0410 \u041f\u0420\u041e\u0426\u0415\u0414\u0423\u0420\u042b\n<tpl if="values.private">\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u043b \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u0443\u0447\u0430\u0441\u0442\u0438\u044e \u0432 \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u0435 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u043d\u044b\u043c \u043a\u0440\u0443\u0433\u043e\u043c \u0437\u0430\u044f\u0432\u0438\u0442\u0435\u043b\u0435\u0439\n</tpl>{[this.renderStepInfo(values.steps)]}<tpl if="values.application_stages!==undefined">'+
b+'</tpl><tpl if="Application.models.Procedure.groups.auctions.indexOf(procedure_type)&gt;=0"><tpl if="values.offers_wait_time">\u0412\u0440\u0435\u043c\u044f \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u044f \u0446\u0435\u043d\u043e\u0432\u044b\u0445 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0439: {offers_wait_time} \u043c\u0438\u043d\u0443\u0442\n</tpl><tpl if="values.offers_step_min">\u0428\u0430\u0433 \u0446\u0435\u043d\u043e\u0432\u044b\u0445 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0439<tpl if="!values.step_is_exact">: \u043e\u0442 {offers_step_min}% \u0434\u043e {offers_step_max}%\n</tpl><tpl if="values.step_is_exact"> (\u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430): \u043e\u0442 {offers_step_min} \u0434\u043e {offers_step_max}\n</tpl></tpl></tpl><tpl if="values.date_published!==undefined">\u0414\u0430\u0442\u0430 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438: {[fm.localDateOnlyRenderer(values.date_published)]}\n</tpl><tpl if="values.steps">{[this.renderStepDates(values.steps, values.procedure_type)]}</tpl><tpl if="values.canceled_text">{values.canceled_text}\n</tpl><tpl if="Main.config.subject_code && values.procedure_subject_codes">\n\u041a\u041e\u0414 \u041f\u0420\u0415\u0414\u041c\u0415\u0422\u0410 \u0417\u0410\u041a\u0423\u041f\u041a\u0418 \n<tpl for="values.procedure_subject_codes">{full_name}\n</tpl></tpl><tpl if="Main.config.inner_classification && values.procedure_inner_classification">\n\u041a\u041e\u0414 \u0412\u041d\u0423\u0422\u0420\u0415\u041d\u041d\u0415\u0419 \u041a\u041b\u0410\u0421\u0421\u0418\u0424\u0418\u041a\u0410\u0426\u0418\u0418 \u0417\u0410\u041a\u0423\u041f\u041a\u0418 \n<tpl for="values.procedure_inner_classification">{full_name}\n</tpl></tpl><tpl if="common_files.length!=0">\n\u0414\u041e\u041a\u0423\u041c\u0415\u041d\u0422\u0410\u0426\u0418\u042f \u041f\u0420\u041e\u0426\u0415\u0414\u0423\u0420\u042b \n<tpl for="common_files">{#}. {descr} - {name}  (\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0413\u041e\u0421\u0422 \u042034.11-94: {hash}) \n</tpl></tpl><tpl for="lots">\n\u041b\u041e\u0422 \u2116 {number}\n\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0438, \u0441 \u043a\u043e\u0442\u043e\u0440\u044b\u043c\u0438 \u0437\u0430\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440:\n<tpl for="lot_customers">\n{#}. {full_name}. \u0410\u0434\u0440\u0435\u0441 \u043c\u0435\u0441\u0442\u043e\u043d\u0430\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f: {address}\n\n</tpl>\u041f\u0420\u0415\u0414\u041c\u0415\u0422 \u0414\u041e\u0413\u041e\u0412\u041e\u0420\u0410\n{subject}\n\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u0430\u044f \u0446\u0435\u043d\u0430: <tpl if="values.start_price">{[fm.price(values.start_price)]}</tpl><tpl if="!values.start_price">\u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e</tpl>\n\u0412\u0430\u043b\u044e\u0442\u0430: {currency_vocab}\n<tpl if="values.single_unit">\u0422\u043e\u0440\u0433\u0438 \u0437\u0430 \u0435\u0434\u0438\u043d\u0438\u0446\u0443. <tpl if="values.unit_price">\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u0430\u044f \u0446\u0435\u043d\u0430 \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430: {[fm.price(values.unit_price)]}</tpl>\n</tpl><tpl if="values.date_end_contract">\u0421\u0440\u043e\u043a \u0437\u0430\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: {[fm.localDateOnlyRenderer(values.date_end_contract)]}\n</tpl><tpl for="nomenclature">\n{full_name}\n</tpl><tpl for="okved">\n{full_name}\n</tpl><tpl for="okved2">\n{full_name}\n</tpl><tpl if="values.lot_units.length!=0">\n\u041f\u0415\u0420\u0415\u0427\u0415\u041d\u042c \u041f\u041e\u0421\u0422\u0410\u0412\u041b\u042f\u0415\u041c\u042b\u0425 \u0422\u041e\u0412\u0410\u0420\u041e\u0412, \u0412\u042b\u041f\u041e\u041b\u041d\u042f\u0415\u041c\u042b\u0425 \u0420\u0410\u0411\u041e\u0422, \u041e\u041a\u0410\u0417\u042b\u0412\u0410\u0415\u041c\u042b\u0425 \u0423\u0421\u041b\u0423\u0413\n<tpl for="lot_units">\u041f\u041e\u0417\u0418\u0426\u0418\u042f {#}\n\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435: {name}\n\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e: {quantity}\n\u041e\u041a\u0415\u0418: {okei_symbol}\n\u041e\u041a\u0412\u042d\u0414: {okved_code}\n<tpl if="Main.config.show_okpd2_and_okved2">\u041e\u041a\u0412\u042d\u04142: {okved2_code}\n</tpl><tpl if="values.requirements.length!=0">\u0425\u0410\u0420\u0410\u041a\u0422\u0415\u0420\u0418\u0421\u0422\u0418\u041a\u0418\n<tpl for="requirements">{#}. {requirement} ({type_vocab}): {value}\n</tpl></tpl><tpl if="values.simple_requirements">\u0425\u0410\u0420\u0410\u041a\u0422\u0415\u0420\u0418\u0421\u0422\u0418\u041a\u0418\n{simple_requirements}\n</tpl></tpl></tpl>\n<tpl if="values.lot_delivery_places.length!=0">';
b+='\n\u041c\u0415\u0421\u0422\u041e \u0418 \u0423\u0421\u041b\u041e\u0412\u0418\u042f \u041f\u041e\u0421\u0422\u0410\u0412\u041a\u0418\n<tpl for="lot_delivery_places"><tpl if="quantity">\u041e\u0431\u044a\u0435\u043c \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438: {[this.processNotRequired(values.quantity)]}\n</tpl><tpl if="address">\u0410\u0434\u0440\u0435\u0441 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438: {[this.processNotRequired(values.address)]}\n</tpl><tpl if="term">\u0423\u0441\u043b\u043e\u0432\u0438\u044f \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438: {[this.processNotRequired(values.term)]}\n</tpl>\n</tpl></tpl>\u0422\u0420\u0415\u0411\u041e\u0412\u0410\u041d\u0418\u042f \u041a \u0417\u0410\u042f\u0412\u0418\u0422\u0415\u041b\u042f\u041c\n<tpl if="values.guarantee_application">\u0420\u0430\u0437\u043c\u0435\u0440 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u0437\u0430\u044f\u0432\u043a\u0438 \u043d\u0430 \u0443\u0447\u0430\u0441\u0442\u0438\u0435: {[fm.price(values.guarantee_application)]}\n</tpl><tpl if="values.guarantee_application">\u0412\u0430\u043b\u044e\u0442\u0430 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u0437\u0430\u044f\u0432\u043a\u0438 \u043d\u0430 \u0443\u0447\u0430\u0441\u0442\u0438\u0435: {guarantee_currency_vocab}\n</tpl><tpl if="values.guarantee_contract">\u0420\u0430\u0437\u043c\u0435\u0440 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u044f \u0438\u0441\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430: {[fm.price(values.guarantee_contract)]}\n</tpl>'+
c+d+'<tpl if="values.insurance_types && values.insurance_types != 1">\n\u0423\u0441\u043b\u043e\u0432\u0438\u044f\u043c\u0438 \u0437\u0430\u043a\u0443\u043f\u043a\u0438 \u043f\u0440\u0435\u0434\u0443\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u043e \u0441\u0442\u0440\u0430\u0445\u043e\u0432\u0430\u043d\u0438\u0435:\n<tpl if="values.insurance_types%2==0">  \u0421\u0442\u0440\u0430\u0445\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u043d\u043e-\u043c\u043e\u043d\u0442\u0430\u0436\u043d\u044b\u0445 \u0440\u0438\u0441\u043a\u043e\u0432\n</tpl><tpl if="values.insurance_types%3==0">  \u0421\u0442\u0440\u0430\u0445\u043e\u0432\u0430\u043d\u0438\u0435 \u0433\u0440\u0443\u0437\u043e\u0432 \u043d\u0430 \u0432\u0440\u0435\u043c\u044f \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0438\n</tpl><tpl if="values.insurance_types%5==0">  \u0421\u0442\u0440\u0430\u0445\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u0430 \u043e\u0442 \u043d\u0435\u0441\u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0441\u043b\u0443\u0447\u0430\u044f\n</tpl><tpl if="values.insurance_types%7==0">  \u0421\u0442\u0440\u0430\u0445\u043e\u0432\u0430\u043d\u0438\u0435 \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u043f\u0435\u0440\u0435\u0434 \u0442\u0440\u0435\u0442\u044c\u0438\u043c\u0438 \u043b\u0438\u0446\u0430\u043c\u0438 (\u0441\u0442\u0440\u0430\u0445\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0439 \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0441\u0442\u0438, \u0441\u0442\u0440\u0430\u0445\u043e\u0432\u0430\u043d\u0438\u0435 \u043e\u0431\u0449\u0435\u0433\u0440\u0430\u0436\u0434\u0430\u043d\u0441\u043a\u043e\u0439 \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0438 \u0442.\u0434)\n</tpl><tpl if="values.insurance_types%11==0">  \u0418\u043d\u044b\u0435 \u0432\u0438\u0434\u044b \u0441\u0442\u0440\u0430\u0445\u043e\u0432\u0430\u043d\u0438\u044f (\u0441\u0442\u0440\u0430\u0445\u043e\u0432\u0430\u043d\u0438\u0435 \u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430, \u043b\u0438\u0447\u043d\u043e\u0435 \u0441\u0442\u0440\u0430\u0445\u043e\u0432\u0430\u043d\u0438\u0435, \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0441\u043d\u044b\u0435 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u044b \u0441\u0442\u0440\u0430\u0445\u043e\u0432\u0430\u043d\u0438\u044f)\n</tpl>\n</tpl><tpl for="lot_doc_requirements">{#}. {requirement} (\u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435: {reason}), {application_part}-\u044f \u0447\u0430\u0441\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0438\n</tpl><tpl if="values.simple_preferences">\u0423\u0421\u0422\u0410\u041d\u041e\u0412\u041b\u0415\u041d\u042b \u041f\u0420\u0415\u0424\u0415\u0420\u0415\u041d\u0426\u0418\u0418 \u041e\u0422\u0414\u0415\u041b\u042c\u041d\u042b\u041c \u0423\u0427\u0410\u0421\u0422\u041d\u0418\u041a\u0410\u041c\n{simple_preferences}\n\n</tpl><tpl if="values.simple_evaluation_criteries">\u041a\u0420\u0418\u0422\u0415\u0420\u0418\u0418 \u041e\u0426\u0415\u041d\u041a\u0418 \u0417\u0410\u042f\u0412\u041e\u041a\n{simple_evaluation_criteries}\n\n</tpl><tpl if="values.simple_requirements">\u0414\u041e\u041f\u041e\u041b\u041d\u0418\u0422\u0415\u041b\u042c\u041d\u0410\u042f \u0418\u041d\u0424\u041e\u0420\u041c\u0410\u0426\u0418\u042f \u0414\u041b\u042f \u0417\u0410\u042f\u0412\u0418\u0422\u0415\u041b\u0415\u0419\n{simple_requirements}\n\n</tpl><tpl if="values.lot_documentation.length!=0">\u0414\u041e\u041a\u0423\u041c\u0415\u041d\u0422\u0410\u0426\u0418\u042f \u041f\u041e \u041b\u041e\u0422\u0423 \n<tpl for="lot_documentation">{#}. {descr} - {name}  (\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0413\u041e\u0421\u0422 \u042034.11-94: {hash}) </tpl></tpl></tpl>';
return new Ext.XTemplate(b,{processNotRequired:function(a){return Ext.isEmpty(a)||"null"==a?"\u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e":a},procedureClass:function(a){return 0<=[Application.models.Procedure.type_ids.peretorg_reduc,Application.models.Procedure.type_ids.peretorg_contest].indexOf(a)?"\u041f\u0415\u0420\u0415\u0422\u041e\u0420\u0416\u041a\u0418":"\u0417\u0410\u041a\u0423\u041f\u041a\u0418"},renderStepDates:function(a,b){if(!a)return"";var c="";a=Ext.util.JSON.decode(a);for(i=
0;i<a.length;i++)st=a[i],step_data=Application.models.Procedure.getStep(st.step_id),full_name=step_data.full_name.defaultName,step_data.full_name[b]&&(full_name=step_data.full_name[b]),dt=st.date_end,Ext.isEmpty(dt)&&(dt=st.date_start),full_name&&dt&&(dt=step_data.displayFormat&&"d.m.Y"==step_data.displayFormat?Ext.util.Format.localDateOnlyRenderer(dt):Ext.util.Format.localDateText(dt),c+=full_name+": "+dt+"\n");return c},renderStepInfo:function(a){if(!Main.config.multistep_support)return"";var b=
"",c="";if(Ext.isEmpty(a))return b;a=Ext.util.JSON.decode(a);for(var b=b+"\n\u042d\u0422\u0410\u041f\u042b \u041f\u0420\u041e\u0412\u0415\u0414\u0415\u041d\u0418\u042f \u041f\u0420\u041e\u0426\u0415\u0414\u0423\u0420\u042b\n",d=0;d<a.length;d++)c=Main.config.procedure_steps[a[d].step_id].full_name+"\n",b+=c;return b+"\n"},procedure_type:a})}
function cmpdataTpl(){return'\n\n\u0414\u0410\u041d\u041d\u042b\u0415 \u041e \u0417\u0410\u042f\u0412\u0418\u0422\u0415\u041b\u0415\n\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435/\u0424.\u0418.\u041e. \u0437\u0430\u044f\u0432\u0438\u0442\u0435\u043b\u044f: {full_name}\n\u0418\u041d\u041d: {inn}\n\u042e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0430\u0434\u0440\u0435\u0441: {legal_address}\n\u041f\u043e\u0447\u0442\u043e\u0432\u044b\u0439 \u0430\u0434\u0440\u0435\u0441: {postal_address}\n<tpl if="values.phone">\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u044b\u0439 \u0442\u0435\u043b\u0435\u0444\u043e\u043d: {phone}\n</tpl><tpl if="values.max_sum_docs && values.max_sum_docs.length!=0">\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u043e\u0431 \u043e\u0434\u043e\u0431\u0440\u0435\u043d\u0438\u0438 \u0441\u0443\u043c\u043c\u044b \u0441\u0434\u0435\u043b\u043a\u0438\n<tpl for="max_sum_docs">\n{#}. {descr} - {name} (\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0413\u041e\u0421\u0422 \u042034.11-94: {hash})\n</tpl></tpl>'}
function cmpdataTblTpl(){return'<tr><th colspan="2">\u0414\u0410\u041d\u041d\u042b\u0415 \u041e \u0417\u0410\u042f\u0412\u0418\u0422\u0415\u041b\u0415</th></td></tr><tr><th>\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435/\u0424.\u0418.\u041e. \u0437\u0430\u044f\u0432\u0438\u0442\u0435\u043b\u044f:</th><td>{full_name}</td></tr><tr><th>\u0418\u041d\u041d:</th><td>{inn}</td></tr><tr><th>\u042e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0430\u0434\u0440\u0435\u0441:</th><td>{legal_address}</td></tr><tr><th>\u041f\u043e\u0447\u0442\u043e\u0432\u044b\u0439 \u0430\u0434\u0440\u0435\u0441:</th><td>{postal_address}</td></tr><tr><th>\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u044b\u0439 \u0442\u0435\u043b\u0435\u0444\u043e\u043d:</th><td>{phone}</td></tr><tpl if="values.max_sum_docs && values.max_sum_docs.length!=0"><tr><th>\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u043e\u0431 \u043e\u0434\u043e\u0431\u0440\u0435\u043d\u0438\u0438 \u0441\u0443\u043c\u043c\u044b \u0441\u0434\u0435\u043b\u043a\u0438</th><td><tpl for="max_sum_docs">{#}. {descr} - {name} (\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0413\u041e\u0421\u0422 \u042034.11-94: {hash})<br></tpl></td></tr></tpl>'}
function getApplicSignatureTemplate(a,b){var c='\u0417\u0410\u042f\u0412\u041a\u0410 \u041d\u0410 \u0423\u0427\u0410\u0421\u0422\u0418\u0415 \u0412 \u041f\u0420\u041e\u0426\u0415\u0414\u0423\u0420\u0415\n\n\u0424\u043e\u0440\u043c\u0430 \u0442\u043e\u0440\u0433\u043e\u0432: {procedure_type_vocab}<tpl if="values.procedure.with_prequalification"> c \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435\u043c \u043a\u0432\u0430\u043b\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u043e\u0442\u0431\u043e\u0440\u0430</tpl>\n\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u044b: {title}\n\u0420\u0435\u0435\u0441\u0442\u0440\u043e\u0432\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u044b: {registry_number}\n\u041b\u043e\u0442\n<tpl if="price">\u0426\u0435\u043d\u0430 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u043d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439 \u0446\u0435\u043d\u044b \u043b\u043e\u0442\u0430 {price}<tpl if="price_with_vat"> (\u0446\u0435\u043d\u0430 \u0441 \u041d\u0414\u0421)</tpl>\n</tpl>\n{applic_text}\n<tpl for="parts"><tpl if="partNumber==1">';
2==a&&(c+="\n\n\u041f\u0415\u0420\u0412\u0410\u042f \u0427\u0410\u0421\u0422\u042c \u0417\u0410\u042f\u0412\u041a\u0418\n");c+='<tpl if="values.application_units!=undefined"><tpl for="application_units">\n{#}. {name}, \u0442\u043e\u0440\u0433\u043e\u0432\u0430\u044f \u043c\u0430\u0440\u043a\u0430 {trademark}\n<tpl if="values.simple_parameters>\n\u0425\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438:\n{simple_parameters}\n</tpl><tpl if="values.application_unit_params!=undefined">\n<tpl for="application_unit_params">{#}. {requirement}: {value}\n</tpl></tpl></tpl></tpl>';
1==a&&(c+=cmpdataTpl());3!=a&&b!=Application.models.Procedure.type_ids.public_sale&&(c+='<tpl if="values.application_docs || values.application_docs_other">\n\n\u0414\u041e\u041a\u0423\u041c\u0415\u041d\u0422\u042b, \u041f\u0420\u0418\u041b\u041e\u0416\u0415\u041d\u041d\u042b\u0415 \u041a \u041f\u0415\u0420\u0412\u041e\u0419 \u0427\u0410\u0421\u0422\u0418 \u0417\u0410\u042f\u0412\u041a\u0418\n\n<tpl if="values.application_docs"><tpl for="application_docs">\n{#}. {description} - {name} (\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0413\u041e\u0421\u0422 \u042034.11-94: {hash})\n</tpl></tpl><tpl if="values.application_docs_other"><tpl for="application_docs_other">\n{#}. {descr} - {name} (\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0413\u041e\u0421\u0422 \u042034.11-94: {hash})\n</tpl></tpl></tpl>');
c+='</tpl><tpl elseif="partNumber==2">';c+="\n\u0412\u0422\u041e\u0420\u0410\u042f \u0427\u0410\u0421\u0422\u042c \u0417\u0410\u042f\u0412\u041a\u0418\n"+cmpdataTpl();c+='<tpl if="values.application_docs || values.application_docs_other">\n\n\u0414\u041e\u041a\u0423\u041c\u0415\u041d\u0422\u042b, \u041f\u0420\u0418\u041b\u041e\u0416\u0415\u041d\u041d\u042b\u0415 \u041a\u041e \u0412\u0422\u041e\u0420\u041e\u0419 \u0427\u0410\u0421\u0422\u0418 \u0417\u0410\u042f\u0412\u041a\u0418\n\n<tpl if="values.application_docs"><tpl for="application_docs">\n{#}. {description} - {name} (\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0413\u041e\u0421\u0422 \u042034.11-94: {hash})\n</tpl></tpl><tpl if="values.application_docs_other"><tpl for="application_docs_other">\n{#}. {descr} - {name} (\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0413\u041e\u0421\u0422 \u042034.11-94: {hash})\n</tpl></tpl></tpl>';
c+="</tpl>";c+="</tpl>";return new Ext.XTemplate(c)}
function getApplicDataTemplate(a){var b='<table class="tpltbl"><tr><th>\u0424\u043e\u0440\u043c\u0430 \u0442\u043e\u0440\u0433\u043e\u0432:</th><td> {procedure_type_vocab}<tpl if="values.procedure.with_prequalification"> c \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435\u043c \u043a\u0432\u0430\u043b\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u043e\u0442\u0431\u043e\u0440\u0430</tpl></td></tr><tr><th>\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u044b:</th><td> {title}</td></tr><tr><th>\u0420\u0435\u0435\u0441\u0442\u0440\u043e\u0432\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u044b:</th><td> {registry_number}</td></tr><tr><th>\u041b\u043e\u0442</th><td>&nbsp;</td></tr><tr><th>\u0426\u0435\u043d\u0430 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0432 \u0432\u0430\u043b\u044e\u0442\u0435 \u043d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439 \u0446\u0435\u043d\u044b \u043b\u043e\u0442\u0430:</th><td>{price}<tr><td colspan="2">{applic_text}</td></tr><tpl for="parts"><tpl if="partNumber==1"><tr><th colspan="2">\u041f\u0415\u0420\u0412\u0410\u042f \u0427\u0410\u0421\u0422\u042c \u0417\u0410\u042f\u0412\u041a\u0418</th></tr><tpl if="values.application_units!=undefined"><tr><td colspan="2">\u041f\u0435\u0440\u0435\u0447\u0435\u043d\u044c \u043f\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u043c\u044b\u0445 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u043c\u044b\u0445 \u0440\u0430\u0431\u043e\u0442, \u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u043c\u044b\u0445 \u0443\u0441\u043b\u0443\u0433</td></tr><tr><td colspan="2"><table class="tplsubtbl"><tr><td>\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430/\u0443\u0441\u043b\u0443\u0433\u0438</td><td>\u0422\u043e\u0440\u0433\u043e\u0432\u0430\u044f \u043c\u0430\u0440\u043a\u0430</td><td>\u0426\u0435\u043d\u0430</td><td>\u0425\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438</td></tr><tpl for="application_units">\n<tr><td>{name}</td><td>{trademark}</td><td>{price}</td><td><tpl if="values.application_unit_params!=undefined"><tpl for="application_unit_params">{#}. {requirement}: {value}<br></tpl></tpl></td></tr></tpl></table></td></tr></tpl>';1==
a&&(b+=cmpdataTblTpl());b+='<tpl if="values.application_docs!=undefined"><tr><th colspan="2">\u0414\u041e\u041a\u0423\u041c\u0415\u041d\u0422\u042b, \u041f\u0420\u0418\u041b\u041e\u0416\u0415\u041d\u041d\u042b\u0415 \u041a \u041f\u0415\u0420\u0412\u041e\u0419 \u0427\u0410\u0421\u0422\u0418 \u0417\u0410\u042f\u0412\u041a\u0418</th></tr><tr><td colspan="2"><tpl for="application_docs">{#}. {descr} - <a href="{link}">{name}</a> (\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0413\u041e\u0421\u0422 \u042034.11-94: {hash})<br></tpl><tr><th colspan="2">\u041f\u0420\u041e\u0427\u0418\u0415 \u0414\u041e\u041a\u0423\u041c\u0415\u041d\u0422\u042b</th></tr><tr><td colspan="2"><tpl for="applic_docs_other">{#}. {descr} - <a href="{link}">{name}</a> (\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0413\u041e\u0421\u0422 \u042034.11-94: {hash})<br></tpl></td></tr></tpl></tpl>';
b+='<tpl elseif="partNumber==2">';b+='<tr><th colspan="2">\u0412\u0422\u041e\u0420\u0410\u042f \u0427\u0410\u0421\u0422\u042c \u0417\u0410\u042f\u0412\u041a\u0418</th></tr>'+cmpdataTblTpl();b+='<tpl if="values.application_docs!=undefined"><tr><th colspan="2">\u0414\u041e\u041a\u0423\u041c\u0415\u041d\u0422\u042b, \u041f\u0420\u0418\u041b\u041e\u0416\u0415\u041d\u041d\u042b\u0415 \u041a\u041e \u0412\u0422\u041e\u0420\u041e\u0419 \u0427\u0410\u0421\u0422\u0418 \u0417\u0410\u042f\u0412\u041a\u0418</th></tr><tr><td colspan="2"><tpl for="application_docs">\n{#}. {descr} - <a href="{link}">{name}</a> (\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0413\u041e\u0421\u0422 \u042034.11-94: {hash})<br></tpl></td></tr></tpl><tr><th colspan="2">\u041f\u0420\u041e\u0427\u0418\u0415 \u0414\u041e\u041a\u0423\u041c\u0415\u041d\u0422\u042b</th></tr><tr><td colspan="2"><tpl for="applic_docs_other">{#}. {descr} - <a href="{link}">{name}</a> (\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0413\u041e\u0421\u0422 \u042034.11-94: {hash})<br></tpl></td></tr>';
b+="</tpl>";b+="</tpl></table>";return new Ext.XTemplate(b)}
function getBalanceTemplate(){var a="";isAdmin()&&(a="<tr><th>\u041d\u043e\u043c\u0435\u0440 \u043b\u0438\u0446\u0435\u0432\u043e\u0433\u043e \u0441\u0447\u0435\u0442\u0430:</th><td> {values.account}</td></tr>");return new Ext.XTemplate('<table class="tpltbl"><tr><th>\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u0431\u0430\u043b\u0430\u043d\u0441 \u0441\u0447\u0435\u0442\u0430:</th><td> {[fm.price(values.deposit)]} \u0440\u0443\u0431.</td></tr><tr><th>\u0418\u0437 \u043d\u0438\u0445 \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u043d\u0430 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0443\u0447\u0430\u0441\u0442\u0438\u044f \u0432 \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u0430\u0445:</th><td> {[fm.price(values.deposit_blocked)]} \u0440\u0443\u0431.</td></tr><tr><th>\u0418\u0437 \u043d\u0438\u0445 \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u043d\u0430 \u0432\u043e\u0437\u0432\u0440\u0430\u0442:</th><td> {[fm.price(values.toreturn)]} \u0440\u0443\u0431.</td></tr><tr><th>\u0418\u0437 \u043d\u0438\u0445 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e:</th><td> {[fm.price(values.available_sum)]} \u0440\u0443\u0431.</td></tr>'+a+
"</table>")}
function getBankdataTemplate(){return new Ext.XTemplate('<table class="tpltbl"><tr><th>\u0420\u0430\u0441\u0447\u0435\u0442\u043d\u044b\u0439 \u0441\u0447\u0435\u0442:</th><td> {account}</td></tr><tr><th>\u041a\u043e\u0440\u0440\u0435\u0441\u043f\u043e\u043d\u0434\u0435\u043d\u0442\u0441\u043a\u0438\u0439 \u0441\u0447\u0435\u0442:</th><td> {kor_account}</td></tr><tr><th>\u0411\u0418\u041a:</th><td> {bik}</td></tr><tr><th>\u0418\u041d\u041d:</th><td> {inn}</td></tr><tr><th>\u041a\u041f\u041f:</th><td> {kpp}</td></tr><tr><th>\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0431\u0430\u043d\u043a\u0430:</th><td> {bank}</td></tr><tr><th>\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044f:</th><td> {receiver}</td></tr><tr><th>\u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043b\u0430\u0442\u0435\u0436\u0430:</th><td> {paydest}</td></tr></table>')}
function getBankshortdataTemplate(){return new Ext.XTemplate('<table class="tpltbl"><tr><th>\u0420\u0430\u0441\u0447\u0435\u0442\u043d\u044b\u0439 \u0441\u0447\u0435\u0442:</th><td> {account}</td></tr><tr><th>\u041a\u043e\u0440\u0440\u0435\u0441\u043f\u043e\u043d\u0434\u0435\u043d\u0442\u0441\u043a\u0438\u0439 \u0441\u0447\u0435\u0442:</th><td> {kor_account}</td></tr><tr><th>\u0411\u0418\u041a:</th><td> {bik}</td></tr><tr><th>\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0431\u0430\u043d\u043a\u0430:</th><td> {bank}</td></tr><tr><th>\u0410\u0434\u0440\u0435\u0441 \u0431\u0430\u043d\u043a\u0430:</th><td> {bank_addr}</td></tr></table>')}
function getApplyToReturnText(){return new Ext.XTemplate("\u041f\u0440\u043e\u0448\u0443 \u043e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0438\u0442\u044c \u0432\u043e\u0437\u0432\u0440\u0430\u0442 \u0441\u0440\u0435\u0434\u0441\u0442\u0432 \u0432 \u0440\u0430\u0437\u043c\u0435\u0440\u0435 {sum} \u0440\u0443\u0431. \u043d\u0430 \u0431\u0430\u043d\u043a\u043e\u0432\u0441\u043a\u0438\u0439 \u0441\u0447\u0435\u0442, \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u0432 \u0430\u043a\u043a\u0440\u0435\u0434\u0438\u0442\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0441\u0432\u0435\u0434\u0435\u043d\u0438\u044f\u0445 \u043e\u0431\u043b\u0430\u0434\u0430\u0442\u0435\u043b\u044f \u043b\u0438\u0446\u0435\u0432\u043e\u0433\u043e \u0441\u0447\u0435\u0442\u0430 {account} {full_name} (\u0418\u041d\u041d {inn}).\n")}
function getUserdataTemplate(){return new Ext.XTemplate('<table class="tpltbl"><tr><th>\u0424\u0430\u043c\u0438\u043b\u0438\u044f, \u0438\u043c\u044f \u0438 \u043e\u0442\u0447\u0435\u0441\u0442\u0432\u043e:</th><td> {last_name} {first_name} {middle_name}</td></tr><tr><th>\u0410\u0434\u0440\u0435\u0441 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0447\u0442\u044b:</th><td> {user_email}</td></tr><tr><th>\u0412\u043d\u0435\u0448\u043d\u044f\u044f \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430:</th><td> {user_external_email}</td></tr><tr><th>\u041b\u043e\u0433\u0438\u043d:</th><td> {username}</td></tr><tr><th>\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:</th><td> {user_job}</td></tr><tr><th>\u0422\u0435\u043b\u0435\u0444\u043e\u043d:</th><td> {string_user_phone}</td></tr><tr><th>\u0420\u043e\u043b\u0438 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0435:</th><td> {role_list}</td></tr><tr><th>\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u0441\u0442\u0430\u0442\u0443\u0441:</th><td> {statusname}</td></tr><tr><th>\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438:</th><td> {date_valid_for}</td></tr></table>')}
function getCompanydataTemplate(){return new Ext.XTemplate('<table class="tpltbl"><tr><th>\u041f\u043e\u043b\u043d\u043e\u0435 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 / \u0424.\u0418.\u041e.:</th><td> <tpl if="values.full_name!=undefined">{full_name}</tpl><tpl if="values.full_name==undefined">\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442 \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435</tpl></td></tr><tr><th>\u0418\u041d\u041d:</th><td> {inn}</td></tr><tr><th>\u041a\u041f\u041f:</th><td> <tpl if="values.kpp!=undefined">{kpp}</tpl><tpl if="values.kpp==undefined">\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442 \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435</tpl></td></tr><tr><th>\u041e\u0413\u0420\u041d:</th><td> <tpl if="values.ogrn!=undefined">{ogrn}</tpl><tpl if="values.ogrn==undefined">\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442 \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435</tpl></td></tr><tpl if="values.phone"><tr><th>\u0422\u0435\u043b\u0435\u0444\u043e\u043d:</th><td> {phone}</td></tr></tpl><tpl if="values.fax!=undefined"><tr><th>\u0424\u0430\u043a\u0441:</th><td> {fax}</td></tr></tpl><tpl if="values.email"><tr><th>E-mail:</th><td> {email}</td></tr></tpl><tpl if="values.website && values.website!=\'null\'"><tr><th>Web \u0441\u0430\u0439\u0442:</th><td> {website}</td></tr></tpl><tpl if="values.contact_fio && values.contact_fio!=\'null\'"><tr><th>\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u043e\u0435 \u043b\u0438\u0446\u043e:</th><td> {contact_fio}</td></tr></tpl><tr><th>\u042e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0430\u0434\u0440\u0435\u0441:</th><td> <tpl if="values.legal_address!=\'\'">{legal_address}</tpl><tpl if="values.legal_address==\'\'">\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442 \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435</tpl></td></tr><tr><th>\u041f\u043e\u0447\u0442\u043e\u0432\u044b\u0439 \u0430\u0434\u0440\u0435\u0441:</th><td> <tpl if="values.postal_address!=\'\'">{postal_address}</tpl><tpl if="values.postal_address==\'\'">\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442 \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435</tpl></td></tr></table>')}
function getShortCompanydataTemplate(){return new Ext.XTemplate('<table class="tpltbl"><tr><th>\u041f\u043e\u043b\u043d\u043e\u0435 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438:</th><td> {full_name}</td></tr><tr><th>\u0418\u041d\u041d:</th><td> {inn}</td></tr><tr><th>\u041a\u041f\u041f:</th><td> {kpp}</td></tr><tr><th>\u041e\u0413\u0420\u041d:</th><td> {ogrn}</td></tr></table>')}
function getProceduresStatisticsTemplate(){return new Ext.XTemplate('<table class="stattbl"><tr><th>\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u043d\u044b\u0445 \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440:</th><td>{procedures_active}</td></tr><tr><th>\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u043d\u044b\u0445 \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440:</th><td>{procedures_succeded}</td></tr><tr><th>\u041e\u0431\u0449\u0430\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0437\u0430\u043a\u043b\u044e\u0447\u0430\u0435\u043c\u044b\u0445 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u043e\u0432 (\u0440\u0443\u0431):</td><td>{total_procedures_price}</td></tr><tr><th>% \u0434\u043e\u0441\u0442\u0438\u0433\u043d\u0443\u0442\u043e\u0439 \u044d\u043a\u043e\u043d\u043e\u043c\u0438\u0438:</th><td>{budget_economy}</td></tr><tr><th>\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043d\u0435\u0441\u043e\u0441\u0442\u043e\u044f\u0432\u0448\u0438\u0445\u0441\u044f \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440:</td><td>{procedures_failed}</td></tr></table>')}
function getProceduresCommonStatisticsTemplate(){return new Ext.XTemplate('<table class="stattbl"><tr><th>\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u043e\u0432, \u043f\u043e\u043b\u0443\u0447\u0438\u0432\u0448\u0438\u0445 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044e:</th><td>{total_customes}</td></tr><tr><th>\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0430\u043a\u043a\u0440\u0435\u0434\u0438\u0442\u043e\u0432\u0430\u043d\u043d\u044b\u0445 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432 (\u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u043e\u0432):</th><td>{total_suppliers}</td></tr><tr><th>\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0441\u0440\u0435\u0434\u0441\u0442\u0432 \u043d\u0430 \u0441\u0447\u0435\u0442\u0430\u0445 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432 (\u0440\u0443\u0431):</td><td>{suppliers_deposit}</td></tr><tr><th>\u0421\u0443\u043c\u043c\u0430 \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0445 \u0441\u0440\u0435\u0434\u0441\u0442\u0432 \u043d\u0430 \u0441\u0447\u0435\u0442\u0430\u0445 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432 (\u0440\u0443\u0431):</th><td>{suppliers_deposit_blocked}</td></tr></table>')}
function getTradeOfferTemplate(){return new Ext.XTemplate("\u041f\u043e\u0434\u0430\u0447\u0430 \u0446\u0435\u043d\u043e\u0432\u043e\u0433\u043e \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f\n\u041f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u0430: {procedure}, \u043b\u043e\u0442 {lot}\n\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0435: {price}\n\u0412\u0440\u0435\u043c\u044f: {time}")}
function getProcedureCancelTemplate(){return new Ext.XTemplate("\u041e\u0422\u041a\u0410\u0417 \u041e\u0422 \u041f\u0420\u041e\u0412\u0415\u0414\u0415\u041d\u0418\u042f \u041f\u0420\u041e\u0426\u0415\u0414\u0423\u0420\u042b\n\u041d\u0430\u0441\u0442\u043e\u044f\u0449\u0438\u043c \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0430\u044e \u043e\u0442\u043a\u0430\u0437 \u043e\u0442 \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u044b \u2116 <tpl if='registry_number'>{registry_number}</tpl><tpl if='!registry_number'>{id}</tpl>.\n\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043b\u044f \u043e\u0442\u043a\u0430\u0437\u0430: <tpl if=\"cancel_basis\">{cancel_basis}</tpl><tpl if=\"!cancel_basis\">\u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e</tpl>.\n{date_cancelled}\n{user_fio}\n")}
function getLotCancelTemplate(){return new Ext.XTemplate("\u041e\u0422\u041a\u0410\u0417 \u041e\u0422 \u041f\u0420\u041e\u0412\u0415\u0414\u0415\u041d\u0418\u042f \u041b\u041e\u0422\u0410\n\u041d\u0430\u0441\u0442\u043e\u044f\u0449\u0438\u043c \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0430\u044e \u043e\u0442\u043a\u0430\u0437 \u043e\u0442 \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u043b\u043e\u0442\u0430 \u2116 {lot_number} \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u044b \u2116 <tpl if='registry_number'>{registry_number}</tpl><tpl if='!registry_number'>{id}</tpl>.\n\u041e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043b\u044f \u043e\u0442\u043a\u0430\u0437\u0430: <tpl if=\"cancel_basis\">{cancel_basis}</tpl><tpl if=\"!cancel_basis\">\u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e</tpl>.\n{date_cancelled}\n{user_fio}\n")}
function getProcedureDocumentAddTemplate(){return new Ext.XTemplate("\u041d\u0430\u0441\u0442\u043e\u044f\u0449\u0438\u043c \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0430\u044e \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0443 \u043f\u0440\u043e\u0447\u0438\u0445 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432 \u0432 \u0441\u043e\u0441\u0442\u0430\u0432 \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u043e\u0432 \u043b\u043e\u0442\u0430 \u2116 {lot_number} \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u044b \u2116 <tpl if='registry_number'>{registry_number}</tpl><tpl if='!registry_number'>{id}</tpl>.\n{user_fio}\n\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b:\n")}
function getProcedureOperatorDocumentAddTemplate(){return new Ext.XTemplate("\u041d\u0430\u0441\u0442\u043e\u044f\u0449\u0438\u043c \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0430\u044e \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0443 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432 \u0432 \u0438\u0437\u0432\u0435\u0449\u0435\u043d\u0438\u0435 \u043b\u043e\u0442\u0430 \u2116 {lot_number} \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u044b \u2116 <tpl if='registry_number'>{registry_number}</tpl><tpl if='!registry_number'>{id}</tpl>.\n{user_fio}\n\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b:\n{files_text}")}
function getProcedureDataForIntentionTemplate(){return new Ext.XTemplate("<table class=\"tpltbl\"><tr><th>\u041d\u043e\u043c\u0435\u0440 \u0437\u0430\u043a\u0443\u043f\u043a\u0438:</th><td><tpl if='registry_number'>{registry_number}</tpl><tpl if='!registry_number'>{id}</tpl>, \u043b\u043e\u0442 \u2116{values.lot.number}</td></tr><tr><th>\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u043a\u0443\u043f\u043a\u0438:</th><td>{title}</td></tr><tr><th>\u0421\u043f\u043e\u0441\u043e\u0431 \u0437\u0430\u043a\u0443\u043f\u043a\u0438:</th><td>{procedure_type_vocab}</td></tr><tr><th>\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0442\u043e\u0440:</th><td>{org_full_name}</td></tr><tpl if=\"values.date_end_registration\"><tr><th>\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f \u043f\u043e\u0434\u0430\u0447\u0438 \u0437\u0430\u044f\u0432\u043e\u043a:</th><td>{[fm.localDateText(values.date_end_registration)]}</td></tr></tpl></table>")}
function getSignIntentionTemplate(){return new Ext.XTemplate("\u041d\u043e\u043c\u0435\u0440 \u0437\u0430\u043a\u0443\u043f\u043a\u0438: <tpl if='registry_number'>{registry_number}</tpl><tpl if='!registry_number'>{id}</tpl>, \u043b\u043e\u0442 \u2116{values.lot.number}\n\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u043a\u0443\u043f\u043a\u0438: {title}\n\u0421\u043f\u043e\u0441\u043e\u0431 \u0437\u0430\u043a\u0443\u043f\u043a\u0438: {procedure_type_vocab}\n\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0442\u043e\u0440: {org_full_name}\n\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f \u043f\u043e\u0434\u0430\u0447\u0438 \u0437\u0430\u044f\u0432\u043e\u043a: {[fm.localDateText(values.date_end_registration)]}\n")}
function getIntentionViewTemplate(){return new Ext.XTemplate("<table class=\"tpltbl\"><tr><th>\u041d\u043e\u043c\u0435\u0440 \u0437\u0430\u043a\u0443\u043f\u043a\u0438:</th><td><tpl if='registry_number'>{registry_number}</tpl><tpl if='!registry_number'>{id}</tpl>, \u043b\u043e\u0442 \u2116{values.lot.number}</td></tr><tr><th>\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u043a\u0443\u043f\u043a\u0438:</th><td>{title}</td></tr></table>")};Ext.ux.ContractsList=Ext.extend(Ext.form.FieldSet,{filesFilter:{},extraFiles:[],buttonAlign:"center",frame:!1,border:!1,style:"margin: 0px; padding: 0px",initComponent:function(){var a=this;this.files=this.files||[];var b=[],c=!0!==a.hide_date_added_col?3:2;a.hide_last_version_col&&--c;var d=function(d){d.text||!0===a.hide_last_version_col||b.push({html:d.is_last_version?"<b>\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u044f\u044f \u0432\u0435\u0440\u0441\u0438\u044f</b>":"\u041d\u0435\u0430\u043a\u0442\u0443\u0430\u043b\u0435\u043d",
cellCls:"width_150px"});b.push({html:getFileInfoHtml(d,!1),colspan:d.text?c:void 0});d.text||!0===a.hide_date_added_col||b.push({html:d.date_added?"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d: "+Ext.util.Format.localDateRenderer(parseDate(d.date_added)):"",cellCls:"width_220px"})};Ext.each(this.extraFiles,d);Ext.each(this.files,function(b){var c=["type_id","supplier_id","customer_id"],e,f;for(f=0;f<c.length;f++)if(e=c[f],void 0!==a.filesFilter[e]&&b[e]!=a.filesFilter[e])return;d(b)});0==b.length&&
(b=[{colspan:c,cls:"normal-text",style:"font-size: 12px",html:"\u0424\u0430\u0439\u043b\u044b \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442"}]);if(this.items)for(var e=0;e<this.items.length;e++){var f=this.items[e];f.colspan=c;b.push(f)}Ext.apply(this,{layout:"table",autoHeight:!0,layoutConfig:{columns:c},defaults:{autoHeight:!0,border:!1,frame:!1,style:"margin-top: 5px; margin-bottom: 5px;",cellCls:"bottom-valign"},items:b});Ext.ux.ContractsList.superclass.initComponent.call(this)}});
Ext.reg("ux.contractlist",Ext.ux.ContractsList);var Debug={level:3,LEVEL_EMERGENCY:0,LEVEL_ALERT:1,LEVEL_CRITICAL:2,LEVEL_ERROR:3,LEVEL_WARNING:4,LEVEL_NOTICE:5,LEVEL_INFO:6,LEVEL_DEBUG:7,LEVEL_DUMP:9,log:function(a,b){this._log(a,b,"log")},dir:function(a,b){this._log(a,b,"dir")},_log:function(a,b,c){void 0===b&&(b=this.LEVEL_DUMP);if(!(this.level<b))if(window.console&&window.console[c])window.console[c](a);else if(window.Ext&&Ext.debug&&(b={log:"log",dir:"dump"},b[c]&&(c=b[c]),Ext[c]))Ext[c](a)}};var REQUIRED_FIELD='&nbsp;<span style="color: red; white-space:nowrap; font-weight:bold;" ext:qtip="\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f">*</span>',IMAGE_LOADING="/css/images/default/grid/loading.gif",WAITING='<img src="'+IMAGE_LOADING+'" />',POST_VAR_PROCEDURE_ID="procedure_id",POST_VAR_LOT_ID="lot_id",ACCEPTED_FILES="\u041f\u0440\u0438\u043d\u0438\u043c\u0430\u044e\u0442\u0441\u044f \u0444\u0430\u0439\u043b\u044b \u0432 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445 \u0444\u043e\u0440\u043c\u0430\u0442\u0430\u0445: {upload_file_types}",
PIC_ACCEPTED_FORMATS=".jpg, .gif, .png, .jpeg",MAX_UPLOAD_SIZE=10485760,PIC_UPLOAD_SIZE=3145728,LOADING_TEXT="\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445...",DICT_VAL_NOR_FOUND='\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 "%s" \u043d\u0435 \u0437\u0430\u0439\u0434\u0435\u043d\u043e \u0432 \u0441\u043b\u043e\u0432\u0430\u0440\u0435...',DEFAULT_LABEL_WIDTH=300,USER_PROFILE_WITH_EDS=1,USER_PROFILE_WITHOUT_EDS=2,USER_STATUS_NOT_CONFIRMED=1,USER_STATUS_NOT_AUTHORIZED=
2,USER_STATUS_AUTHORIZED=3,USER_STATUS_BLOCKED=4,USER_STATUS_DECLINED=5,USER_STATUS_DELETED=6,STATUS_ADDED=1,STATUS_ACCEPTED=3,TYPE_USER=1,TYPE_OPERATOR=2,TYPE_EXPERT=3,SUPPLIER_TYPE_UR_RF=1,SUPPLIER_TYPE_UR_FOREIGN=4,SUPPLIER_TYPE_IP_RF=3,SUPPLIER_TYPE_IP_FOREIGN=5,SUPPLIER_TYPE_FIZ_RF=2,SUPPLIER_TYPE_FIZ_FOREIGN=6,CUSTOMER_TYPE_CUST=1,CUSTOMER_TYPE_ORG=2,APPLIC_DOC_REQUIRED=1,APPLIC_DOC_OTHER=2,APPLIC_DOC_MAXSUM=3,STAGE_REVIEW=1,STAGE_RESULT=2,STAGE_OPEN=5,STAGE_QUALIFICATION=6,REQUEST_STATUS_EDIT_IZ=
5,REQUEST_EDIT_RIZ=6,REQUEST_EDIT_GD=7,REQUEST_EDIT_OOZ=8,NO_MAGIC_NUMBER_LAST_HOUR=23,NO_MAGIC_NUMBER_LAST_MINUTE=59,NO_MAGIC_NUMBER_LAST_SECOND=59,ETP_GRID_ROWS_LIMIT=50,APPLICATION_STATUS_ADDED=0,APPLICATION_STATUS_PUBLISHED=1,APPLICATION_STATUS_CANCELLED=2,APPLICATION_STATUS_PROCESSED=3,APPLICATION_STATUS_DECLINED=4,APPLICATION_STATUS_FAILED=5,APPLICATION_STATUS_OLD=6,PROCEDURE_TYPE_AUC_ASC=1,PROCEDURE_TYPE_AUC_DESC=2,PROCEDURE_TYPE_TENDER=3,PROCEDURE_TYPE_PRICELIST_REQ=5,PROCEDURE_TYPE_QUOTATION_REQ=
4,PROCEDURE_TYPE_QUALIFICATION=6,PROCEDURE_TYPE_PERETORG_REDUC=7,PROCEDURE_TYPE_PERETORG_TENDER=8,PROCEDURE_TYPE_SMALL_PURCHASE=9,PROCEDURE_TYPE_PAPER_SINGLE_SUPPLIER=10,PROCEDURE_TYPE_PAPER_AUC_ASC=11,PROCEDURE_TYPE_PAPER_AUC_DESC=12,PROCEDURE_TYPE_PAPER_TENDER=13,PROCEDURE_TYPE_PAPER_QUOTATION_REQ=14,PROCEDURE_TYPE_PAPER_PRICELIST_REQ=15,PROCEDURE_TYPE_PAPER_LIMITED_TENDER=30,PROCEDURE_TYPE_PAPER_TWOSTEP_TENDER=31,PROCEDURE_TYPE_AUC_ASC_26=20,PROCEDURE_TYPE_PUBLIC_SALE=21,PROCEDURE_TYPE_COMPETITIVE_SELECTION=
32,PROCEDURE_TYPE_PAPER_COMPETITIVE_SELECTION=33,PROCEDURE_TYPE_PREQUALIFY_SELECTION=34,PROCEDURE_TYPE_PAPER_PREQUALIFY_SELECTION=35,DEPARTMENT_ROLE_HEAD=1,DEPARTMENT_ROLE_SPECIALIST=2,DEPARTMENT_ROLE_EXPERT=3,DEPARTMENT_ROLE_OTO=4,COORDINATION_STATUS_COORDINATION=1,COORDINATION_STATUS_RESOLVED=2,COORDINATION_STATUS_DECLINED=3,LOT_STEP_APPLIC_OPENED="new",LOT_STEP_APPLIC_EDIT="edit",LOT_STEP_APPLIC_OPENED="applic_opened",LOT_STEP_FIRST_PARTS="first_parts",LOT_STEP_TRADE="trade",LOT_STEP_SECOND_PARTS=
"second_parts",LOT_STEP_EVALUATION="evaluation",LOT_STEP_SELECTION="selection",LOT_STEP_PERETORG_REDUC="peretorg_reduc",LOT_STEP_PERETORG_TENDER="peretorg_contest",LOT_STEP_QUALIFICATION="qualification",LOT_STEP_PREQUALIFICATION="prequalification",LOT_STEP_POSTQUALIFICATION="postqualification",LOT_STEP_CORRECTION="correction",LOT_STEP_PROCEDURE_CORRECTION="procedure_correction",LOT_STEP_REGISTRATION="registration",LOT_STEP_QUAL_REGISTRATION="qual_registration",AUCTION_FEE=3E3,HUNDRED_PERCENTS=100,
ONE_KOPECK=0.01,MAX_PRICE=999999999999,VOCAB_DOC_TYPE_EP9_DOC_ID=25;function gettime(){var a=new Date;return lz(a.getDate())+"."+lz(a.getMonth()+1)+"."+a.getFullYear()+" "+lz(a.getHours()+a.getTimezoneOffset()/60+3)+":"+lz(a.getMinutes())+":"+lz(a.getSeconds())}function href_to(a){"/"==a.charAt(0)&&(a=a.substr(1));""==a&&(a="/");return"#"+a.replace(/"/g,"&quot;")}
function link_to(a,b,c){void 0==b&&(b=a);var d=[];if(c){if(c.attrs)for(var e in c.attrs)c.attrs.hasOwnProperty(e)&&d.push(e+'="'+c.attrs[e].toString().replace(/"/g,"&quot;")+'"');c.tip&&d.push('ext:qtip="'+c.tip.replace(/"/g,"&quot;")+'"')}return'<a href="'+href_to(a)+'"'+(d.length?" "+d.join(" "):"")+">"+b+"</a>"}function redirect_to(a,b){Main.app?(b&&Ext.Msg.hide(),Main.app.redirect(a)):document.location.href=href_to(a)}
String.prototype.escapeHtml||(String.prototype.escapeHtml=function(){return Ext?Ext.util.Format.htmlEncode(this):this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")});String.prototype.escapeUrl||(String.prototype.escapeUrl=function(){return this.encodeURI?this.encodeURI():escape(this)});String.prototype.toString||(String.prototype.toString=function(){return this});
Array.prototype.unique||(Array.prototype.unique=function(){for(var a=[],b=this.length,c=0;c<b;c++){for(var d=c+1;d<b;d++)this[c]===this[d]&&(d=++c);a.push(this[c])}return a});function lz(a){return 1==a.toString().length?"0"+a:a}function formatDate(a){"string"==typeof a&&(a=new Date(a));return a.getFullYear()+"-"+lz(a.getMonth()+1)+"-"+lz(a.getDate())+" "+lz(a.getHours())+":"+lz(a.getMinutes())+":"+lz(a.getSeconds())}
function formatTime(a){"string"==typeof a&&(a=new Date(a));return lz(a.getHours())+":"+lz(a.getMinutes())+":"+lz(a.getSeconds())}Ext.ux.cbGetState=function(){return{checked:this.getValue()}};Ext.ux.cbSetState=function(a){this.setValue(a.checked)};function humanizePrice(a){a=new NumberFormat(a);a.setSeparators(!0," ",",");a.setPlaces(2);return a.toFormatted()}function humanizeNumber(a){a=new NumberFormat(a);a.setSeparators(!0," ",",");a.setPlaces(-1);return a.toFormatted()}
function openLink(a){window.open(a);return!1}function externalLinkTo(a,b){b||(b="link");b=b.toString().escapeHtml();return'<a href="'+a+'" title="\u0421\u0441\u044b\u043b\u043a\u0430 \u043e\u0442\u043a\u0440\u043e\u0435\u0442\u0441\u044f \u0432 \u043d\u043e\u0432\u043e\u043c \u043e\u043a\u043d\u0435" onclick="return openLink(\''+a+"');\">"+b+"</a>"}Ext.ux.SimpleTreeLoader=Ext.extend(Ext.util.Observable,{load:function(a,b,c){if(!a)return!1;a.getOwnerTree().load(a,b,c);return!0}});
function getCurrentView(){return Main.app.viewport.getComponent(0)}
function echoResponseMessage(a){a||(a={});if("server"!=a.failureType||!Ext.MessageBox.isVisible()){"function"==typeof a.success&&(a=a.result||{});var b=a.success?"\u0423\u0441\u043f\u0435\u0448\u043d\u043e":"\u041e\u0448\u0438\u0431\u043a\u0430",c=a.message||a.msg;c||(c=a.success?"\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b \u0438 \u0441\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e":"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430");
Ext.MessageBox.alert(t(b),t(c))}}function setComboValue(a,b,c){var d=null,d=a.store;d.load({callback:function(){a.setValue(b)},params:{query:b,queryfield:c}});return!0}function defaultValue(a,b){return void 0==a||null==a?b:a}function checkSum(a,b,c,d){c=defaultValue(c,11);d=defaultValue(d,10);var e=0,f;for(f=0;f<a.length;f+=1)b.length>f&&(e+=parseInt(a.charAt(f),10)*b[f]);return e=e%c%d}
function checkSumINN(a){switch(a.length){case 10:return""+checkSum(a,[2,4,10,3,5,9,4,6,8,0]);case 12:return""+checkSum(a,[7,2,4,10,3,5,9,4,6,8,0])+checkSum(a,[3,7,2,4,10,3,5,9,4,6,8,0])}return!1}
function performRPCCall(a,b,c,d){var e={};b=b||[{}];e.enable=!0;e.shown=!1;e.params=c||{};if(!a)throw"Internal error: no method specified";e.params.mask&&(e.params.mask_el=e.params.mask_el||Ext.getBody(),e.params.wait_delay=e.params.wait_delay||0);e.params.scope=e.params.scope||window;e.params.wait_text=e.params.wait_text||"\u0412\u0430\u0448\u0430 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f";Ext.apply(e,{show:function(){!this.enable||
this.params.wait_disable||Ext.Msg.isVisible()?this.shown=!1:(this.params.mask?this.params.mask_el.mask(this.params.wait_text,this.params.mask_class||"x-mask-loading"):Ext.MessageBox.show({title:this.params.wait_title||"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435",msg:this.params.wait_text,width:this.params.wait_width||400,wait:!0,icon:this.params.wait_icon||Ext.MessageBox.INFO}),this.shown=!0)},hide:function(){this.enable=!1;
this.shown&&(this.params.mask?this.params.mask_el.unmask():Ext.MessageBox.hide())},handler:function(a,b){var c=!a||!b;this.enable=!1;!this.params.mask&&c||this.hide();Main&&Main.app&&Main.app.un("rpcerror",this.clean);if(!c||this.params.exception_call)this.params.handle_failure&&a&&!1===a.success?echoResponseMessage(a):this.params.monitor_valid&&(this.params.monitor_valid.isDestroyed||this.params.monitor_valid.destroying)||d.call(this.params.scope,a,b)},clean:function(a){Main&&Main.app&&Main.app.un("rpcerror",
e.clean);e.params.mask||(this.shown=!1);e.hide();a&&e.params.exception_call&&!a.action&&!a.method&&e.handler(null,a)},rpccall:function(){0===this.params.wait_delay?this.show():this.show.defer(this.params.wait_delay||500,this);b.push(this.handler.createDelegate(this));if(Main&&Main.app)Main.app.on("rpcerror",this.clean);a.apply(window,b)}});e.params.confirm?Ext.MessageBox.confirm(e.params.confirm_title||"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435",e.params.confirm,
function(a){"yes"==a&&e.rpccall()}):e.rpccall()}
function performAjaxRPCCall(a,b,c,d){var e={enable:!0,shown:!1};e.params=c||{};e.fn=function(){!this.enable||this.params.wait_disable?this.shown=!1:(Ext.MessageBox.show({title:this.params.wait_title||"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435",msg:this.params.wait_text||"\u0412\u0430\u0448\u0430 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u043e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043b\u044f\u0435\u0442\u0441\u044f",width:this.params.wait_width||
400,wait:!0,icon:this.params.wait_icon||Ext.MessageBox.INFO}),this.shown=!0)};e.hide=function(){this.enable=!1;this.shown&&Ext.MessageBox.hide()};e.errortext=function(a,b){var c;c=new Date;c=" \u0415\u0441\u043b\u0438 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u0435\u0442\u0441\u044f, \u0441\u043e\u043e\u0431\u0449\u0438\u0442\u0435 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430\u043c, \u0443\u043a\u0430\u0437\u0430\u0432 \u043f\u043e\u043b\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442 \u043e\u0448\u0438\u0431\u043a\u0438, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0435\u043c\u044b\u0439 \u043f\u043e \u043d\u0430\u0436\u0430\u0442\u0438\u044e \u043d\u0430 \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0438\u0436\u0435.</div>"+
("<div>["+formatDate(c)+"] "+b.url+"</div>");c+='<div id="server_response_link"><a href="javascript:;" onclick="$(\'#server_response_link\').hide();$(\'#server_response_text\').show();">\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043e\u0442\u0432\u0435\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0430</a></div>';return c+='<div id="server_response_text" style="display:none; background-color: white; border: 1px solid black; padding: 5px; margin: 5px 5px 0 5px;">'+(a.responseText||"<i>[empty]</i>")+
"</div>"};e.parseresult=function(a,b){this.hide();try{return Ext.decode(a.responseText)}catch(c){var d;d="<div>\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043e\u0442\u0432\u0435\u0442\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043d\u0430\u043b\u0438\u0447\u0438\u0435 \u0438 \u0440\u0430\u0431\u043e\u0442\u043e\u0441\u043f\u043e\u0441\u043e\u0431\u043d\u043e\u0441\u0442\u044c \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0441 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u043e\u043c, \u043f\u0435\u0440\u0435\u0434 \u043f\u043e\u0432\u0442\u043e\u0440\u043e\u043c \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 F5 \u0434\u043b\u044f \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b.</div>"+
this.errortext(a,b);Ext.MessageBox.alert("\u041e\u0448\u0438\u0431\u043a\u0430",d);return!1}};var f=function(){var c=void 0;0===e.params.wait_delay?e.fn():e.fn.defer(e.params.wait_delay||500,e);e.params.download&&(c={tag:"form",style:"visibility: hidden; display:none;"},c=Ext.DomHelper.append(Ext.getBody(),c),e.enable=!1);var f={url:a,method:"POST",params:b,isUpload:e.params.download,form:c,success:function(a,b){e.params.download&&(c=new Ext.Element(c),c.remove());var f=e.parseresult(a,b);e.params.handle_failure&&
f&&!f.success&&(d=echoResponseMessage);d&&(f||e.params.call_on_fail)&&d(f)},failure:function(a,b){var c=e.parseresult(a,b);c&&c.msg?failureHandler(null,{result:c}):!1!==c&&Ext.MessageBox.alert("\u041e\u0448\u0438\u0431\u043a\u0430","\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043d\u0430\u043b\u0438\u0447\u0438\u0435 \u0438 \u0440\u0430\u0431\u043e\u0442\u043e\u0441\u043f\u043e\u0441\u043e\u0431\u043d\u043e\u0441\u0442\u044c \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0441 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u043e\u043c. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044e, \u043f\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u0438\u0432 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u043d\u0430\u0436\u0430\u0432 F5");
d&&e.params.call_on_fail&&d(c)}};e.params.timeout&&(f.timeout=e.params.timeout);Ext.Ajax.request(f)};e.params.confirm?Ext.MessageBox.confirm(e.params.confirm_title||"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435",e.params.confirm,function(a){if("yes"!=a)return!1;f()}):f()}
function storeExceptionHandler(a,b,c,d,e){var f;c||(c={});try{f=e&&e.result?e.result:c.result||Ext.decode(c.responseText||"{}"),f=f.message||f.msg||f.exception||"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430"}catch(g){f=c.responseText||"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430"}Ext.Msg.alert("\u041e\u0448\u0438\u0431\u043a\u0430",f)}
function updateServerTimeOffset(a,b){if(void 0!==a&&b){var c=new Date,d=6E4*-c.getTimezoneOffset(),c=c.getTime();Main.server_time_offset=c-b+d-a;Main.server_tz=a;Main.server_time_offset_last_sync=c;Main&&Main.app&&3E5<Math.abs(c-b)&&Main.app.fireEvent("timeoffsetwarn",Math.abs(c-b))}}
function deleteAccreditationFile(a,b,c){Ext.Msg.confirm("\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435","\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0444\u0430\u0439\u043b?",function(d){"yes"==d&&RPC.File.deleteAccreditationFile(a,b,function(a){a.success?Ext.get(c).remove():Ext.Msg.alert("\u041e\u0448\u0438\u0431\u043a\u0430",a.msg)})})}
function renderPagingToolbar(a,b,c,d,e){e&&Main.config.show_timezone&&(d.push("-"),d.push({xtype:"tbtext",cls:"highlight-title",text:"<b>\u0412\u0440\u0435\u043c\u044f \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0435\u0442\u0441\u044f \u043f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e\u043c\u0443 \u0447\u0430\u0441\u043e\u0432\u043e\u043c\u0443 \u043f\u043e\u044f\u0441\u0443: "+getLocalTimezone(!0)+"</b>"}));return{xtype:"pagingtoolbar",pageSize:c||
25,store:b,displayInfo:!0,displayMsg:a+" {0} - {1} \u0438\u0437 {2}",emptyMsg:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0443\u0441\u0442",afterPageText:"\u0438\u0437 {0}",beforePageText:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430",items:d}}
function renderStoreDownloadButton(a,b,c,d,e,f){c=c||500;d=d||!1;e=e||{};var g=Ext.isDefined(e.params)?e.params:{},k={xtype:"button",tooltip:Ext.isDefined(e.tooltip)?e.tooltip:"\u0421\u043a\u0430\u0447\u0430\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0443\u044e \u0432\u044b\u0431\u043e\u0440\u043a\u0443 \u043a\u0430\u043a \u0442\u0430\u0431\u043b\u0438\u0446\u0443 Excel.<br/>\n\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0431\u0443\u0434\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u043f\u0435\u0440\u0432\u044b\u0435 "+c+
" \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u0432\u044b\u0431\u043e\u0440\u043a\u0438 \u0441 \u0442\u0435\u043a\u0443\u0449\u0438\u043c\u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438.",text:"",handler:function(){Ext.apply(g,a.baseParams);Ext.apply(g,{format:"excel",start:0,limit:c});var e=a.getSortState();Ext.isDefined(e)&&Ext.apply(g,{sort:e.field,dir:e.direction});e={download:!0,wait_disable:!0};
Ext.isFunction(f)&&(g=f(g));d&&getConfigValue("xls")&&100<a.getTotalCount()&&Ext.apply(e,{confirm:String.format("\u0412\u044b\u0433\u0440\u0443\u0437\u043a\u0430 \u043c\u043e\u0436\u0435\u0442 \u0437\u0430\u043d\u044f\u0442\u044c \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f. \u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u044b\u0433\u0440\u0443\u0437\u0438\u0442\u044c {0} \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440?",
a.getTotalCount())});a.getTotalCount()>=Main.config.count_excel_report_restriction?Ext.Msg.alert("\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435","\u041f\u043e\u043f\u044b\u0442\u043a\u0430 \u0432\u044b\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0431\u043e\u043b\u0435\u0435 "+Main.config.count_excel_report_restriction+" \u0437\u0430\u043f\u0438\u0441\u0435\u0439. \u0412\u044b\u0433\u0440\u0443\u0437\u043a\u0430 \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u0430. \u0423\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u044b\u0433\u0440\u0443\u0436\u0430\u0435\u043c\u044b\u0445 \u0437\u0430\u043f\u0438\u0441\u0435\u0439 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0432 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u044b."):
performAjaxRPCCall(b,g,e,echoResponseMessage)}};Ext.apply(k,e);Ext.isEmpty(k.iconCls)&&Ext.isEmpty(k.icon)&&Ext.apply(k,{iconCls:"icon-silk-disk"});return k}function getConfigValue(a,b){var c=a.split(/\->/i),d=Main.config,e=!0;Ext.each(c,function(a){if(!Ext.isDefined(d[a]))return e=!1;d=getObjectValue(d,a)});return e?d:b||!1}function rejectStoreChanges(a){a.rejectChanges();a.each(function(b){b.phantom&&a.remove(b)})}
function checkMandate(a,b){for(var c=a.toLowerCase()+"/",d=0;d<b.length;d++)if(b[d].url&&0<=c.indexOf(b[d].url.toLowerCase()+"/"))return!0;return!1}
function buildUserMenuBar(a,b,c){function d(a,b){for(var c=0;c<a.length;c++)if(a[c].text==b)return c;return-1}function e(a){for(var b=0;b<a.length;b++)a[b].menu&&(e(a[b].menu.items),!1===a[b].weight&&(a[b].weight=a[b].menu.items[0].weight));a.sort(function(a,b){return a.weight-b.weight})}function f(a){for(var b=0;b<a.length;b++)a[b].menu&&(f(a[b].menu.items),0==a[b].menu.items.length&&(a.splice(b,1),b--))}c||(c={});var g=[],k,h,l,q,s;for(k=0;k<b.length;k++){if(!(b[k].id in c)){if(!b[k].menupath)continue;
if(b[k].url&&""!=b[k].url&&!checkMandate(b[k].url,a)&&"-"!=b[k].menupath)continue}else if(!1==c[b[k].id].mode)continue;l=b[k].menupath.split("/");q=g;if("-"==b[k].menupath)q.push({xtype:"tbseparator",weight:b[k].weight});else{for(h=0;h<l.length-1;h++)s=d(q,l[h]),0>s&&(q.push({text:l[h],weight:!1,menu:{xtype:"menu",items:[]}}),s=q.length-1),q[s].menu||(q[s].menu={xtype:"menu",items:[]}),q=q[s].menu.items;s=d(q,l[h]);h={text:l[h]};b[k].icon&&(h.icon=b[k].icon);b[k].weight&&(h.weight=b[k].weight);b[k].url?
("auth/logout"==b[k].url?h.handler=function(a){return function(){a&&Ext.Msg.show({title:"\u0412\u044b\u0445\u043e\u0434",msg:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u0443 \u0432 \u0410\u0421\u0423\u0417\u0414?",buttons:Ext.Msg.YESNO,icon:Ext.MessageBox.QUESTION,fn:function(b){switch(b){case "yes":redirect_to(a)}}})}}(b[k].url):1>=l.length&&
(h.handler=function(a){return function(){redirect_to(a)}}(b[k].url)),h.href="#"+b[k].url):(h.menu={xtype:"menu",items:[]},0<=s&&(h.menu.items=q[s].menu.items));0>s?q.push(h):Ext.apply(q[s],h)}}f(g);e(g);1<g.length&&(q=g.pop(),g.push("->"),g.push(q));return new Ext.Toolbar({xtype:"toolbar",cls:"user-menu-bar",autoHeight:!0,width:"auto",items:g})}function merge_options(a,b){var c={},d;for(d in a)c[d]=a[d];for(d in b)c[d]=b[d];return c}
function loadFilesIntoFilePanels(a,b,c){if(null!=a)for(var d=0,e=null,d="",f=0;f<a.length;++f){var d=a[f].req_id,e=a[f].html.length?a[f].html:[],g=Ext.getCmp("files_uploaded_"+(d||""));if(g){for(var k=0;k<e.length;++k)d=getFileInfoPanel(e[k],b,c),g.add(d);g.doLayout()}}}
function performSave(a,b,c,d,e){void 0===d&&(d=!1);void 0===e&&(e=!0);a.getForm().submit({waitMsg:"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435",success:function(f,g){e&&echoResponseMessage(g);c&&(d?a.fireEvent(c,g):a.fireEvent(c,a));null!=b&&void 0!==b&&redirect_to(b)},failure:function(a,b){echoResponseMessage(b)}})}function createSimpleRedirectButton(a,b){return{xtype:"button",text:a,handler:function(){redirect_to(b)}}}
function collectComponentValues(a,b,c){var d,e,f=!1;if(!a.disabled){if(!c&&a.name&&(a.getValues?d="getValues":a.getValue&&(d="getValue"),d)){c=a[d]();if(void 0===c)return;c&&c.getRawValue&&Ext.isFunction(c.getRawValue)&&(c=c.getRawValue());e=a.name;e.match(/\[\]$/)?(f=!0,e=e.replace(/\[\]$/,""),b[e]||(b[e]=[])):void 0!==b[e]&&(Ext.isArray(b[e])||(b[e]=[b[e]]),f=!0);f?b[e].push(c):b[e]=c}!d&&a.items&&a.items.each&&a.items.each(function(a){collectComponentValues(a,b)})}}
function getFieldValue(a){return(a=Ext.getCmp(a))?a.getValue():null}function setFieldValue(a,b){var c=Ext.getCmp(a);c&&c.setValue(b)}function setComponentValues(a,b,c){var d=void 0!=a.name?a.name.replace(/\[\]/,""):void 0;!c&&d&&void 0!==b[d]&&"null"!=b[d]&&(a.setValue||a.setValues)?a.setValues?a.setValues(b[d]):a.setValue&&(a.setValue(b[d]),a.fireEvent("valueFilled",b[d]),a.fireEvent("change")):a.items&&a.items.each&&a.items.each(function(a){setComponentValues(a,b)})}
function autoSetValue(a){a.value&&(a.setValues?a.setValues(a.value):a.setValue?a.setValue(a.value):setComponentValues(a,a.value,!0),delete a.value)}function getLocalTimezone(a){return"GMT&nbsp;"+(new Date).format("P")}
function getFileInfoHtml(a,b){if(!a)return"";Ext.isEmpty(b)&&(b=!0);var c=void 0!==a.description?a.description:"",d=void 0!==a.name?a.name:"",c=(a.link?'<a href="'+a.link+'" target="_blank">':"")+((void 0!==a.descr?a.descr:"")||c||d).escapeHtml()+(a.link?"</a>":"")+(void 0!==a.size&&0!=a.size?", \u0440\u0430\u0437\u043c\u0435\u0440 "+Ext.util.Format.humanizeSize(a.size):"")+(void 0!==a.hash&&b?", \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0413\u041e\u0421\u0422 \u042034.11-94:  "+
a.hash:"")+(void 0!==a.date_added||void 0!==a.date?", \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d "+Ext.util.Format.localDateRenderer(a.date_added||a.date):"");a.obsolete?c='<span class="not-actual">'+c+" ("+(a.obsolete_text||"\u043d\u0435\u0430\u043a\u0442\u0443\u0430\u043b\u0435\u043d")+")</span>":a.oos_publish_link&&(c+="&nbsp;&nbsp;"+a.oos_publish_link);return c}
function getFileInfoPanel(a,b,c){c={border:!1,cls:"spaced-bottom-shallow",file:a,html:getFileInfoHtml(a,c)};b=b||{};var d=null;a&&a.deleteHandler&&!b.deleteHandler&&(d=a.deleteHandler);if(void 0!==a.descr&&(b.deleteHandler||d)){var e=Ext.id();c.html+='&nbsp;<a href="javascript:;"><img src="'+(b.deleteIcon||"/ico/garbage.png")+'" ext:qtip="'+(b.deleteText||"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0444\u0430\u0439\u043b")+'" id="'+e+'"/></a>';c.listeners={afterrender:function(a){Ext.get(e).on("click",
function(){Ext.Msg.confirm("\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435","\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0444\u0430\u0439\u043b \u00ab"+a.file.name.escapeHtml()+"\u00bb?",function(c){"yes"==c&&(d?d(a.file,a):b.deleteHandler(a.file,a))})})}}}return c}function addEvents(a,b){for(var c=0;c<b.length;c++)a.addEvents(b[c])}
function getViewEl(){return Main&&Main.layout&&Main.layout.center_panel?Main.layout.center_panel.getEl():Ext.getBody()}function parseDate(a,b){var c;if(Ext.isDate(a))return a;b||(b=["c","Y-m-d H:i:sp","Y-m-d H:i:s.u","Y-m-d H:i:s.up","Y-m-d H:i:s"]);Ext.isArray(b)||(b=[b]);for(var d=0;d<b.length;d++)if(b[d].match(/p$/)?(c=b[d].substr(0,b[d].length-1)+"O",c=Date.parseDate(a+"00",c)):c=Date.parseDate(a,b[d]),c)return c;return null}
function substr_count(a,b){var c=0,d;if(""==b)return null;for(;0<=(d=a.indexOf(b));)a=a.substr(d+b.length),c++;return c}function parsePrice(a){if(Ext.isNumber(a))return a;if(!Ext.isString(a))return!1;a=a.replace(/[ ']+/g,"");if(0<=a.indexOf(",")&&0<=a.indexOf(".")){a=a.replace(/,/g,".");var b=a.lastIndexOf(".");0<=b&&(a=a.substr(0,b).replace(/\./g,"")+a.substr(b))}1==substr_count(a,",")&&(a=a.replace(",","."));return 0>a.search(/^([+-])?[0-9]+(\.[0-9]+)?([eE][+-][0-9]+)?$/)?!1:Number(a)}
function number_format(a,b){if("number"!==typeof a&&(a=parseFloat(a),isNaN(a)))return a;var c={before:"",after:"",decimals:null,dec_point:",",thousands_sep:" "};if(b&&"object"===typeof b){var d=b,e={},f;for(f in c)e[f]="undefined"!==typeof d[f]?d[f]:c[f];c=e}b=c;c=a.toString();null!==b.decimals&&(c=a.toFixed(b.decimals));c=c.split(".");d=c[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+b.thousands_sep);2===c.length&&(d=d+b.dec_point+c[1]);return b.before+d+b.after}function now(){return new Date}
function getServerTime(){if(void 0===Main.server_time_offset)return null;var a=new Date;a.setTime(a.getTime()-Main.server_time_offset);var b=Math.round(Math.abs(Main.server_tz)/1E3),c=(0<=Main.server_tz?"+":"-")+lz(Math.floor(b/3600))+":",c=c+lz(Math.floor(b%3600/60));return Date.parseDate(a.format("Y-m-d\\TH:i:s")+c,"c")}function isSupplier(){return Main.contragent&&Main.contragent.supplier_accreditations&&Main.contragent.supplier_accreditations.length}
function isSupplierAccred(){return Main.contragent&&Main.contragent.supplier_accreditations&&Main.contragent.supplier_accreditations.length&&3==Main.contragent.supplier_accreditations[0].status}function isCustomer(){return Main.contragent&&Main.contragent.customer_accreditations&&Main.contragent.customer_accreditations.length}function isExpert(){return Main&&Main.contragent&&Main.contragent.is_expert}
function isCustomerAccred(){return Main.contragent&&Main.contragent.customer_accreditations&&Main.contragent.customer_accreditations.length&&3==Main.contragent.customer_accreditations[0].status}function isCustomerSpecorg(){return Main&&Main.contragent&&2==Main.contragent.customer_profile_id}function isAdmin(){return Main&&Main.user&&Main.user.has_role_admin}function isCustomerAdmin(){return Main&&Main.user&&Main.user.is_customer_admin}
function isGuest(){return!Main||!Main.user||"guest"==Main.user.role}
function setAnnouncement(a){var b=Ext.get("layout_announcement_panel");if(!b)return!1;var c=b.child(".announcement-close-button");c&&c.remove();b.update("");if(a&&!isGuest()){var d=Ext.util.MD5(a);if(d===Ext.state.Manager.get("hideAnnouncementHash",null))return!1;b.createChild({cls:"announcement",width:"100%",html:a}).createChild({tag:"a",href:"#",html:"",title:"\u0421\u043a\u0440\u044b\u0442\u044c \u044d\u0442\u043e \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0435",cls:"announcement-close-button"}).on("click",
function(a,b){Ext.state.Manager.set("hideAnnouncementHash",d);Ext.getCmp("layout_center_outer_panel").doLayout();setAnnouncement("");a.stopEvent();return!1})}return b.repaint()}function clearCookies(){if(Main&&Main.session_name){var a=Main.session_name,b=new Date;b.setTime(b.getTime()-864E5);document.cookie=a+"=; expires="+b.toGMTString()}}function callComponents(a,b){for(var c,d=a.length-1;0<=d;d--)(c=Ext.getCmp(a[d]))&&b(c)}
function cleanFormItems(a){a&&a.items&&a.items.each&&a.items.each(function(a){a instanceof Application.components.combo?a.setValue(null):a.clearValue?a.clearValue():a.reset?a.reset():a.items&&cleanFormItems(a)})}function RPCBind(a){function b(){for(var a=window,b=0;b<c.length;b++)if(a=a[c[b]],!a)return null;return a}var c=a.split("."),d=b();return d?d:function(){return(d=d||b())?d.apply(this,arguments):!1}}
function isFormValid(a){var b=!0;a&&a.items&&a.items.each&&a.items.each(function(a){a.isValid?b=a.isValid()&&b:a.items&&(b=isFormValid(a)&&b)});return b}function logout(a){a&&Ext.Msg.hide();RPC.Authentication.logout(null,function(a,c){clearCookies();Main.reloadPrivileges()})}function renderTip(a,b){b=b||{};return'<sup><span style="cursor:pointer; text-decoration:underline; color:'+(b.color||"darkblue")+'; white-space:nowrap; font-weight:normal;" ext:qtip="'+a+'">[?]</span></sup>'}
function performStoreSearch(a,b,c){c=c||{};c.query=b;if(c)for(var d in c)c.hasOwnProperty(d)&&a.setBaseParam(d,c[d]);a.baseParams&&delete a.baseParams.start;a.load()}function ensureStoreLoaded(a,b,c){if(Ext.isEmpty(a.lastOptions)&&!a.autoLoad)a.load({callback:b,scope:c});else if(b&&!Ext.isEmpty(a.totalLength))b.call(c);else if(b)a.on("load",b,c,{single:!0})}function initIds(a){for(var b={},c=a.length;c--;)b[a[c]]=Ext.id();return b}
function in_array(a,b){for(var c in b)if(b[c]==a)return!0;return!1}function showFormErrors(a){if(a&&a.items&&a.items.each){var b="";a.items.each(function(a){a.isValid()||(b+="<b>"+a.fieldLabel+":</b> "+a.getActiveError()+"<br>")});Ext.MessageBox.alert("\u041e\u0448\u0438\u0431\u043a\u0430",b)}}
var isAllOf=function(a,b){if("\u041f\u043e\u0434\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u044f\u0432\u043a\u0438"==a.tooltip){var c=b.data.organizer_contragent_id==Main.contragent.id;if(isCustomer()&&b.data.procedure_type==PROCEDURE_TYPE_QUOTATION_REQ&&c&&b.json.is_applics_view||Main.user&&Main.user.allow_view_apps)return!1}for(c=0;c<b.data.lots.length;c++)if(!a.isHiddenInLot(b,b.data.lots[c]))return!1;return!0},calculateStatusNumber=function(a,b,c){b=b.data[c||"lots"];var d=0;c=b.length;for(var e=
0;e<c;e++)!b[e][a]||1!=c&&b[e][a]==Application.models.Procedure.statuses.cancelled||(d=d>b[e][a]?d:b[e][a]);if(1<c&&0==d)for(e=d=0;e<c;e++)b[e][a]&&(d=Application.models.Procedure.statuses.cancelled==b[e][a]?Application.models.Procedure.statuses.cancelled:b[e][a]);return d},lotActionHandler=function(a,b){return function(c,d,e,f,g,k){if((e=c.getAt(d))&&e.data&&e.data.lots&&e.data.lots.length)if(1==e.data.lots.length||void 0!==k){if(k||(k=0),c=new Ext.Template(a),e){var h=c.apply({lot_id:e.data.lots[k].id,
procedure_id:e.data.id});b?Ext.Msg.confirm("\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435",b,function(a){"yes"==a&&redirect_to(h)}):redirect_to(h)}}else c.getExpander().expandRow(d)}},isButtonVisible=function(a,b,c,d,e){if(!1===e)return!1;b||void 0===d||(b=LOT_STEP_REGISTRATION);b=Application.models.Procedure.getStep(b);if(!b.links)return!1;d=b.links.defaults;c=Application.models.Procedure.type_ids[""+c];b.links[c]&&(d=b.links[c]);return 0<=d.indexOf(a)?!0:!1},doc_pend=
function(a,b,c){return"\u0417\u0430\u043f\u0440\u043e\u0441\u044b: +"+c.data.pending_doc_request_number},app_pend=function(a,b,c){numb=0;if(c.data.pending_applic_request_number)for(j=0;j<c.data.pending_applic_request_number.length;j++)numb+=c.data.pending_applic_request_number[j].applic_request;return"\u0417\u0430\u043f\u0440\u043e\u0441\u044b: +"+numb},Translate={store:null,_:function(a){if(!Main.config.translates)return a;null==this.store&&(this.store=new Ext.data.ArrayStore({autoDestroy:!0,idIndex:0,
data:Main.config.translates,fields:["key","value"]}));var b=!1,c=this.store.getById(a);c&&(b=c.get("value"));return b?b:a}};function t(a){return Translate._(a)};(function(a,b){var c={forEach:function(a,b){if(a.constructor==Array)for(var c=0,d=a.length;c<d;c++){var e=b.call(a,a[c],c);if(void 0!=e)return e}else for(c in a)if(a.hasOwnProperty(c)&&(e=b.call(a,a[c],c),void 0!=e))return e;return null},mixin:function(a,b){c.forEach(a,function(a,c){b[c]=a});return b},bind:function(a,b){return function(){return a.apply(b,arguments)}}},d={list:[],add:function(a,b){var d=1==arguments.length?a:c.mixin(a,b);d&&(this.list.push(d),this.list[d.name]=d)},get:function(a){return this.list[a]},
detect:function(){var a=null;c.forEach(this.list,function(b){b.isAvailable()?(b.available=!0,a=a||b):b.available=!1});this.setup(a)},force:function(a){(a=this.get(a))&&a.available||(a=!1);return this.setup(a)},setup:function(b){if(!b)return a.ssw=!1;b.init();var d={implementation:b,forceImplementation:c.bind(this.force,this)};c.forEach(["get","add","remove","clear"],function(a){d[a]=c.bind(b[a],b)});return a.ssw=d}},e={serializer:{init:function(){},serialize:function(a){return Ext.util.JSON.encode(a)},
unserialize:function(a){try{return Ext.util.JSON.decode(a)}catch(b){return a}}},box:null,init:function(){this.serializer.init();this.specificInit&&this.specificInit()},readBox:function(){if(!this.box){var a=this.read();this.box=a&&"{"==a.charAt(0)?this.serializer.unserialize(a):{}}},saveBox:function(){var a=this.serializer.serialize(this.box);this.save(a)},get:function(a){this.readBox();return void 0!=a?this.box[a]:this.box},add:function(a,b){this.readBox();1==arguments.length?c.mixin(a,this.box):
this.box[a]=b;this.saveBox()},remove:function(a){this.readBox();a in this.box&&(delete this.box[a],this.saveBox())},clear:function(){this.box={};this.saveBox();this.specificClear&&this.specificClear()}};d.add(e,{name:"domstorage",isAvailable:function(){try{return Boolean(a.localStorage)}catch(b){return!1}},read:function(){var a=localStorage.getItem(this.storeName);return null===a?"":a.toString()},save:function(a){return localStorage.setItem(this.storeName,a)},storeName:"ssw",specificInit:function(){},
specificClear:function(){localStorage.clear()}});d.add(e,{name:"userdata",isAvailable:function(){return Boolean(!Ext.isIE&&b.documentElement&&b.documentElement.addBehavior)},read:function(){this.element.load(this.storeName);return this.element.getAttribute(this.storeName)},save:function(a){this.element.setAttribute(this.storeName,a);this.element.save(this.storeName)},storeName:"ssw",specificInit:function(){var a=b.createElement(this.storeName);b.documentElement.appendChild(a);a.addBehavior("#default#userData");
this.element=a},specificClear:function(){this.element.expires=(new Date(0)).toUTCString()}});d.add(e,{name:"cookie",isAvailable:function(){var a=this.cookieName+"-test";this.setCookie(a,a);return this.getCookie(a)==a?(this.deleteCookie(a),!0):!1},read:function(){return this.getCookie(this.cookieName)},save:function(a){a&&this.setCookie(this.cookieName,a)},cookieName:"ssw",specificClear:function(){this.deleteCookie(this.cookieName)},escapeCookie:function(a){return a.replace(/%/g,"%%").replace(/;/g,
"%S").replace(/"/g,"%Q")},unescapeCookie:function(a){return a.replace(/%Q/g,'"').replace(/%S/g,";").replace(/%%/g,"%")},getCookie:function(a){var d=b.cookie.split(/;\s*/);return(d=c.forEach(d,function(b){if(b){var c=b.indexOf("=");if(b.substring(0,c)==a)return b.substring(c+1)}}))?this.unescapeCookie(d):!1},setCookie:function(a,c){var d=a+"="+this.escapeCookie(c);if(4096<d.length)throw Error("Cookie size exceeds 4096 byte limit");b.cookie=d},deleteCookie:function(a){b.cookie=a+"=;expires="+(new Date(0)).toUTCString()}});
d.add(e,{name:"windowname",isAvailable:function(){return"undefined"!=typeof a.name},read:function(){return a.name},save:function(b){a.name=b}});d.detect();d=null})(window,document);Ext.ns("Ext.ux.state");Ext.ux.state.SSWProvider=Ext.extend(Ext.state.Provider,{constructor:function(a){Ext.ux.state.SSWProvider.superclass.constructor.call(this);this.storage=window.ssw;this.state=this.storage.get()},set:function(a,b){void 0===b||null===b?this.clear(a):(this.storage.add(a,b),Ext.ux.state.SSWProvider.superclass.set.call(this,a,b))},clear:function(a){0==arguments.length?this.storage.clear():this.storage.remove(a);Ext.ux.state.SSWProvider.superclass.clear.call(this,a)}});(function(){var a=function(a,b){var c=a.style[b];a.currentStyle?c=a.currentStyle[b]:window.getComputedStyle&&(c=document.defaultView.getComputedStyle(a,null).getPropertyValue(b));if("auto"==c&&"cursor"==b)for(var d=["a"],e=0;e<d.length;e++)if(a.tagName.toLowerCase()==d[e])return"pointer";return c},b=function(a){if(h.prototype._singleton){a||(a=window.event);var b;this!==window?b=this:a.target?b=a.target:a.srcElement&&(b=a.srcElement);h.prototype._singleton.setCurrent(b)}},c=function(a,b){if(a.addClass)return a.addClass(b),
a;if(b&&"string"===typeof b){var c=(b||"").split(/\s+/);if(1===a.nodeType)if(a.className){for(var d=" "+a.className+" ",e=a.className,f=0,g=c.length;f<g;f++)0>d.indexOf(" "+c[f]+" ")&&(e+=" "+c[f]);a.className=e.replace(/^\s+|\s+$/g,"")}else a.className=b}return a},d=function(a,b){if(a.removeClass)return a.removeClass(b),a;if(b&&"string"===typeof b||void 0===b){var c=(b||"").split(/\s+/);if(1===a.nodeType&&a.className)if(b){for(var d=(" "+a.className+" ").replace(/[\n\t]/g," "),e=0,f=c.length;e<f;e++)d=
d.replace(" "+c[e]+" "," ");a.className=d.replace(/^\s+|\s+$/g,"")}else a.className=""}return a},e=function(a){return h.prototype._singleton.options.useNoCache?(0<=a.indexOf("?")?"&nocache=":"?nocache=")+(new Date).getTime():""},f=function(a){var b=[];a.trustedDomains&&("string"===typeof a.trustedDomains?b.push("trustedDomain="+a.trustedDomains):b.push("trustedDomain="+a.trustedDomains.join(",")));return b.join("&")},g=function(a,b){if(b.indexOf)return b.indexOf(a);for(var c=0,d=b.length;c<d;c++)if(b[c]===
a)return c;return-1},k=function(a){if("string"===typeof a)throw new TypeError("ZeroClipboard doesn't accept query strings.");return a.length?a:[a]},h=function(a,b){a&&(h.prototype._singleton||this).glue(a);if(h.prototype._singleton)return h.prototype._singleton;h.prototype._singleton=this;this.options={};for(var c in s)this.options[c]=s[c];for(var d in b)this.options[d]=b[d];this.handlers={};if(h.detectFlashSupport()){c=h.prototype._singleton;d=document.getElementById("global-zeroclipboard-html-bridge");
if(!d){var g='      <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id="global-zeroclipboard-flash-bridge" width="100%" height="100%">         <param name="movie" value="'+c.options.moviePath+e(c.options.moviePath)+'"/>         <param name="allowScriptAccess" value="'+c.options.allowScriptAccess+'"/>         <param name="scale" value="exactfit"/>         <param name="loop" value="false"/>         <param name="menu" value="false"/>         <param name="quality" value="best" />         <param name="bgcolor" value="#ffffff"/>         <param name="wmode" value="transparent"/>         <param name="flashvars" value="'+
f(c.options)+'"/>         <embed src="'+c.options.moviePath+e(c.options.moviePath)+'"           loop="false" menu="false"           quality="best" bgcolor="#ffffff"           width="100%" height="100%"           name="global-zeroclipboard-flash-bridge"           allowScriptAccess="always"           allowFullScreen="false"           type="application/x-shockwave-flash"           wmode="transparent"           pluginspage="http://www.macromedia.com/go/getflashplayer"           flashvars="'+f(c.options)+
'"           scale="exactfit">         </embed>       </object>';d=document.createElement("div");d.id="global-zeroclipboard-html-bridge";d.setAttribute("class","global-zeroclipboard-container");d.setAttribute("data-clipboard-ready",!1);d.style.position="absolute";d.style.left="-9999px";d.style.top="-9999px";d.style.width="15px";d.style.height="15px";d.style.zIndex="9999";d.innerHTML=g;document.body.appendChild(d)}c.htmlBridge=d;c.flashBridge=document["global-zeroclipboard-flash-bridge"]||d.children[0].lastElementChild}},
l,q=[];h.prototype.setCurrent=function(b){l=b;this.reposition();b.getAttribute("title")&&this.setTitle(b.getAttribute("title"));this.setHandCursor("pointer"==a(b,"cursor"))};h.prototype.setText=function(a){a&&""!==a&&(this.options.text=a,this.ready()&&this.flashBridge.setText(a))};h.prototype.setTitle=function(a){a&&""!==a&&this.htmlBridge.setAttribute("title",a)};h.prototype.setSize=function(a,b){this.ready()&&this.flashBridge.setSize(a,b)};h.prototype.setHandCursor=function(a){this.ready()&&this.flashBridge.setHandCursor(a)};
h.version="1.1.7";var s={moviePath:"ZeroClipboard.swf",trustedDomains:null,text:null,hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",allowScriptAccess:"sameDomain",useNoCache:!0};h.setDefaults=function(a){for(var b in a)s[b]=a[b]};h.destroy=function(){h.prototype._singleton.unglue(q);var a=h.prototype._singleton.htmlBridge;a.parentNode.removeChild(a);delete h.prototype._singleton};h.detectFlashSupport=function(){var a=!1;if("function"===typeof ActiveXObject)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&
(a=!0)}catch(b){}!a&&navigator.mimeTypes["application/x-shockwave-flash"]&&(a=!0);return a};h.prototype.resetBridge=function(){this.htmlBridge.style.left="-9999px";this.htmlBridge.style.top="-9999px";this.htmlBridge.removeAttribute("title");this.htmlBridge.removeAttribute("data-clipboard-text");d(l,this.options.activeClass);l=null;this.options.text=null};h.prototype.ready=function(){var a=this.htmlBridge.getAttribute("data-clipboard-ready");return"true"===a||!0===a};h.prototype.reposition=function(){if(!l)return!1;
var b=l,c=0,d=0,e=b.width||b.offsetWidth||0,f=b.height||b.offsetHeight||0,g=9999,h=a(b,"zIndex");for(h&&"auto"!=h&&(g=parseInt(h,10));b;)var h=parseInt(a(b,"borderLeftWidth"),10),k=parseInt(a(b,"borderTopWidth"),10),c=c+(isNaN(b.offsetLeft)?0:b.offsetLeft),c=c+(isNaN(h)?0:h),d=d+(isNaN(b.offsetTop)?0:b.offsetTop),d=d+(isNaN(k)?0:k),b=b.offsetParent;this.htmlBridge.style.top=d+"px";this.htmlBridge.style.left=c+"px";this.htmlBridge.style.width=e+"px";this.htmlBridge.style.height=f+"px";this.htmlBridge.style.zIndex=
g+1;this.setSize(e,f)};h.dispatch=function(a,b){h.prototype._singleton.receiveEvent(a,b)};h.prototype.on=function(a,b){for(var c=a.toString().split(/\s/g),d=0;d<c.length;d++)a=c[d].toLowerCase().replace(/^on/,""),this.handlers[a]||(this.handlers[a]=b);this.handlers.noflash&&!h.detectFlashSupport()&&this.receiveEvent("onNoFlash",null)};h.prototype.addEventListener=h.prototype.on;h.prototype.off=function(a,b){for(var c=a.toString().split(/\s/g),d=0;d<c.length;d++){a=c[d].toLowerCase().replace(/^on/,
"");for(var e in this.handlers)e===a&&this.handlers[e]===b&&delete this.handlers[e]}};h.prototype.removeEventListener=h.prototype.off;h.prototype.receiveEvent=function(a,b){a=a.toString().toLowerCase().replace(/^on/,"");var e=l;switch(a){case "load":if(b&&10>parseFloat(b.flashVersion.replace(",",".").replace(/[^0-9\.]/gi,""))){this.receiveEvent("onWrongFlash",{flashVersion:b.flashVersion});return}this.htmlBridge.setAttribute("data-clipboard-ready",!0);break;case "mouseover":c(e,this.options.hoverClass);
break;case "mouseout":d(e,this.options.hoverClass);this.resetBridge();break;case "mousedown":c(e,this.options.activeClass);break;case "mouseup":d(e,this.options.activeClass);break;case "datarequested":var f=e.getAttribute("data-clipboard-target");(f=(f=f?document.getElementById(f):null)?f.value||f.textContent||f.innerText:e.getAttribute("data-clipboard-text"))&&this.setText(f);break;case "complete":this.options.text=null}this.handlers[a]&&(f=this.handlers[a],"function"==typeof f?f.call(e,this,b):
"string"==typeof f&&window[f].call(e,this,b))};h.prototype.glue=function(a){a=k(a);for(var c=0;c<a.length;c++)if(-1==g(a[c],q)){q.push(a[c]);var d=a[c],e=b;d.addEventListener?d.addEventListener("mouseover",e,!1):d.attachEvent&&d.attachEvent("onmouseover",e)}};h.prototype.unglue=function(a){a=k(a);for(var c=0;c<a.length;c++){var d=a[c],e=b;d.removeEventListener?d.removeEventListener("mouseover",e,!1):d.detachEvent&&d.detachEvent("onmouseover",e);d=g(a[c],q);-1!=d&&q.splice(d,1)}};"undefined"!==typeof module?
module.exports=h:"function"===typeof define&&define.amd?define(function(){return h}):window.ZeroClipboard=h})();Ext.ns("Main");Ext.ns("Main.layout");Ext.ns("Main.user");Ext.ns("Main.contragent");Ext.ns("Main.direct");Ext.ns("Main.initializers");
function defaultErrorHandler(a,b,c){b&&(a+=" at "+b,c&&(a+=":"+c));void 0!=typeof Ext?Ext.debug?Ext.log("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: "+a):Ext.Msg.alert("\u041e\u0448\u0438\u0431\u043a\u0430","\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043d\u0435\u043f\u0440\u0435\u0434\u0432\u0438\u0434\u0435\u043d\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430. \u0422\u0435\u043a\u0441\u0442 \u043e\u0448\u0438\u0431\u043a\u0438:<br/>"+a):
alert(a);return!1}Main.ajaxPull=[];Ext.Ajax.on("beforerequest",function(a,b){void 0!=b.ts&&b.ts.tid&&Main.ajaxPull.push({conn:a,tId:b.ts.tid-1})});
Main.apply_acl=function(){var a=null;switch(Main.user.role){case "user":Main.layout.north_panel.show();Main.layout.south_panel.show();Main.layout.north_panel_for_login.hide();Main.layout.south_panel_for_login.hide();Main.layout.root.doLayout();a=Main.user.menues;if(isAdmin()){var b=["company/view","company/viewShort","user/registerexpert"],c;for(c in a)a.hasOwnProperty(c)&&a[c]&&a[c].url&&0<=b.indexOf(a[c].url)&&(a[c].url="")}a=buildUserMenuBar(Main.user.mandates,a,Main.user.mandatesMenu);break;case "guest":Main.layout.north_panel.hide(),
Main.layout.south_panel.hide(),Main.layout.north_panel_for_login.show(),Main.layout.south_panel_for_login.show(),Main.layout.root.doLayout()}Main.layout.top_toolbar&&(Main.layout.north_panel.remove(Main.layout.top_toolbar),Ext.destroy(Main.layout.top_toolbar),Main.layout.top_toolbar=null,a||Main.layout.north_panel.doLayout());a&&(Main.layout.top_toolbar=a,Main.layout.north_panel&&Main.layout.north_panel.items&&(Main.layout.north_panel.insert(Main.layout.north_panel.items.getCount(),a),Main.layout.north_panel.doLayout()));
if("guest"!=Main.user.role){Main.layout.root.doLayout();if(this.auth)this.auth.login({login:Main.user.login});else if(!this.isReady)this.onReady(function(){this.auth.login({login:Main.user.login})},this);this.acl.setErrorRedirect(null,null,{controller:"auth",action:"noaccess"})}else a&&Main.layout.root.doLayout(),this.auth&&this.auth.logout(),this.acl.setErrorRedirect(null,null,{controller:"auth",action:"login"});if(Main.user.mandates&&Main.user.mandates.length)for(c="user","guest"==Main.user.role&&
(c="guest"),a=0;a<Main.user.mandates.length;a++)this.acl.allow(c,Main.user.mandates[a].url)};
Main.init_acl=function(){this.constructor.superclass?this.constructor.superclass.initAcl.call(this):this.superclass.initAcl.call(this);this.acl.addRole(new Application.Acl.Role("user","guest"));this.acl.deny(null);this.acl.deny("guest");this.acl.deny("user");this.acl.allow("guest","front/index");this.acl.allow("user","front/index");this.acl.allow("guest","auth/noaccess");this.acl.allow("user","auth/noaccess");this.acl.allow("guest","auth/login");this.acl.allow("user","auth/logout");Main.apply_acl.call(this)};
Main.init_router=function(){this.constructor.superclass.initRouter.call(this);this.router.addRoute(new Application.Router.Route("module",":module/:controller/:action/*",{module:"\\w*",controller:"\\w*",action:"\\w*"},"high"))};
Main.reloadPrivileges=function(){performRPCCall(RPC.Index.index,[],{mask:!0,wait_text:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043f\u0440\u0438\u0432\u0438\u043b\u0435\u0433\u0438\u0439..."},function(a){a.success&&a.user?(Main.eds=a.eds,Main.user=a.user,Main.contragent=a.contragent):(Main.user.role="guest",Main.user.landing="auth/login");a&&a.auth_token&&(Main.requestToken=a.auth_token);Main.apply_acl.call(Main.app);var b=a.announcement;Main.config.guarantee_required_alert&&isSupplierAccred()&&
!isCustomerAccred()&&a.contragent&&0>=a.contragent.available_sum&&b.push({id:"guarantee_required_alert",content:Main.config.guarantee_required_alert});setAnnouncement(b);a.success&&a.contragent?Main.app.fireEvent("update_account_info",a.contragent.available_sum):Main.app.fireEvent("update_account_info");redirect_to("/")})};
Main.direct.postData=function(a,b){var c;b&&b.result&&!1==b.result.success&&!0==b.result.no_access&&(b.result.no_session?Main.reloadPrivileges():(c=b.result.message||b.result.msg||"\u0414\u043e\u0441\u0442\u0443\u043f \u0437\u0430\u043f\u0440\u0435\u0449\u0435\u043d.",Ext.Msg.alert("\u041e\u0448\u0438\u0431\u043a\u0430",c),Main&&Main.app&&Main.app.fireEvent("rpcerror",b)));if(b&&"exception"==b.type){c=b.message||b.msg||"\u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u044f\u044f \u043e\u0448\u0438\u0431\u043a\u0430.";
var d=b.where,e="\u0441\u0442\u0435\u043a \u0432\u044b\u0437\u043e\u0432\u043e\u0432";"parse"==b.code&&b.data&&(c=b.data.name?b.data.name+": ":"",c+=b.data.message,b.xhr&&b.xhr.responseText?(d=b.xhr.responseText,e="\u043e\u0442\u0432\u0435\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0430"):b.data.stack&&(d=b.data.stack,e="\u043e\u0442\u0432\u0435\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0430"));var f="<div>["+formatDate(new Date)+"] "+(b.action||"")+"."+(b.method||"")+"</div>";d&&(d=(d||"").escapeHtml(),
d=d.replace(/\n/g,"<br/>\n"),f=f+('<div id="server_response_link"><a href="javascript:;" onclick="Ext.get(\'server_response_link\').hide();Ext.get(\'server_response_text\').show();">\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c '+e+"</a></div>")+('<div id="server_response_text" style="display:none;">'+d+"</div>"));Ext.MessageBox.show({buttons:Ext.MessageBox.OK,closable:!0,width:d?750:600,maxWidth:750,title:"\u041e\u0448\u0438\u0431\u043a\u0430",msg:'<div class="ext-mb-icon ext-mb-error"></div>'+
c.toString()+f});Main&&Main.app&&Main.app.fireEvent("rpcerror",b)}if(b&&b.warnings&&Ext.debug){c={1:"ERROR",2:"WARNING",4:"PARSE",8:"NOTICE",16:"CORE_ERROR",32:"CORE_WARNING",64:"COMPILE_ERROR",128:"COMPILE_WARNING",256:"USER_ERROR",512:"USER_WARNING",1024:"USER_NOTICE",2048:"STRICT",4096:"RECOVERABLE_ERROR",8192:"DEPRECATED",16384:"USER_DEPRECATED"};d=["Warnings in "+b.action+"."+b.method+":"];for(e=0;e<b.warnings.length;e++){var f=b.warnings[e],g="DEPRECATED mktime(): You should be using the time() function instead;USER_DEPRECATED The Twig_Autoloader class is deprecated and will be removed in 2.0. Use Composer instead.;USER_DEPRECATED Using Twig_Autoloader is deprecated. Use Composer instead.;WARNING Declaration of Model_ListPurchasemethods::create($data, $model_name) should be compatible with Model_ListNsi::create($data = Array, $model_name = NULL);WARNING Declaration of Model_ListPurchasemethods::delete($code = NULL) should be compatible with Core_Mapper::delete($from_draft = false, $recursive = true);WARNING Declaration of Model_UserAccreditation::submit($params, Model_User $user) should be compatible with Model_Accreditation::submit($params, Model_Contragent $contragent, Model_User $user);WARNING Declaration of Model_UserAccreditation::create($data) should be compatible with Model_Accreditation::create($data, $type);WARNING Declaration of Model_UserAccreditation::load($id) should be compatible with Model_Accreditation::load($id, $type);WARNING Declaration of Model_UserAccreditation::getList($params) should be compatible with Model_Accreditation::getList($type, $params)".split(";"),
k=(c[""+f.code]||f.code)+" "+f.message;k.indexOf("should be compatible with Core_Mapper::create($params = Array)")==INDEX_NOT_FOUND&&g.indexOf(k)==INDEX_NOT_FOUND&&d.push("  "+k+" at "+f.location)}d.length>NO_MAGIC_NUMBER_ONE&&Ext.dump(d.join("\n"))}};Main.direct.exception=function(){alert("exception")};Main.direct.getSecurityToken=function(){return Main.requestToken||""};
Ext.override(Ext.direct.RemotingProvider,{getCallData:function(a){return{action:a.action,method:a.method,data:a.data,type:"rpc",tid:a.tid,token:Main.direct.getSecurityToken()}},doForm:function(a,b,c,d,e){e=new Ext.Direct.Transaction({provider:this,action:a,method:b.name,args:[c,d,e],cb:e&&Ext.isFunction(d)?d.createDelegate(e):d,isForm:!0});if(!1!==this.fireEvent("beforecall",this,e,b)){Ext.Direct.addTransaction(e);var f="multipart/form-data"==String(c.getAttribute("enctype")).toLowerCase();a={extTID:e.tid,
extAction:a,extMethod:b.name,extType:"rpc",extUpload:String(f),extToken:Main.direct.getSecurityToken()};Ext.apply(e,{form:Ext.getDom(c),isUpload:f,params:d&&Ext.isObject(d.params)?Ext.apply(a,d.params):a});this.fireEvent("call",this,e,b);this.processForm(e)}}});
Main.init_application_core=function(){window.onerror=defaultErrorHandler;Main.config={};Main.signaturePlugin="cryptopro";Main.signaturePluginByDefault=!0;var a=Ext.util.Cookies.get("ext-current-plugin");a&&(Main.signaturePlugin=a,Main.signaturePluginByDefault=!1);Ext.getBody().mask("\u0421\u043e\u0435\u0434\u0438\u043d\u044f\u0435\u043c\u0441\u044f \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c","x-mask-loading");Ext.Ajax.request({url:"/api.php",method:"GET",success:function(a){Ext.getBody().unmask();
Main.modules=[];a=Ext.decode(a.responseText);if(a.success&&(a.api_data||a.modules)){for(var c in a.modules)if(a.modules[c].type){var d=Ext.id();a.modules[c].id=d;Ext.Direct.addProvider(a.modules[c]);Main.modules.push(a.modules[c].namespace);Ext.Direct.getProvider(d).on("data",Main.direct.postData);Ext.Direct.getProvider(d).on("exception",Main.direct.exception)}performRPCCall(RPC.Index.index,[],{mask:!0,wait_text:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f..."},function(a){a&&
a.session_name&&(Main.session_name=a.session_name);a&&a.auth_token&&(Main.requestToken=a.auth_token);var b=Ext.get("site-title");b&&b.update(a.site_title||"");(b=Ext.getCmp("site-copyright"))&&b.setText(a.site_copyright||"");Main.siteTitle=a.site_title;a.config&&Main.initConfig(a);Main.eds=a.eds;eds();a.success&&a.user?(Main.user=a.user,Main.contragent=a.contragent,Main.available_sum=null):(Main.user.role="guest",Main.user.landing="auth/login");for(funcKey in Main.initializers)func=Main.initializers[funcKey],
func();Main.app=new (Ext.extend(Application,{viewport:Main.layout.center_panel,autoRun:!1,autoScroll:!0,initAcl:Main.init_acl,initRouter:Main.init_router,listeners:{beforeinit:function(a){a.addEvents({timeoffsetwarn:!0,timeupdated:!0,announcement:!0,available_sum_changed:!0,deposit_changed:!0,getupdate:!0,update_account_info:!0})}}}));Main.app.run();Main.detect_browser_issues();var c=!0;Main.app.on("timeoffsetwarn",function(a){a=Math.round(a/6E4);Ext.Msg.alert("\u041f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0435",
"\u0427\u0430\u0441\u044b \u0432\u0430\u0448\u0435\u0433\u043e \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u0430 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0442 \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u0438 \u043e\u0448\u0438\u0431\u0430\u044e\u0442\u0441\u044f \u043f\u0440\u0438\u043c\u0435\u0440\u043d\u043e \u043d\u0430 "+a+" "+Ext.util.Format.declencionRus(a,"\u043c\u0438\u043d\u0443\u0442\u0443","\u043c\u0438\u043d\u0443\u0442\u044b",
"\u043c\u0438\u043d\u0443\u0442")+".<br/>\n\u041f\u043e\u043f\u0440\u0430\u0432\u044c\u0442\u0435 \u0447\u0430\u0441\u044b \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u0430 (\u0432 \u0442\u043e\u043c \u0447\u0438\u0441\u043b\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u044f \u0447\u0430\u0441\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u044f\u0441\u0430 \u043d\u0430 \u044d\u0442\u0438\u0445 \u0447\u0430\u0441\u0430\u0445), \u0438\u043d\u0430\u0447\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0441\u0430\u043c\u0438 \u0441\u0435\u0431\u044f \u0432\u0432\u0435\u0441\u0442\u0438 \u0432 \u0437\u0430\u0431\u043b\u0443\u0436\u0434\u0435\u043d\u0438\u0435 \u0438 \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0443\u0447\u0435\u0441\u0442\u044c \u0441\u0440\u043e\u043a\u0438, \u0430 \u043f\u0440\u0438 \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0431\u043e\u043b\u044c\u0448\u043e\u043c \u0440\u0430\u0441\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u0438 \u0432\u044b \u043d\u0435 \u0441\u043c\u043e\u0436\u0435\u0442\u0435 \u0434\u0430\u0436\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0435!");
Main.app.viewport.fireEvent("clock_warning","\u041f\u043e\u0445\u043e\u0436\u0435, \u0447\u0442\u043e \u0447\u0430\u0441\u044b \u0432\u0430\u0448\u0435\u0433\u043e \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u0430 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0442 \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f. \u041f\u043e\u043f\u0440\u0430\u0432\u044c\u0442\u0435 \u0447\u0430\u0441\u044b \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u0430 (\u0432 \u0442\u043e\u043c \u0447\u0438\u0441\u043b\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u044f \u0447\u0430\u0441\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u044f\u0441\u0430 \u043d\u0430 \u044d\u0442\u0438\u0445 \u0447\u0430\u0441\u0430\u0445), \u0438\u043d\u0430\u0447\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0441\u0430\u043c\u0438 \u0441\u0435\u0431\u044f \u0432\u0432\u0435\u0441\u0442\u0438 \u0432 \u0437\u0430\u0431\u043b\u0443\u0436\u0434\u0435\u043d\u0438\u0435 \u0438 \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0443\u0447\u0435\u0441\u0442\u044c \u0441\u0440\u043e\u043a\u0438, \u0430 \u043f\u0440\u0438 \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0431\u043e\u043b\u044c\u0448\u043e\u043c \u0440\u0430\u0441\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u0438 \u0432\u044b \u043d\u0435 \u0441\u043c\u043e\u0436\u0435\u0442\u0435 \u0434\u0430\u0436\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0435!")},
Main.app,{once:!0});Main.app.on("getupdate",function(){c=!1;Ext.TaskMgr.stop(Main.pingtask);Ext.TaskMgr.start(Main.pingtask)});Main.app.on("announcement",function(a){setAnnouncement(a)});var d=function(a){a&&a.auth_token&&(Main.requestToken=a.auth_token);Main.app.fireEvent("timeupdated",a.server_time,a.server_tz);Ext.getCmp("layout_account_data_panel")||(Main.layout.north_panel.insert(1,new Application.components.accountDataPanel({id:"layout_account_data_panel"})),Main.layout.north_panel.doLayout());
if(a.contragent){var b=a.contragent,c=!1,d=!1;b&&Main.contragent&&Main.contragent.available_sum!=b.available_sum&&(Main.contragent.available_sum=parsePrice(b.available_sum),d=!0);for(var e=["deposit","deposit_blocked","toreturn"],f=0;f<e.length;f++){var g=e[f],k=parsePrice(b[g])||0;Main.contragent[g]!=k&&(c=!0,Main.contragent[g]=k)}if(d||Main.contragent.tariff_validity_period!=b.tariff_validity_period)d||(Main.contragent.tariff_validity_period=b.tariff_validity_period,Main.contragent.tariff_id=b.tariff_id,
Main.contragent.tariff_name=b.tariff_name),Main.app.fireEvent("available_sum_changed",Main.contragent.available_sum);c&&Main.app.fireEvent("deposit_changed",Main.contragent);a=a.announcement;Main.config.guarantee_required_alert&&isSupplierAccred()&&!isCustomerAccred()&&0>=Main.contragent.available_sum&&a.push({id:"guarantee_required_alert",content:Main.config.guarantee_required_alert});Main.app.fireEvent("announcement",a)}};Main.app.viewport.fireEvent("application_ready");a.success&&d(a);Main.pingtask=
{interval:3E5,run:function(){c?c=!1:RPC.Index.serverinfo(function(a){a&&a.success&&d(a)})},scope:Main};Ext.TaskMgr.start(Main.pingtask);a.config.inactive_period&&(Main.inactivetask={add_interval:6E4*a.config.inactive_period,finish_time:null,interval:6E4,run:function(){var a=(new Date).getTime();a>this.finish_time&&(this.finish_time=a+this.add_interval,"guest"!=Main.user.role&&redirect_to("auth/logout"))}},Main.inactivetask.finish_time=(new Date).getTime()+Main.inactivetask.add_interval,document.documentElement.onkeypress=
document.documentElement.onmousemove=document.documentElement.onclick=function(){Main.inactivetask.finish_time=(new Date).getTime()+Main.inactivetask.add_interval},Ext.TaskMgr.start(Main.inactivetask))})}else Ext.Msg.alert("\u041e\u0448\u0438\u0431\u043a\u0430","\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0432\u044f\u0437\u044c \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c, \u0441\u0435\u0440\u0432\u0435\u0440 \u0432\u0435\u0440\u043d\u0443\u043b \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0443\u044e \u043e\u0448\u0438\u0431\u043a\u0443: "+
a.msg,Main.init_application_core)},failure:function(){Ext.getBody().unmask();Ext.Msg.alert("\u041e\u0448\u0438\u0431\u043a\u0430","\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0432\u044f\u0437\u044c \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c",Main.init_application_core)}})};
Main.initConfig=function(a){Ext.apply(Main.config,a.config);Main.config.warranty_guarantee_type||(Main.config.warranty_guarantee_type=Main.config.warranty_guarantee_sum?"sum":"percent");ACCEPTED_FILES=(new Ext.Template(ACCEPTED_FILES)).apply(a.config);MAX_UPLOAD_SIZE=1048576*Number(a.config.upload_file_size||10);Application.models.Procedure.init(a.config)};
Main.init_application=function(){var a=window.location.href.split(/\/+/g),a=a[0]+"//"+window.location.href.split(/\/+/g)[1];Ext.Ajax.timeout=6E5;Ext.USE_NATIVE_JSON=!0;Ext.isIE&&(Ext.isIE8||Ext.isIE7||Ext.isIE6)&&(Ext.USE_NATIVE_JSON=!1);Ext.chart.Chart.CHART_URL=a+"/resources/charts.swf";Ext.FlashComponent.EXPRESS_INSTALL_URL=a+"/resources/expressinstall.swf";Ext.MessageBox.minWidth=400;Main.init_application_core()};
Main.detect_browser_issues=function(){var a=[];!Main.requestToken&&this.session_name&&null===Ext.util.Cookies.get(this.session_name)&&(clearCookies(),a.push("\u0423 \u0432\u0430\u0441 \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u044b cookies, \u0431\u0435\u0437 \u044d\u0442\u043e\u0433\u043e \u0432\u044b \u043d\u0435 \u0441\u043c\u043e\u0436\u0435\u0442\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0438 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0435.",
"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u0435 cookies \u0438/\u0438\u043b\u0438 \u0434\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0441\u0430\u0439\u0442 \u0432 \u0434\u043e\u0432\u0435\u0440\u0435\u043d\u043d\u044b\u0435 \u0443\u0437\u043b\u044b!"));var b=null;"Microsoft Internet Explorer"==window.navigator.appName&&(document.documentMode?b=document.documentMode:(b=5,document.compatMode&&"CSS1Compat"==document.compatMode&&(b=7)),8>b&&a.push("\u0412\u044b \u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0435\u0441\u044c \u0443\u0441\u0442\u0430\u0440\u0435\u0432\u0448\u0438\u043c \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u043e\u043c, \u0438\u043b\u0438 \u0432 \u0432\u0430\u0448\u0435\u043c \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0435 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u043e \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0432\u0435\u0431-\u0443\u0437\u043b\u043e\u0432.",
'\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u043e\u0441\u0442\u0438, \u0438\u043b\u0438 <a href="http://windows.microsoft.com/ru-RU/internet-explorer/products/ie/home" target="_blank">\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 Internet Explorer</a> \u043a\u0430\u043a \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u0434\u043e 8\u0439 \u0432\u0435\u0440\u0441\u0438\u0438, \u0432 \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u0441\u0430\u0439\u0442 \u043c\u043e\u0436\u0435\u0442 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e.',
'\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u0442\u044c \u043d\u0430 <a href="#help/index/id/279" onclick="javascript:redirect_to(\'help/index/id/279\', true);return false;">\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435 \u0441\u043f\u0440\u0430\u0432\u043a\u0438</a>.'));a.length&&Ext.Msg.alert("\u041f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0435",a.join("<br/>\n"))};
Ext.override(Ext.form.TimeField,{initDate:"2/1/2008"});
